(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function H0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var lp={exports:{}},fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function HI(){if(OE)return fu;OE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return fu.Fragment=e,fu.jsx=t,fu.jsxs=t,fu}var ME;function GI(){return ME||(ME=1,lp.exports=HI()),lp.exports}var Pe=GI(),up={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function KI(){if(PE)return Ce;PE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,K={};function F(N,ee,ce){this.props=N,this.context=ee,this.refs=K,this.updater=ce||O}F.prototype.isReactComponent={},F.prototype.setState=function(N,ee){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ee,"setState")},F.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function te(){}te.prototype=F.prototype;function W(N,ee,ce){this.props=N,this.context=ee,this.refs=K,this.updater=ce||O}var ne=W.prototype=new te;ne.constructor=W,H(ne,F.prototype),ne.isPureReactComponent=!0;var ve=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},_e=Object.prototype.hasOwnProperty;function D(N,ee,ce,le,pe,Me){return ce=Me.ref,{$$typeof:s,type:N,key:ee,ref:ce!==void 0?ce:null,props:Me}}function w(N,ee){return D(N.type,ee,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function M(N){var ee={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ce){return ee[ce]})}var V=/\/+/g;function k(N,ee){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):ee.toString(36)}function C(){}function dt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(ee){N.status==="pending"&&(N.status="fulfilled",N.value=ee)},function(ee){N.status==="pending"&&(N.status="rejected",N.reason=ee)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function st(N,ee,ce,le,pe){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(Me){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case s:case e:Ae=!0;break;case _:return Ae=N._init,st(Ae(N._payload),ee,ce,le,pe)}}if(Ae)return pe=pe(N),Ae=le===""?"."+k(N,0):le,ve(pe)?(ce="",Ae!=null&&(ce=Ae.replace(V,"$&/")+"/"),st(pe,ee,ce,"",function(jn){return jn})):pe!=null&&(I(pe)&&(pe=w(pe,ce+(pe.key==null||N&&N.key===pe.key?"":(""+pe.key).replace(V,"$&/")+"/")+Ae)),ee.push(pe)),1;Ae=0;var qt=le===""?".":le+":";if(ve(N))for(var $e=0;$e<N.length;$e++)le=N[$e],Me=qt+k(le,$e),Ae+=st(le,ee,ce,Me,pe);else if($e=b(N),typeof $e=="function")for(N=$e.call(N),$e=0;!(le=N.next()).done;)le=le.value,Me=qt+k(le,$e++),Ae+=st(le,ee,ce,Me,pe);else if(Me==="object"){if(typeof N.then=="function")return st(dt(N),ee,ce,le,pe);throw ee=String(N),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Y(N,ee,ce){if(N==null)return N;var le=[],pe=0;return st(N,le,"","",function(Me){return ee.call(ce,Me,pe++)}),le}function ue(N){if(N._status===-1){var ee=N._result;ee=ee(),ee.then(function(ce){(N._status===0||N._status===-1)&&(N._status=1,N._result=ce)},function(ce){(N._status===0||N._status===-1)&&(N._status=2,N._result=ce)}),N._status===-1&&(N._status=0,N._result=ee)}if(N._status===1)return N._result.default;throw N._result}var ge=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function ze(){}return Ce.Children={map:Y,forEach:function(N,ee,ce){Y(N,function(){ee.apply(this,arguments)},ce)},count:function(N){var ee=0;return Y(N,function(){ee++}),ee},toArray:function(N){return Y(N,function(ee){return ee})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=F,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=W,Ce.StrictMode=i,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return oe.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cloneElement=function(N,ee,ce){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var le=H({},N.props),pe=N.key,Me=void 0;if(ee!=null)for(Ae in ee.ref!==void 0&&(Me=void 0),ee.key!==void 0&&(pe=""+ee.key),ee)!_e.call(ee,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ee.ref===void 0||(le[Ae]=ee[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=ce;else if(1<Ae){for(var qt=Array(Ae),$e=0;$e<Ae;$e++)qt[$e]=arguments[$e+2];le.children=qt}return D(N.type,pe,void 0,void 0,Me,le)},Ce.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ce.createElement=function(N,ee,ce){var le,pe={},Me=null;if(ee!=null)for(le in ee.key!==void 0&&(Me=""+ee.key),ee)_e.call(ee,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(pe[le]=ee[le]);var Ae=arguments.length-2;if(Ae===1)pe.children=ce;else if(1<Ae){for(var qt=Array(Ae),$e=0;$e<Ae;$e++)qt[$e]=arguments[$e+2];pe.children=qt}if(N&&N.defaultProps)for(le in Ae=N.defaultProps,Ae)pe[le]===void 0&&(pe[le]=Ae[le]);return D(N,Me,void 0,void 0,null,pe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:d,render:N}},Ce.isValidElement=I,Ce.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ue}},Ce.memo=function(N,ee){return{$$typeof:g,type:N,compare:ee===void 0?null:ee}},Ce.startTransition=function(N){var ee=oe.T,ce={};oe.T=ce;try{var le=N(),pe=oe.S;pe!==null&&pe(ce,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ze,ge)}catch(Me){ge(Me)}finally{oe.T=ee}},Ce.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},Ce.use=function(N){return oe.H.use(N)},Ce.useActionState=function(N,ee,ce){return oe.H.useActionState(N,ee,ce)},Ce.useCallback=function(N,ee){return oe.H.useCallback(N,ee)},Ce.useContext=function(N){return oe.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,ee){return oe.H.useDeferredValue(N,ee)},Ce.useEffect=function(N,ee,ce){var le=oe.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(N,ee)},Ce.useId=function(){return oe.H.useId()},Ce.useImperativeHandle=function(N,ee,ce){return oe.H.useImperativeHandle(N,ee,ce)},Ce.useInsertionEffect=function(N,ee){return oe.H.useInsertionEffect(N,ee)},Ce.useLayoutEffect=function(N,ee){return oe.H.useLayoutEffect(N,ee)},Ce.useMemo=function(N,ee){return oe.H.useMemo(N,ee)},Ce.useOptimistic=function(N,ee){return oe.H.useOptimistic(N,ee)},Ce.useReducer=function(N,ee,ce){return oe.H.useReducer(N,ee,ce)},Ce.useRef=function(N){return oe.H.useRef(N)},Ce.useState=function(N){return oe.H.useState(N)},Ce.useSyncExternalStore=function(N,ee,ce){return oe.H.useSyncExternalStore(N,ee,ce)},Ce.useTransition=function(){return oe.H.useTransition()},Ce.version="19.1.1",Ce}var kE;function dg(){return kE||(kE=1,up.exports=KI()),up.exports}var $=dg();const QI=H0($);var cp={exports:{}},du={},hp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function YI(){return LE||(LE=1,(function(s){function e(Y,ue){var ge=Y.length;Y.push(ue);e:for(;0<ge;){var ze=ge-1>>>1,N=Y[ze];if(0<a(N,ue))Y[ze]=ue,Y[ge]=N,ge=ze;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ue=Y[0],ge=Y.pop();if(ge!==ue){Y[0]=ge;e:for(var ze=0,N=Y.length,ee=N>>>1;ze<ee;){var ce=2*(ze+1)-1,le=Y[ce],pe=ce+1,Me=Y[pe];if(0>a(le,ge))pe<N&&0>a(Me,le)?(Y[ze]=Me,Y[pe]=ge,ze=pe):(Y[ze]=le,Y[ce]=ge,ze=ce);else if(pe<N&&0>a(Me,ge))Y[ze]=Me,Y[pe]=ge,ze=pe;else break e}}return ue}function a(Y,ue){var ge=Y.sortIndex-ue.sortIndex;return ge!==0?ge:Y.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,T=null,b=3,O=!1,H=!1,K=!1,F=!1,te=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ve(Y){for(var ue=t(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=Y)i(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function oe(Y){if(K=!1,ve(Y),!H)if(t(p)!==null)H=!0,_e||(_e=!0,k());else{var ue=t(g);ue!==null&&st(oe,ue.startTime-Y)}}var _e=!1,D=-1,w=5,I=-1;function M(){return F?!0:!(s.unstable_now()-I<w)}function V(){if(F=!1,_e){var Y=s.unstable_now();I=Y;var ue=!0;try{e:{H=!1,K&&(K=!1,W(D),D=-1),O=!0;var ge=b;try{t:{for(ve(Y),T=t(p);T!==null&&!(T.expirationTime>Y&&M());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,b=T.priorityLevel;var N=ze(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof N=="function"){T.callback=N,ve(Y),ue=!0;break t}T===t(p)&&i(p),ve(Y)}else i(p);T=t(p)}if(T!==null)ue=!0;else{var ee=t(g);ee!==null&&st(oe,ee.startTime-Y),ue=!1}}break e}finally{T=null,b=ge,O=!1}ue=void 0}}finally{ue?k():_e=!1}}}var k;if(typeof ne=="function")k=function(){ne(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,dt=C.port2;C.port1.onmessage=V,k=function(){dt.postMessage(null)}}else k=function(){te(V,0)};function st(Y,ue){D=te(function(){Y(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var ge=b;b=ue;try{return Y()}finally{b=ge}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=b;b=Y;try{return ue()}finally{b=ge}},s.unstable_scheduleCallback=function(Y,ue,ge){var ze=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ze+ge:ze):ge=ze,Y){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ge+N,Y={id:_++,callback:ue,priorityLevel:Y,startTime:ge,expirationTime:N,sortIndex:-1},ge>ze?(Y.sortIndex=ge,e(g,Y),t(p)===null&&Y===t(g)&&(K?(W(D),D=-1):K=!0,st(oe,ge-ze))):(Y.sortIndex=N,e(p,Y),H||O||(H=!0,_e||(_e=!0,k()))),Y},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(Y){var ue=b;return function(){var ge=b;b=ue;try{return Y.apply(this,arguments)}finally{b=ge}}}})(fp)),fp}var UE;function XI(){return UE||(UE=1,hp.exports=YI()),hp.exports}var dp={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function $I(){if(BE)return Zt;BE=1;var s=dg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Zt.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},Zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},Zt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:O}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:b,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},Zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},Zt.requestFormReset=function(p){i.d.r(p)},Zt.unstable_batchedUpdates=function(p,g){return p(g)},Zt.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.1.1",Zt}var zE;function ZI(){if(zE)return dp.exports;zE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dp.exports=$I(),dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function JI(){if(qE)return du;qE=1;var s=XI(),e=dg(),t=ZI();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),n;if(m===u)return d(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=m;break}if(A===u){E=!0,u=f,o=m;break}A=A.sibling}if(!E){for(A=m.child;A;){if(A===o){E=!0,o=m,u=f;break}if(A===u){E=!0,u=m,o=f;break}A=A.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function g(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=g(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function dt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case F:return"Profiler";case K:return"StrictMode";case oe:return"Suspense";case _e:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case ne:return(n.displayName||"Context")+".Provider";case W:return(n._context.displayName||"Context")+".Consumer";case ve:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:dt(n.type)||"Memo";case w:r=n._payload,n=n._init;try{return dt(n(r))}catch{}}return null}var st=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ze=[],N=-1;function ee(n){return{current:n}}function ce(n){0>N||(n.current=ze[N],ze[N]=null,N--)}function le(n,r){N++,ze[N]=n.current,n.current=r}var pe=ee(null),Me=ee(null),Ae=ee(null),qt=ee(null);function $e(n,r){switch(le(Ae,r),le(Me,n),le(pe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?oE(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=oE(r),n=lE(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ce(pe),le(pe,n)}function jn(){ce(pe),ce(Me),ce(Ae)}function al(n){n.memoizedState!==null&&le(qt,n);var r=pe.current,o=lE(r,n.type);r!==o&&(le(Me,n),le(pe,o))}function wa(n){Me.current===n&&(ce(pe),ce(Me)),qt.current===n&&(ce(qt),ou._currentValue=ge)}var Ia=Object.prototype.hasOwnProperty,ms=s.unstable_scheduleCallback,Ra=s.unstable_cancelCallback,ud=s.unstable_shouldYield,ol=s.unstable_requestPaint,hn=s.unstable_now,gc=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,Pt=s.unstable_UserBlockingPriority,Ci=s.unstable_NormalPriority,cd=s.unstable_LowPriority,ll=s.unstable_IdlePriority,hd=s.log,ps=s.unstable_setDisableYieldValue,ur=null,Yt=null;function Cn(n){if(typeof hd=="function"&&ps(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ur,n)}catch{}}var nn=Math.clz32?Math.clz32:_c,fd=Math.log,yc=Math.LN2;function _c(n){return n>>>=0,n===0?32:31-(fd(n)/yc|0)|0}var ni=256,cr=4194304;function Hn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Dn(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=Hn(u):(E&=A,E!==0?f=Hn(E):o||(o=A&~n,o!==0&&(f=Hn(o))))):(A=u&~m,A!==0?f=Hn(A):E!==0?f=Hn(E):o||(o=u&~n,o!==0&&(f=Hn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function hr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Ca(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var n=ni;return ni<<=1,(ni&4194048)===0&&(ni=256),n}function fr(){var n=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),n}function Da(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function yt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function vc(n,r,o,u,f,m){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,R=n.expirationTimes,z=n.hiddenUpdates;for(o=E&~o;0<o;){var X=31-nn(o),J=1<<X;A[X]=0,R[X]=-1;var q=z[X];if(q!==null)for(z[X]=null,X=0;X<q.length;X++){var j=q[X];j!==null&&(j.lane&=-536870913)}o&=~J}u!==0&&dr(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~r))}function dr(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-nn(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function mr(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-nn(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function cl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function hl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Di(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:RE(n.type))}function dd(n,r){var o=ue.p;try{return ue.p=n,r()}finally{ue.p=o}}var ii=Math.random().toString(36).slice(2),_t="__reactFiber$"+ii,Ft="__reactProps$"+ii,Ni="__reactContainer$"+ii,gs="__reactEvents$"+ii,ys="__reactListeners$"+ii,md="__reactHandles$"+ii,Gn="__reactResources$"+ii,pr="__reactMarker$"+ii;function Na(n){delete n[_t],delete n[Ft],delete n[gs],delete n[ys],delete n[md]}function ri(n){var r=n[_t];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Ni]||o[_t]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=fE(n);n!==null;){if(o=n[_t])return o;n=fE(n)}return r}n=o,o=n.parentNode}return null}function si(n){if(n=n[_t]||n[Ni]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function gr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function yr(n){var r=n[Gn];return r||(r=n[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(n){n[pr]=!0}var Ec=new Set,_s={};function ai(n,r){oi(n,r),oi(n+"Capture",r)}function oi(n,r){for(_s[n]=r,n=0;n<r.length;n++)Ec.add(r[n])}var vs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),li={},Va={};function pd(n){return Ia.call(Va,n)?!0:Ia.call(li,n)?!1:vs.test(n)?Va[n]=!0:(li[n]=!0,!1)}function Es(n,r,o){if(pd(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Ts(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Nn(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var As,xa;function Vi(n){if(As===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);As=r&&r[1]||"",xa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+n+xa}var Oa=!1;function Ma(n,r){if(!n||Oa)return"";Oa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(j){var q=j}Reflect.construct(n,[],J)}else{try{J.call()}catch(j){q=j}n.call(J.prototype)}}else{try{throw Error()}catch(j){q=j}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(j){if(j&&q&&typeof j.stack=="string")return[j.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],A=m[1];if(E&&A){var R=E.split(`
`),z=A.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===z.length)for(u=R.length-1,f=z.length-1;1<=u&&0<=f&&R[u]!==z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==z[f]){var X=`
`+R[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{Oa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Vi(o):""}function gd(n){switch(n.tag){case 26:case 27:case 5:return Vi(n.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return Vi("Activity");default:return""}}function Kn(n){try{var r="";do r+=gd(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ut(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _r(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ss(n){var r=_r(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function vr(n){n._valueTracker||(n._valueTracker=Ss(n))}function Ze(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=_r(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function xi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var bs=/[\n"\\]/g;function kt(n){return n.replace(bs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function fl(n,r,o,u,f,m,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ut(r)):n.value!==""+ut(r)&&(n.value=""+ut(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?ml(n,E,ut(r)):o!=null?ml(n,E,ut(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+ut(A):n.removeAttribute("name")}function dl(n,r,o,u,f,m,E,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+ut(o):"",r=r!=null?""+ut(r):o,A||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function ml(n,r,o){r==="number"&&xi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Er(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ut(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Tc(n,r,o){if(r!=null&&(r=""+ut(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+ut(o):""}function Ac(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(st(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=ut(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Vn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Oi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Oi.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function gl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&pl(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&pl(n,m,r[m])}function Pa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qn(n){return bc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var yl=null;function _l(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tr=null,rn=null;function wc(n){var r=si(n);if(r&&(n=r.stateNode)){var o=n[Ft]||null;e:switch(n=r.stateNode,r.type){case"input":if(fl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+kt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Ft]||null;if(!f)throw Error(i(90));fl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Ze(u)}break e;case"textarea":Tc(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Er(n,!!o.multiple,r,!1)}}}var ws=!1;function Is(n,r,o){if(ws)return n(r,o);ws=!0;try{var u=n(r);return u}finally{if(ws=!1,(Tr!==null||rn!==null)&&(mh(),Tr&&(r=Tr,n=rn,rn=Tr=null,wc(r),n)))for(r=0;r<n.length;r++)wc(n[r])}}function Ar(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Ft]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=!1;if(sn)try{var Sr={};Object.defineProperty(Sr,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",Sr,Sr),window.removeEventListener("test",Sr,Sr)}catch{Mi=!1}var xn=null,nt=null,ka=null;function Ic(){if(ka)return ka;var n,r=nt,o=r.length,u,f="value"in xn?xn.value:xn.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&r[o-u]===f[m-u];u++);return ka=f.slice(n,1<u?1-u:void 0)}function Rs(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Cs(){return!0}function vl(){return!1}function Dt(n){function r(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Cs:vl,this.isPropagationStopped=vl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),r}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Dt(Xt),Ns=_({},Xt,{view:0,detail:0}),Vs=Dt(Ns),La,xs,ui,Os=_({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:za,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(La=n.screenX-ui.screenX,xs=n.screenY-ui.screenY):xs=La=0,ui=n),La)},movementY:function(n){return"movementY"in n?n.movementY:xs}}),Ms=Dt(Os),yd=_({},Os,{dataTransfer:0}),Rc=Dt(yd),Ps=_({},Ns,{relatedTarget:0}),Ua=Dt(Ps),Cc=_({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),El=Dt(Cc),Tl=_({},Xt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dc=Dt(Tl),Ba=_({},Xt,{data:0}),Al=Dt(Ba),Nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Vc[n])?!!r[n]:!1}function za(){return xc}var Oc=_({},Ns,{key:function(n){if(n.key){var r=Nc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Rs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pi[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:za,charCode:function(n){return n.type==="keypress"?Rs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qa=Dt(Oc),an=_({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Dt(an),Mc=_({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:za}),br=Dt(Mc),h=_({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Dt(h),v=_({},Os,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Dt(v),B=_({},Xt,{newState:0,oldState:0}),G=Dt(B),re=[9,13,27,32],Re=sn&&"CompositionEvent"in window,rt=null;sn&&"documentMode"in document&&(rt=document.documentMode);var He=sn&&"TextEvent"in window&&!rt,Et=sn&&(!Re||rt&&8<rt&&11>=rt),yn=" ",ci=!1;function Yn(n,r){switch(n){case"keyup":return re.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xn(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $n=!1;function bl(n,r){switch(n){case"compositionend":return Xn(r);case"keypress":return r.which!==32?null:(ci=!0,yn);case"textInput":return n=r.data,n===yn&&ci?null:n;default:return null}}function yw(n,r){if($n)return n==="compositionend"||!Re&&Yn(n,r)?(n=Ic(),ka=nt=xn=null,$n=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Et&&r.locale!=="ko"?null:r.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_w[n.type]:r==="textarea"}function Ay(n,r,o,u){Tr?rn?rn.push(u):rn=[u]:Tr=u,r=Eh(r,"onChange"),0<r.length&&(o=new Ds("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var wl=null,Il=null;function vw(n){nE(n,0)}function Pc(n){var r=gr(n);if(Ze(r))return n}function Sy(n,r){if(n==="change")return r}var by=!1;if(sn){var _d;if(sn){var vd="oninput"in document;if(!vd){var wy=document.createElement("div");wy.setAttribute("oninput","return;"),vd=typeof wy.oninput=="function"}_d=vd}else _d=!1;by=_d&&(!document.documentMode||9<document.documentMode)}function Iy(){wl&&(wl.detachEvent("onpropertychange",Ry),Il=wl=null)}function Ry(n){if(n.propertyName==="value"&&Pc(Il)){var r=[];Ay(r,Il,n,_l(n)),Is(vw,r)}}function Ew(n,r,o){n==="focusin"?(Iy(),wl=r,Il=o,wl.attachEvent("onpropertychange",Ry)):n==="focusout"&&Iy()}function Tw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pc(Il)}function Aw(n,r){if(n==="click")return Pc(r)}function Sw(n,r){if(n==="input"||n==="change")return Pc(r)}function bw(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var _n=typeof Object.is=="function"?Object.is:bw;function Rl(n,r){if(_n(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ia.call(r,f)||!_n(n[f],r[f]))return!1}return!0}function Cy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dy(n,r){var o=Cy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cy(o)}}function Ny(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Ny(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Vy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=xi(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=xi(n.document)}return r}function Ed(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var ww=sn&&"documentMode"in document&&11>=document.documentMode,Fa=null,Td=null,Cl=null,Ad=!1;function xy(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ad||Fa==null||Fa!==xi(u)||(u=Fa,"selectionStart"in u&&Ed(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Cl&&Rl(Cl,u)||(Cl=u,u=Eh(Td,"onSelect"),0<u.length&&(r=new Ds("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Fa)))}function ks(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var ja={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Sd={},Oy={};sn&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Ls(n){if(Sd[n])return Sd[n];if(!ja[n])return n;var r=ja[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Oy)return Sd[n]=r[o];return n}var My=Ls("animationend"),Py=Ls("animationiteration"),ky=Ls("animationstart"),Iw=Ls("transitionrun"),Rw=Ls("transitionstart"),Cw=Ls("transitioncancel"),Ly=Ls("transitionend"),Uy=new Map,bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bd.push("scrollEnd");function Zn(n,r){Uy.set(n,r),ai(r,[n])}var By=new WeakMap;function On(n,r){if(typeof n=="object"&&n!==null){var o=By.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Kn(r)},By.set(n,r),r)}return{value:n,source:r,stack:Kn(r)}}var Mn=[],Ha=0,wd=0;function kc(){for(var n=Ha,r=wd=Ha=0;r<n;){var o=Mn[r];Mn[r++]=null;var u=Mn[r];Mn[r++]=null;var f=Mn[r];Mn[r++]=null;var m=Mn[r];if(Mn[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&zy(o,f,m)}}function Lc(n,r,o,u){Mn[Ha++]=n,Mn[Ha++]=r,Mn[Ha++]=o,Mn[Ha++]=u,wd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Id(n,r,o,u){return Lc(n,r,o,u),Uc(n)}function Ga(n,r){return Lc(n,null,null,r),Uc(n)}function zy(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-nn(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function Uc(n){if(50<Wl)throw Wl=0,xm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ka={};function Dw(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,r,o,u){return new Dw(n,r,o,u)}function Rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ki(n,r){var o=n.alternate;return o===null?(o=vn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function qy(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Bc(n,r,o,u,f,m){var E=0;if(u=n,typeof n=="function")Rd(n)&&(E=1);else if(typeof n=="string")E=VI(n,o,pe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=vn(31,o,r,f),n.elementType=I,n.lanes=m,n;case H:return Us(o.children,f,m,r);case K:E=8,f|=24;break;case F:return n=vn(12,o,r,f|2),n.elementType=F,n.lanes=m,n;case oe:return n=vn(13,o,r,f),n.elementType=oe,n.lanes=m,n;case _e:return n=vn(19,o,r,f),n.elementType=_e,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:case ne:E=10;break e;case W:E=9;break e;case ve:E=11;break e;case D:E=14;break e;case w:E=16,u=null;break e}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=vn(E,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function Us(n,r,o,u){return n=vn(7,n,u,r),n.lanes=o,n}function Cd(n,r,o){return n=vn(6,n,null,r),n.lanes=o,n}function Dd(n,r,o){return r=vn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Qa=[],Ya=0,zc=null,qc=0,Pn=[],kn=0,Bs=null,Li=1,Ui="";function zs(n,r){Qa[Ya++]=qc,Qa[Ya++]=zc,zc=n,qc=r}function Fy(n,r,o){Pn[kn++]=Li,Pn[kn++]=Ui,Pn[kn++]=Bs,Bs=n;var u=Li;n=Ui;var f=32-nn(u)-1;u&=~(1<<f),o+=1;var m=32-nn(r)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Li=1<<32-nn(r)+f|o<<f|u,Ui=m+n}else Li=1<<m|o<<f|u,Ui=n}function Nd(n){n.return!==null&&(zs(n,1),Fy(n,1,0))}function Vd(n){for(;n===zc;)zc=Qa[--Ya],Qa[Ya]=null,qc=Qa[--Ya],Qa[Ya]=null;for(;n===Bs;)Bs=Pn[--kn],Pn[kn]=null,Ui=Pn[--kn],Pn[kn]=null,Li=Pn[--kn],Pn[kn]=null}var on=null,mt=null,Fe=!1,qs=null,hi=!1,xd=Error(i(519));function Fs(n){var r=Error(i(418,""));throw Vl(On(r,n)),xd}function jy(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[_t]=n,r[Ft]=u,o){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(o=0;o<tu.length;o++)Oe(tu[o],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),dl(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vr(r);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ac(r,u.value,u.defaultValue,u.children),vr(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||aE(r.textContent,o)?(u.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),u.onScroll!=null&&Oe("scroll",r),u.onScrollEnd!=null&&Oe("scrollend",r),u.onClick!=null&&(r.onclick=Th),r=!0):r=!1,r||Fs(n)}function Hy(n){for(on=n.return;on;)switch(on.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:on=on.return}}function Dl(n){if(n!==on)return!1;if(!Fe)return Hy(n),Fe=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ym(n.type,n.memoizedProps)),o=!o),o&&mt&&Fs(n),Hy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){mt=Wn(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}mt=null}}else r===27?(r=mt,zr(n.type)?(n=Jm,Jm=null,mt=n):mt=r):mt=on?Wn(n.stateNode.nextSibling):null;return!0}function Nl(){mt=on=null,Fe=!1}function Gy(){var n=qs;return n!==null&&(mn===null?mn=n:mn.push.apply(mn,n),qs=null),n}function Vl(n){qs===null?qs=[n]:qs.push(n)}var Od=ee(null),js=null,Bi=null;function wr(n,r,o){le(Od,r._currentValue),r._currentValue=o}function zi(n){n._currentValue=Od.current,ce(Od)}function Md(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Pd(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var R=0;R<r.length;R++)if(A.context===r[R]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),Md(m.return,o,n),u||(E=null);break e}m=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),Md(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function xl(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var A=f.type;_n(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===qt.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ou):n=[ou])}f=f.return}n!==null&&Pd(r,n,o,u),r.flags|=262144}function Fc(n){for(n=n.firstContext;n!==null;){if(!_n(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hs(n){js=n,Bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $t(n){return Ky(js,n)}function jc(n,r){return js===null&&Hs(n),Ky(n,r)}function Ky(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Bi===null){if(n===null)throw Error(i(308));Bi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Bi=Bi.next=r;return o}var Nw=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},Vw=s.unstable_scheduleCallback,xw=s.unstable_NormalPriority,Nt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new Nw,data:new Map,refCount:0}}function Ol(n){n.refCount--,n.refCount===0&&Vw(xw,function(){n.controller.abort()})}var Ml=null,Ld=0,Xa=0,$a=null;function Ow(n,r){if(Ml===null){var o=Ml=[];Ld=0,Xa=Bm(),$a={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Ld++,r.then(Qy,Qy),r}function Qy(){if(--Ld===0&&Ml!==null){$a!==null&&($a.status="fulfilled");var n=Ml;Ml=null,Xa=0,$a=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Mw(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Yy=Y.S;Y.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ow(n,r),Yy!==null&&Yy(n,r)};var Gs=ee(null);function Ud(){var n=Gs.current;return n!==null?n:it.pooledCache}function Hc(n,r){r===null?le(Gs,Gs.current):le(Gs,r.pool)}function Xy(){var n=Ud();return n===null?null:{parent:Nt._currentValue,pool:n}}var Pl=Error(i(460)),$y=Error(i(474)),Gc=Error(i(542)),Bd={then:function(){}};function Zy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Kc(){}function Jy(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Kc,Kc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,e_(n),n;default:if(typeof r.status=="string")r.then(Kc,Kc);else{if(n=it,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,e_(n),n}throw kl=r,Pl}}var kl=null;function Wy(){if(kl===null)throw Error(i(459));var n=kl;return kl=null,n}function e_(n){if(n===Pl||n===Gc)throw Error(i(483))}var Ir=!1;function zd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Rr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Cr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Uc(n),zy(n,null,o),r}return Lc(n,u,r,o),Uc(n)}function Ll(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,mr(n,o)}}function Fd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var jd=!1;function Ul(){if(jd){var n=$a;if(n!==null)throw n}}function Bl(n,r,o,u){jd=!1;var f=n.updateQueue;Ir=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var R=A,z=R.next;R.next=null,E===null?m=z:E.next=z,E=R;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==E&&(A===null?X.firstBaseUpdate=z:A.next=z,X.lastBaseUpdate=R))}if(m!==null){var J=f.baseState;E=0,X=z=R=null,A=m;do{var q=A.lane&-536870913,j=q!==A.lane;if(j?(Ue&q)===q:(u&q)===q){q!==0&&q===Xa&&(jd=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=n,Ee=A;q=r;var et=o;switch(Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){J=Se.call(et,J,q);break e}J=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,q=typeof Se=="function"?Se.call(et,J,q):Se,q==null)break e;J=_({},J,q);break e;case 2:Ir=!0}}q=A.callback,q!==null&&(n.flags|=64,j&&(n.flags|=8192),j=f.callbacks,j===null?f.callbacks=[q]:j.push(q))}else j={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(z=X=j,R=J):X=X.next=j,E|=q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;j=A,A=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);X===null&&(R=J),f.baseState=R,f.firstBaseUpdate=z,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),kr|=E,n.lanes=E,n.memoizedState=J}}function t_(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function n_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)t_(o[n],r)}var Za=ee(null),Qc=ee(0);function i_(n,r){n=Qi,le(Qc,n),le(Za,r),Qi=n|r.baseLanes}function Hd(){le(Qc,Qi),le(Za,Za.current)}function Gd(){Qi=Qc.current,ce(Za),ce(Qc)}var Dr=0,De=null,Je=null,St=null,Yc=!1,Ja=!1,Ks=!1,Xc=0,zl=0,Wa=null,Pw=0;function Tt(){throw Error(i(321))}function Kd(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!_n(n[o],r[o]))return!1;return!0}function Qd(n,r,o,u,f,m){return Dr=m,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=n===null||n.memoizedState===null?z_:q_,Ks=!1,m=o(u,f),Ks=!1,Ja&&(m=s_(r,o,u,f)),r_(n),m}function r_(n){Y.H=th;var r=Je!==null&&Je.next!==null;if(Dr=0,St=Je=De=null,Yc=!1,zl=0,Wa=null,r)throw Error(i(300));n===null||Lt||(n=n.dependencies,n!==null&&Fc(n)&&(Lt=!0))}function s_(n,r,o,u){De=n;var f=0;do{if(Ja&&(Wa=null),zl=0,Ja=!1,25<=f)throw Error(i(301));if(f+=1,St=Je=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Fw,m=r(o,u)}while(Ja);return m}function kw(){var n=Y.H,r=n.useState()[0];return r=typeof r.then=="function"?ql(r):r,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(De.flags|=1024),r}function Yd(){var n=Xc!==0;return Xc=0,n}function Xd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function $d(n){if(Yc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Yc=!1}Dr=0,St=Je=De=null,Ja=!1,zl=Xc=0,Wa=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?De.memoizedState=St=n:St=St.next=n,St}function bt(){if(Je===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=St===null?De.memoizedState:St.next;if(r!==null)St=r,Je=n;else{if(n===null)throw De.alternate===null?Error(i(467)):Error(i(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},St===null?De.memoizedState=St=n:St=St.next=n}return St}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(n){var r=zl;return zl+=1,Wa===null&&(Wa=[]),n=Jy(Wa,n,r),r=De,(St===null?r.memoizedState:St.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?z_:q_),n}function $c(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ql(n);if(n.$$typeof===ne)return $t(n)}throw Error(i(438,String(n)))}function Jd(n){var r=null,o=De.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Zd(),De.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=M;return r.index++,o}function qi(n,r){return typeof r=="function"?r(n):r}function Zc(n){var r=bt();return Wd(r,Je,n)}function Wd(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var A=E=null,R=null,z=r,X=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(Ue&J)===J:(Dr&J)===J){var q=z.revertLane;if(q===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===Xa&&(X=!0);else if((Dr&q)===q){z=z.next,q===Xa&&(X=!0);continue}else J={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=J,E=m):R=R.next=J,De.lanes|=q,kr|=q;J=z.action,Ks&&o(m,J),m=z.hasEagerState?z.eagerState:o(m,J)}else q={lane:J,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=q,E=m):R=R.next=q,De.lanes|=J,kr|=J;z=z.next}while(z!==null&&z!==r);if(R===null?E=m:R.next=A,!_n(m,n.memoizedState)&&(Lt=!0,X&&(o=$a,o!==null)))throw o;n.memoizedState=m,n.baseState=E,n.baseQueue=R,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function em(n){var r=bt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);_n(m,r.memoizedState)||(Lt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function a_(n,r,o){var u=De,f=bt(),m=Fe;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var E=!_n((Je||f).memoizedState,o);E&&(f.memoizedState=o,Lt=!0),f=f.queue;var A=u_.bind(null,u,f,n);if(Fl(2048,8,A,[n]),f.getSnapshot!==r||E||St!==null&&St.memoizedState.tag&1){if(u.flags|=2048,eo(9,Jc(),l_.bind(null,u,f,o,r),null),it===null)throw Error(i(349));m||(Dr&124)!==0||o_(u,r,o)}return o}function o_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=De.updateQueue,r===null?(r=Zd(),De.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function l_(n,r,o,u){r.value=o,r.getSnapshot=u,c_(r)&&h_(n)}function u_(n,r,o){return o(function(){c_(r)&&h_(n)})}function c_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!_n(n,o)}catch{return!0}}function h_(n){var r=Ga(n,2);r!==null&&bn(r,n,2)}function tm(n){var r=fn();if(typeof n=="function"){var o=n;if(n=o(),Ks){Cn(!0);try{o()}finally{Cn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},r}function f_(n,r,o,u){return n.baseState=o,Wd(n,Je,typeof u=="function"?u:qi)}function Lw(n,r,o,u,f){if(eh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,d_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function d_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=Y.T,E={};Y.T=E;try{var A=o(f,u),R=Y.S;R!==null&&R(E,A),m_(n,r,A)}catch(z){nm(n,r,z)}finally{Y.T=m}}else try{m=o(f,u),m_(n,r,m)}catch(z){nm(n,r,z)}}function m_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){p_(n,r,u)},function(u){return nm(n,r,u)}):p_(n,r,o)}function p_(n,r,o){r.status="fulfilled",r.value=o,g_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,d_(n,o)))}function nm(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,g_(r),r=r.next;while(r!==u)}n.action=null}function g_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function y_(n,r){return r}function __(n,r){if(Fe){var o=it.formState;if(o!==null){e:{var u=De;if(Fe){if(mt){t:{for(var f=mt,m=hi;f.nodeType!==8;){if(!m){f=null;break t}if(f=Wn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){mt=Wn(f.nextSibling),u=f.data==="F!";break e}}Fs(u)}u=!1}u&&(r=o[0])}}return o=fn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:r},o.queue=u,o=L_.bind(null,De,u),u.dispatch=o,u=tm(!1),m=om.bind(null,De,!1,u.queue),u=fn(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=Lw.bind(null,De,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function v_(n){var r=bt();return E_(r,Je,n)}function E_(n,r,o){if(r=Wd(n,r,y_)[0],n=Zc(qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=ql(r)}catch(E){throw E===Pl?Gc:E}else u=r;r=bt();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(De.flags|=2048,eo(9,Jc(),Uw.bind(null,f,o),null)),[u,m,n]}function Uw(n,r){n.action=r}function T_(n){var r=bt(),o=Je;if(o!==null)return E_(r,o,n);bt(),r=r.memoizedState,o=bt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function eo(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=De.updateQueue,r===null&&(r=Zd(),De.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function Jc(){return{destroy:void 0,resource:void 0}}function A_(){return bt().memoizedState}function Wc(n,r,o,u){var f=fn();u=u===void 0?null:u,De.flags|=n,f.memoizedState=eo(1|r,Jc(),o,u)}function Fl(n,r,o,u){var f=bt();u=u===void 0?null:u;var m=f.memoizedState.inst;Je!==null&&u!==null&&Kd(u,Je.memoizedState.deps)?f.memoizedState=eo(r,m,o,u):(De.flags|=n,f.memoizedState=eo(1|r,m,o,u))}function S_(n,r){Wc(8390656,8,n,r)}function b_(n,r){Fl(2048,8,n,r)}function w_(n,r){return Fl(4,2,n,r)}function I_(n,r){return Fl(4,4,n,r)}function R_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function C_(n,r,o){o=o!=null?o.concat([n]):null,Fl(4,4,R_.bind(null,r,n),o)}function im(){}function D_(n,r){var o=bt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Kd(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function N_(n,r){var o=bt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Kd(r,u[1]))return u[0];if(u=n(),Ks){Cn(!0);try{n()}finally{Cn(!1)}}return o.memoizedState=[u,r],u}function rm(n,r,o){return o===void 0||(Dr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=Ov(),De.lanes|=n,kr|=n,o)}function V_(n,r,o,u){return _n(o,r)?o:Za.current!==null?(n=rm(n,o,u),_n(n,r)||(Lt=!0),n):(Dr&42)===0?(Lt=!0,n.memoizedState=o):(n=Ov(),De.lanes|=n,kr|=n,r)}function x_(n,r,o,u,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var E=Y.T,A={};Y.T=A,om(n,!1,r,o);try{var R=f(),z=Y.S;if(z!==null&&z(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=Mw(R,u);jl(n,r,X,Sn(n))}else jl(n,r,u,Sn(n))}catch(J){jl(n,r,{then:function(){},status:"rejected",reason:J},Sn())}finally{ue.p=m,Y.T=E}}function Bw(){}function sm(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=O_(n).queue;x_(n,f,r,ge,o===null?Bw:function(){return M_(n),o(u)})}function O_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:ge},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function M_(n){var r=O_(n).next.queue;jl(n,r,{},Sn())}function am(){return $t(ou)}function P_(){return bt().memoizedState}function k_(){return bt().memoizedState}function zw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Sn();n=Rr(o);var u=Cr(r,n,o);u!==null&&(bn(u,r,o),Ll(u,r,o)),r={cache:kd()},n.payload=r;return}r=r.return}}function qw(n,r,o){var u=Sn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},eh(n)?U_(r,o):(o=Id(n,r,o,u),o!==null&&(bn(o,n,u),B_(o,r,u)))}function L_(n,r,o){var u=Sn();jl(n,r,o,u)}function jl(n,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(eh(n))U_(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,A=m(E,o);if(f.hasEagerState=!0,f.eagerState=A,_n(A,E))return Lc(n,r,f,0),it===null&&kc(),!1}catch{}finally{}if(o=Id(n,r,f,u),o!==null)return bn(o,n,u),B_(o,r,u),!0}return!1}function om(n,r,o,u){if(u={lane:2,revertLane:Bm(),action:u,hasEagerState:!1,eagerState:null,next:null},eh(n)){if(r)throw Error(i(479))}else r=Id(n,o,u,2),r!==null&&bn(r,n,2)}function eh(n){var r=n.alternate;return n===De||r!==null&&r===De}function U_(n,r){Ja=Yc=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function B_(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,mr(n,o)}}var th={readContext:$t,use:$c,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},z_={readContext:$t,use:$c,useCallback:function(n,r){return fn().memoizedState=[n,r===void 0?null:r],n},useContext:$t,useEffect:S_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Wc(4194308,4,R_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Wc(4194308,4,n,r)},useInsertionEffect:function(n,r){Wc(4,2,n,r)},useMemo:function(n,r){var o=fn();r=r===void 0?null:r;var u=n();if(Ks){Cn(!0);try{n()}finally{Cn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=fn();if(o!==void 0){var f=o(r);if(Ks){Cn(!0);try{o(r)}finally{Cn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=qw.bind(null,De,n),[u.memoizedState,n]},useRef:function(n){var r=fn();return n={current:n},r.memoizedState=n},useState:function(n){n=tm(n);var r=n.queue,o=L_.bind(null,De,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:im,useDeferredValue:function(n,r){var o=fn();return rm(o,n,r)},useTransition:function(){var n=tm(!1);return n=x_.bind(null,De,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=De,f=fn();if(Fe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),it===null)throw Error(i(349));(Ue&124)!==0||o_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,S_(u_.bind(null,u,m,n),[n]),u.flags|=2048,eo(9,Jc(),l_.bind(null,u,m,o,r),null),o},useId:function(){var n=fn(),r=it.identifierPrefix;if(Fe){var o=Ui,u=Li;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,r="«"+r+"R"+o,o=Xc++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=Pw++,r="«"+r+"r"+o.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:am,useFormState:__,useActionState:__,useOptimistic:function(n){var r=fn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=om.bind(null,De,!0,o),o.dispatch=r,[n,r]},useMemoCache:Jd,useCacheRefresh:function(){return fn().memoizedState=zw.bind(null,De)}},q_={readContext:$t,use:$c,useCallback:D_,useContext:$t,useEffect:b_,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:I_,useMemo:N_,useReducer:Zc,useRef:A_,useState:function(){return Zc(qi)},useDebugValue:im,useDeferredValue:function(n,r){var o=bt();return V_(o,Je.memoizedState,n,r)},useTransition:function(){var n=Zc(qi)[0],r=bt().memoizedState;return[typeof n=="boolean"?n:ql(n),r]},useSyncExternalStore:a_,useId:P_,useHostTransitionStatus:am,useFormState:v_,useActionState:v_,useOptimistic:function(n,r){var o=bt();return f_(o,Je,n,r)},useMemoCache:Jd,useCacheRefresh:k_},Fw={readContext:$t,use:$c,useCallback:D_,useContext:$t,useEffect:b_,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:I_,useMemo:N_,useReducer:em,useRef:A_,useState:function(){return em(qi)},useDebugValue:im,useDeferredValue:function(n,r){var o=bt();return Je===null?rm(o,n,r):V_(o,Je.memoizedState,n,r)},useTransition:function(){var n=em(qi)[0],r=bt().memoizedState;return[typeof n=="boolean"?n:ql(n),r]},useSyncExternalStore:a_,useId:P_,useHostTransitionStatus:am,useFormState:T_,useActionState:T_,useOptimistic:function(n,r){var o=bt();return Je!==null?f_(o,Je,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:k_},to=null,Hl=0;function nh(n){var r=Hl;return Hl+=1,to===null&&(to=[]),Jy(to,n,r)}function Gl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ih(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function F_(n){var r=n._init;return r(n._payload)}function j_(n){function r(P,x){if(n){var U=P.deletions;U===null?(P.deletions=[x],P.flags|=16):U.push(x)}}function o(P,x){if(!n)return null;for(;x!==null;)r(P,x),x=x.sibling;return null}function u(P){for(var x=new Map;P!==null;)P.key!==null?x.set(P.key,P):x.set(P.index,P),P=P.sibling;return x}function f(P,x){return P=ki(P,x),P.index=0,P.sibling=null,P}function m(P,x,U){return P.index=U,n?(U=P.alternate,U!==null?(U=U.index,U<x?(P.flags|=67108866,x):U):(P.flags|=67108866,x)):(P.flags|=1048576,x)}function E(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function A(P,x,U,Z){return x===null||x.tag!==6?(x=Cd(U,P.mode,Z),x.return=P,x):(x=f(x,U),x.return=P,x)}function R(P,x,U,Z){var he=U.type;return he===H?X(P,x,U.props.children,Z,U.key):x!==null&&(x.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===w&&F_(he)===x.type)?(x=f(x,U.props),Gl(x,U),x.return=P,x):(x=Bc(U.type,U.key,U.props,null,P.mode,Z),Gl(x,U),x.return=P,x)}function z(P,x,U,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=Dd(U,P.mode,Z),x.return=P,x):(x=f(x,U.children||[]),x.return=P,x)}function X(P,x,U,Z,he){return x===null||x.tag!==7?(x=Us(U,P.mode,Z,he),x.return=P,x):(x=f(x,U),x.return=P,x)}function J(P,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Cd(""+x,P.mode,U),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case b:return U=Bc(x.type,x.key,x.props,null,P.mode,U),Gl(U,x),U.return=P,U;case O:return x=Dd(x,P.mode,U),x.return=P,x;case w:var Z=x._init;return x=Z(x._payload),J(P,x,U)}if(st(x)||k(x))return x=Us(x,P.mode,U,null),x.return=P,x;if(typeof x.then=="function")return J(P,nh(x),U);if(x.$$typeof===ne)return J(P,jc(P,x),U);ih(P,x)}return null}function q(P,x,U,Z){var he=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return he!==null?null:A(P,x,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===he?R(P,x,U,Z):null;case O:return U.key===he?z(P,x,U,Z):null;case w:return he=U._init,U=he(U._payload),q(P,x,U,Z)}if(st(U)||k(U))return he!==null?null:X(P,x,U,Z,null);if(typeof U.then=="function")return q(P,x,nh(U),Z);if(U.$$typeof===ne)return q(P,x,jc(P,U),Z);ih(P,U)}return null}function j(P,x,U,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return P=P.get(U)||null,A(x,P,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return P=P.get(Z.key===null?U:Z.key)||null,R(x,P,Z,he);case O:return P=P.get(Z.key===null?U:Z.key)||null,z(x,P,Z,he);case w:var Ve=Z._init;return Z=Ve(Z._payload),j(P,x,U,Z,he)}if(st(Z)||k(Z))return P=P.get(U)||null,X(x,P,Z,he,null);if(typeof Z.then=="function")return j(P,x,U,nh(Z),he);if(Z.$$typeof===ne)return j(P,x,U,jc(x,Z),he);ih(x,Z)}return null}function Se(P,x,U,Z){for(var he=null,Ve=null,me=x,Te=x=0,Bt=null;me!==null&&Te<U.length;Te++){me.index>Te?(Bt=me,me=null):Bt=me.sibling;var qe=q(P,me,U[Te],Z);if(qe===null){me===null&&(me=Bt);break}n&&me&&qe.alternate===null&&r(P,me),x=m(qe,x,Te),Ve===null?he=qe:Ve.sibling=qe,Ve=qe,me=Bt}if(Te===U.length)return o(P,me),Fe&&zs(P,Te),he;if(me===null){for(;Te<U.length;Te++)me=J(P,U[Te],Z),me!==null&&(x=m(me,x,Te),Ve===null?he=me:Ve.sibling=me,Ve=me);return Fe&&zs(P,Te),he}for(me=u(me);Te<U.length;Te++)Bt=j(me,P,Te,U[Te],Z),Bt!==null&&(n&&Bt.alternate!==null&&me.delete(Bt.key===null?Te:Bt.key),x=m(Bt,x,Te),Ve===null?he=Bt:Ve.sibling=Bt,Ve=Bt);return n&&me.forEach(function(Gr){return r(P,Gr)}),Fe&&zs(P,Te),he}function Ee(P,x,U,Z){if(U==null)throw Error(i(151));for(var he=null,Ve=null,me=x,Te=x=0,Bt=null,qe=U.next();me!==null&&!qe.done;Te++,qe=U.next()){me.index>Te?(Bt=me,me=null):Bt=me.sibling;var Gr=q(P,me,qe.value,Z);if(Gr===null){me===null&&(me=Bt);break}n&&me&&Gr.alternate===null&&r(P,me),x=m(Gr,x,Te),Ve===null?he=Gr:Ve.sibling=Gr,Ve=Gr,me=Bt}if(qe.done)return o(P,me),Fe&&zs(P,Te),he;if(me===null){for(;!qe.done;Te++,qe=U.next())qe=J(P,qe.value,Z),qe!==null&&(x=m(qe,x,Te),Ve===null?he=qe:Ve.sibling=qe,Ve=qe);return Fe&&zs(P,Te),he}for(me=u(me);!qe.done;Te++,qe=U.next())qe=j(me,P,Te,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&me.delete(qe.key===null?Te:qe.key),x=m(qe,x,Te),Ve===null?he=qe:Ve.sibling=qe,Ve=qe);return n&&me.forEach(function(jI){return r(P,jI)}),Fe&&zs(P,Te),he}function et(P,x,U,Z){if(typeof U=="object"&&U!==null&&U.type===H&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:e:{for(var he=U.key;x!==null;){if(x.key===he){if(he=U.type,he===H){if(x.tag===7){o(P,x.sibling),Z=f(x,U.props.children),Z.return=P,P=Z;break e}}else if(x.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===w&&F_(he)===x.type){o(P,x.sibling),Z=f(x,U.props),Gl(Z,U),Z.return=P,P=Z;break e}o(P,x);break}else r(P,x);x=x.sibling}U.type===H?(Z=Us(U.props.children,P.mode,Z,U.key),Z.return=P,P=Z):(Z=Bc(U.type,U.key,U.props,null,P.mode,Z),Gl(Z,U),Z.return=P,P=Z)}return E(P);case O:e:{for(he=U.key;x!==null;){if(x.key===he)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){o(P,x.sibling),Z=f(x,U.children||[]),Z.return=P,P=Z;break e}else{o(P,x);break}else r(P,x);x=x.sibling}Z=Dd(U,P.mode,Z),Z.return=P,P=Z}return E(P);case w:return he=U._init,U=he(U._payload),et(P,x,U,Z)}if(st(U))return Se(P,x,U,Z);if(k(U)){if(he=k(U),typeof he!="function")throw Error(i(150));return U=he.call(U),Ee(P,x,U,Z)}if(typeof U.then=="function")return et(P,x,nh(U),Z);if(U.$$typeof===ne)return et(P,x,jc(P,U),Z);ih(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(o(P,x.sibling),Z=f(x,U),Z.return=P,P=Z):(o(P,x),Z=Cd(U,P.mode,Z),Z.return=P,P=Z),E(P)):o(P,x)}return function(P,x,U,Z){try{Hl=0;var he=et(P,x,U,Z);return to=null,he}catch(me){if(me===Pl||me===Gc)throw me;var Ve=vn(29,me,null,P.mode);return Ve.lanes=Z,Ve.return=P,Ve}finally{}}}var no=j_(!0),H_=j_(!1),Ln=ee(null),fi=null;function Nr(n){var r=n.alternate;le(Vt,Vt.current&1),le(Ln,n),fi===null&&(r===null||Za.current!==null||r.memoizedState!==null)&&(fi=n)}function G_(n){if(n.tag===22){if(le(Vt,Vt.current),le(Ln,n),fi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(fi=n)}}else Vr()}function Vr(){le(Vt,Vt.current),le(Ln,Ln.current)}function Fi(n){ce(Ln),fi===n&&(fi=null),ce(Vt)}var Vt=ee(0);function rh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Zm(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function lm(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:_({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var um={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Sn(),f=Rr(u);f.payload=r,o!=null&&(f.callback=o),r=Cr(n,f,u),r!==null&&(bn(r,n,u),Ll(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Sn(),f=Rr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Cr(n,f,u),r!==null&&(bn(r,n,u),Ll(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Sn(),u=Rr(o);u.tag=2,r!=null&&(u.callback=r),r=Cr(n,u,o),r!==null&&(bn(r,n,o),Ll(r,n,o))}};function K_(n,r,o,u,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!Rl(o,u)||!Rl(f,m):!0}function Q_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&um.enqueueReplaceState(r,r.state,null)}function Qs(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var sh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Y_(n){sh(n)}function X_(n){console.error(n)}function $_(n){sh(n)}function ah(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Z_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cm(n,r,o){return o=Rr(o),o.tag=3,o.payload={element:null},o.callback=function(){ah(n,r)},o}function J_(n){return n=Rr(n),n.tag=3,n}function W_(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Z_(r,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Z_(r,o,u),typeof f!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function jw(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&xl(r,o,f,!0),o=Ln.current,o!==null){switch(o.tag){case 13:return fi===null?Mm():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Bd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),km(n,u,f)),!1;case 22:return o.flags|=65536,u===Bd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),km(n,u,f)),!1}throw Error(i(435,o.tag))}return km(n,u,f),Mm(),!1}if(Fe)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==xd&&(n=Error(i(422),{cause:u}),Vl(On(n,o)))):(u!==xd&&(r=Error(i(423),{cause:u}),Vl(On(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=On(u,o),f=cm(n.stateNode,u,f),Fd(n,f),pt!==4&&(pt=2)),!1;var m=Error(i(520),{cause:u});if(m=On(m,o),Jl===null?Jl=[m]:Jl.push(m),pt!==4&&(pt=2),r===null)return!0;u=On(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=cm(o.stateNode,u,n),Fd(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Lr===null||!Lr.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=J_(f),W_(f,n,o,u),Fd(o,f),!1}o=o.return}while(o!==null);return!1}var ev=Error(i(461)),Lt=!1;function jt(n,r,o,u){r.child=n===null?H_(r,null,o,u):no(r,n.child,o,u)}function tv(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return Hs(r),u=Qd(n,r,o,E,m,f),A=Yd(),n!==null&&!Lt?(Xd(n,r,f),ji(n,r,f)):(Fe&&A&&Nd(r),r.flags|=1,jt(n,r,u,f),r.child)}function nv(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Rd(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,iv(n,r,m,u,f)):(n=Bc(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!_m(n,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:Rl,o(E,u)&&n.ref===r.ref)return ji(n,r,f)}return r.flags|=1,n=ki(m,u),n.ref=r.ref,n.return=r,r.child=n}function iv(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(Rl(m,u)&&n.ref===r.ref)if(Lt=!1,r.pendingProps=u=m,_m(n,f))(n.flags&131072)!==0&&(Lt=!0);else return r.lanes=n.lanes,ji(n,r,f)}return hm(n,r,o,u,f)}function rv(n,r,o){var u=r.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return sv(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Hc(r,m!==null?m.cachePool:null),m!==null?i_(r,m):Hd(),G_(r);else return r.lanes=r.childLanes=536870912,sv(n,r,m!==null?m.baseLanes|o:o,o)}else m!==null?(Hc(r,m.cachePool),i_(r,m),Vr(),r.memoizedState=null):(n!==null&&Hc(r,null),Hd(),Vr());return jt(n,r,f,o),r.child}function sv(n,r,o,u){var f=Ud();return f=f===null?null:{parent:Nt._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},n!==null&&Hc(r,null),Hd(),G_(r),n!==null&&xl(n,r,u,!0),null}function oh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function hm(n,r,o,u,f){return Hs(r),o=Qd(n,r,o,u,void 0,f),u=Yd(),n!==null&&!Lt?(Xd(n,r,f),ji(n,r,f)):(Fe&&u&&Nd(r),r.flags|=1,jt(n,r,o,f),r.child)}function av(n,r,o,u,f,m){return Hs(r),r.updateQueue=null,o=s_(r,u,o,f),r_(n),u=Yd(),n!==null&&!Lt?(Xd(n,r,m),ji(n,r,m)):(Fe&&u&&Nd(r),r.flags|=1,jt(n,r,o,m),r.child)}function ov(n,r,o,u,f){if(Hs(r),r.stateNode===null){var m=Ka,E=o.contextType;typeof E=="object"&&E!==null&&(m=$t(E)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=um,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},zd(r),E=o.contextType,m.context=typeof E=="object"&&E!==null?$t(E):Ka,m.state=r.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(lm(r,o,E,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&um.enqueueReplaceState(m,m.state,null),Bl(r,u,m,f),Ul(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var A=r.memoizedProps,R=Qs(o,A);m.props=R;var z=m.context,X=o.contextType;E=Ka,typeof X=="object"&&X!==null&&(E=$t(X));var J=o.getDerivedStateFromProps;X=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||z!==E)&&Q_(r,m,u,E),Ir=!1;var q=r.memoizedState;m.state=q,Bl(r,u,m,f),Ul(),z=r.memoizedState,A||q!==z||Ir?(typeof J=="function"&&(lm(r,o,J,u),z=r.memoizedState),(R=Ir||K_(r,o,R,u,q,z,E))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=z),m.props=u,m.state=z,m.context=E,u=R):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,qd(n,r),E=r.memoizedProps,X=Qs(o,E),m.props=X,J=r.pendingProps,q=m.context,z=o.contextType,R=Ka,typeof z=="object"&&z!==null&&(R=$t(z)),A=o.getDerivedStateFromProps,(z=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==J||q!==R)&&Q_(r,m,u,R),Ir=!1,q=r.memoizedState,m.state=q,Bl(r,u,m,f),Ul();var j=r.memoizedState;E!==J||q!==j||Ir||n!==null&&n.dependencies!==null&&Fc(n.dependencies)?(typeof A=="function"&&(lm(r,o,A,u),j=r.memoizedState),(X=Ir||K_(r,o,X,u,q,j,R)||n!==null&&n.dependencies!==null&&Fc(n.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,j,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,j,R)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=j),m.props=u,m.state=j,m.context=R,u=X):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,oh(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=no(r,n.child,null,f),r.child=no(r,null,o,f)):jt(n,r,o,f),r.memoizedState=m.state,n=r.child):n=ji(n,r,f),n}function lv(n,r,o,u){return Nl(),r.flags|=256,jt(n,r,o,u),r.child}var fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(n){return{baseLanes:n,cachePool:Xy()}}function mm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Un),n}function uv(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(Vt.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(Fe){if(f?Nr(r):Vr(),Fe){var A=mt,R;if(R=A){e:{for(R=A,A=hi;R.nodeType!==8;){if(!A){A=null;break e}if(R=Wn(R.nextSibling),R===null){A=null;break e}}A=R}A!==null?(r.memoizedState={dehydrated:A,treeContext:Bs!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},R=vn(18,null,null,0),R.stateNode=A,R.return=r,r.child=R,on=r,mt=null,R=!0):R=!1}R||Fs(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Zm(A)?r.lanes=32:r.lanes=536870912,null;Fi(r)}return A=u.children,u=u.fallback,f?(Vr(),f=r.mode,A=lh({mode:"hidden",children:A},f),u=Us(u,f,o,null),A.return=r,u.return=r,A.sibling=u,r.child=A,f=r.child,f.memoizedState=dm(o),f.childLanes=mm(n,E,o),r.memoizedState=fm,u):(Nr(r),pm(r,A))}if(R=n.memoizedState,R!==null&&(A=R.dehydrated,A!==null)){if(m)r.flags&256?(Nr(r),r.flags&=-257,r=gm(n,r,o)):r.memoizedState!==null?(Vr(),r.child=n.child,r.flags|=128,r=null):(Vr(),f=u.fallback,A=r.mode,u=lh({mode:"visible",children:u.children},A),f=Us(f,A,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,no(r,n.child,null,o),u=r.child,u.memoizedState=dm(o),u.childLanes=mm(n,E,o),r.memoizedState=fm,r=f);else if(Nr(r),Zm(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(i(419)),u.stack="",u.digest=E,Vl({value:u,source:null,stack:null}),r=gm(n,r,o)}else if(Lt||xl(n,r,o,!1),E=(o&n.childLanes)!==0,Lt||E){if(E=it,E!==null&&(u=o&-o,u=(u&42)!==0?1:cl(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,Ga(n,u),bn(E,n,u),ev;A.data==="$?"||Mm(),r=gm(n,r,o)}else A.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=R.treeContext,mt=Wn(A.nextSibling),on=r,Fe=!0,qs=null,hi=!1,n!==null&&(Pn[kn++]=Li,Pn[kn++]=Ui,Pn[kn++]=Bs,Li=n.id,Ui=n.overflow,Bs=r),r=pm(r,u.children),r.flags|=4096);return r}return f?(Vr(),f=u.fallback,A=r.mode,R=n.child,z=R.sibling,u=ki(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,z!==null?f=ki(z,f):(f=Us(f,A,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,A=n.child.memoizedState,A===null?A=dm(o):(R=A.cachePool,R!==null?(z=Nt._currentValue,R=R.parent!==z?{parent:z,pool:z}:R):R=Xy(),A={baseLanes:A.baseLanes|o,cachePool:R}),f.memoizedState=A,f.childLanes=mm(n,E,o),r.memoizedState=fm,u):(Nr(r),o=n.child,n=o.sibling,o=ki(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=o,r.memoizedState=null,o)}function pm(n,r){return r=lh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function lh(n,r){return n=vn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function gm(n,r,o){return no(r,n.child,null,o),n=pm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function cv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Md(n.return,r,o)}function ym(n,r,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function hv(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;if(jt(n,r,u.children,o),u=Vt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cv(n,o,r);else if(n.tag===19)cv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(le(Vt,u),f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&rh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),ym(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&rh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}ym(r,!0,o,null,m);break;case"together":ym(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ji(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),kr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(xl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=ki(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=ki(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function _m(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Fc(n)))}function Hw(n,r,o){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),wr(r,Nt,n.memoizedState.cache),Nl();break;case 27:case 5:al(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:wr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Nr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?uv(n,r,o):(Nr(r),n=ji(n,r,o),n!==null?n.sibling:null);Nr(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(xl(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return hv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Vt,Vt.current),u)break;return null;case 22:case 23:return r.lanes=0,rv(n,r,o);case 24:wr(r,Nt,n.memoizedState.cache)}return ji(n,r,o)}function fv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Lt=!0;else{if(!_m(n,o)&&(r.flags&128)===0)return Lt=!1,Hw(n,r,o);Lt=(n.flags&131072)!==0}else Lt=!1,Fe&&(r.flags&1048576)!==0&&Fy(r,qc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Rd(u)?(n=Qs(u,n),r.tag=1,r=ov(null,r,u,n,o)):(r.tag=0,r=hm(null,r,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ve){r.tag=11,r=tv(null,r,u,n,o);break e}else if(f===D){r.tag=14,r=nv(null,r,u,n,o);break e}}throw r=dt(u)||u,Error(i(306,r,""))}}return r;case 0:return hm(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Qs(u,r.pendingProps),ov(n,r,u,f,o);case 3:e:{if($e(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,qd(n,r),Bl(r,u,null,o);var E=r.memoizedState;if(u=E.cache,wr(r,Nt,u),u!==m.cache&&Pd(r,[Nt],o,!0),Ul(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=lv(n,r,u,o);break e}else if(u!==f){f=On(Error(i(424)),r),Vl(f),r=lv(n,r,u,o);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=Wn(n.firstChild),on=r,Fe=!0,qs=null,hi=!0,o=H_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Nl(),u===f){r=ji(n,r,o);break e}jt(n,r,u,o)}r=r.child}return r;case 26:return oh(n,r),n===null?(o=gE(r.type,null,r.pendingProps,null))?r.memoizedState=o:Fe||(o=r.type,n=r.pendingProps,u=Ah(Ae.current).createElement(o),u[_t]=r,u[Ft]=n,Gt(u,o,n),vt(u),r.stateNode=u):r.memoizedState=gE(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return al(r),n===null&&Fe&&(u=r.stateNode=dE(r.type,r.pendingProps,Ae.current),on=r,hi=!0,f=mt,zr(r.type)?(Jm=f,mt=Wn(u.firstChild)):mt=f),jt(n,r,r.pendingProps.children,o),oh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Fe&&((f=u=mt)&&(u=_I(u,r.type,r.pendingProps,hi),u!==null?(r.stateNode=u,on=r,mt=Wn(u.firstChild),hi=!1,f=!0):f=!1),f||Fs(r)),al(r),f=r.type,m=r.pendingProps,E=n!==null?n.memoizedProps:null,u=m.children,Ym(f,m)?u=null:E!==null&&Ym(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=Qd(n,r,kw,null,null,o),ou._currentValue=f),oh(n,r),jt(n,r,u,o),r.child;case 6:return n===null&&Fe&&((n=o=mt)&&(o=vI(o,r.pendingProps,hi),o!==null?(r.stateNode=o,on=r,mt=null,n=!0):n=!1),n||Fs(r)),null;case 13:return uv(n,r,o);case 4:return $e(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=no(r,null,u,o):jt(n,r,u,o),r.child;case 11:return tv(n,r,r.type,r.pendingProps,o);case 7:return jt(n,r,r.pendingProps,o),r.child;case 8:return jt(n,r,r.pendingProps.children,o),r.child;case 12:return jt(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,wr(r,r.type,u.value),jt(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Hs(r),f=$t(f),u=u(f),r.flags|=1,jt(n,r,u,o),r.child;case 14:return nv(n,r,r.type,r.pendingProps,o);case 15:return iv(n,r,r.type,r.pendingProps,o);case 19:return hv(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=lh(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=ki(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return rv(n,r,o);case 24:return Hs(r),u=$t(Nt),n===null?(f=Ud(),f===null&&(f=it,m=kd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},zd(r),wr(r,Nt,f)):((n.lanes&o)!==0&&(qd(n,r),Bl(r,null,null,o),Ul()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),wr(r,Nt,u)):(u=m.cache,wr(r,Nt,u),u!==f.cache&&Pd(r,[Nt],o,!0))),jt(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Hi(n){n.flags|=4}function dv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!TE(r)){if(r=Ln.current,r!==null&&((Ue&4194048)===Ue?fi!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==fi))throw kl=Bd,$y;n.flags|=8192}}function uh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?fr():536870912,n.lanes|=r,ao|=r)}function Kl(n,r){if(!Fe)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ct(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function Gw(n,r,o){var u=r.pendingProps;switch(Vd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),zi(Nt),jn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Dl(r)?Hi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gy())),ct(r),null;case 26:return o=r.memoizedState,n===null?(Hi(r),o!==null?(ct(r),dv(r,o)):(ct(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Hi(r),ct(r),dv(r,o)):(ct(r),r.flags&=-16777217):(n.memoizedProps!==u&&Hi(r),ct(r),r.flags&=-16777217),null;case 27:wa(r),o=Ae.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Hi(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}n=pe.current,Dl(r)?jy(r):(n=dE(f,u,o),r.stateNode=n,Hi(r))}return ct(r),null;case 5:if(wa(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Hi(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(n=pe.current,Dl(r))jy(r);else{switch(f=Ah(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[_t]=r,n[Ft]=u;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Gt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Hi(r)}}return ct(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Hi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ae.current,Dl(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[_t]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||aE(n.nodeValue,o)),n||Fs(r)}else n=Ah(n).createTextNode(u),n[_t]=r,r.stateNode=n}return ct(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Dl(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[_t]=r}else Nl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),f=!1}else f=Gy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Fi(r),r):(Fi(r),null)}if(Fi(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),uh(r,r.updateQueue),ct(r),null;case 4:return jn(),n===null&&jm(r.stateNode.containerInfo),ct(r),null;case 10:return zi(r.type),ct(r),null;case 19:if(ce(Vt),f=r.memoizedState,f===null)return ct(r),null;if(u=(r.flags&128)!==0,m=f.rendering,m===null)if(u)Kl(f,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=rh(n),m!==null){for(r.flags|=128,Kl(f,!1),n=m.updateQueue,r.updateQueue=n,uh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)qy(o,n),o=o.sibling;return le(Vt,Vt.current&1|2),r.child}n=n.sibling}f.tail!==null&&hn()>fh&&(r.flags|=128,u=!0,Kl(f,!1),r.lanes=4194304)}else{if(!u)if(n=rh(m),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,uh(r,n),Kl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Fe)return ct(r),null}else 2*hn()-f.renderingStartTime>fh&&o!==536870912&&(r.flags|=128,u=!0,Kl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=hn(),r.sibling=null,n=Vt.current,le(Vt,u?n&1|2:n&1),r):(ct(r),null);case 22:case 23:return Fi(r),Gd(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),o=r.updateQueue,o!==null&&uh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&ce(Gs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),zi(Nt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Kw(n,r){switch(Vd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return zi(Nt),jn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return wa(r),null;case 13:if(Fi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Nl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ce(Vt),null;case 4:return jn(),null;case 10:return zi(r.type),null;case 22:case 23:return Fi(r),Gd(),n!==null&&ce(Gs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return zi(Nt),null;case 25:return null;default:return null}}function mv(n,r){switch(Vd(r),r.tag){case 3:zi(Nt),jn();break;case 26:case 27:case 5:wa(r);break;case 4:jn();break;case 13:Fi(r);break;case 19:ce(Vt);break;case 10:zi(r.type);break;case 22:case 23:Fi(r),Gd(),n!==null&&ce(Gs);break;case 24:zi(Nt)}}function Ql(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){tt(r,r.return,A)}}function xr(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=r;var R=o,z=A;try{z()}catch(X){tt(f,R,X)}}}u=u.next}while(u!==m)}}catch(X){tt(r,r.return,X)}}function pv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{n_(r,o)}catch(u){tt(n,n.return,u)}}}function gv(n,r,o){o.props=Qs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,r,u)}}function Yl(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){tt(n,r,f)}}function di(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,r,f)}else o.current=null}function yv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function vm(n,r,o){try{var u=n.stateNode;dI(u,n.type,o,r),u[Ft]=r}catch(f){tt(n,n.return,f)}}function _v(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&zr(n.type)||n.tag===4}function Em(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_v(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&zr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Tm(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Th));else if(u!==4&&(u===27&&zr(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Tm(n,r,o),n=n.sibling;n!==null;)Tm(n,r,o),n=n.sibling}function ch(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&zr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(ch(n,r,o),n=n.sibling;n!==null;)ch(n,r,o),n=n.sibling}function vv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Gt(r,u,o),r[_t]=n,r[Ft]=o}catch(m){tt(n,n.return,m)}}var Gi=!1,At=!1,Am=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Qw(n,r){if(n=n.containerInfo,Km=Ch,n=Vy(n),Ed(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var E=0,A=-1,R=-1,z=0,X=0,J=n,q=null;t:for(;;){for(var j;J!==o||f!==0&&J.nodeType!==3||(A=E+f),J!==m||u!==0&&J.nodeType!==3||(R=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(j=J.firstChild)!==null;)q=J,J=j;for(;;){if(J===n)break t;if(q===o&&++z===f&&(A=E),q===m&&++X===u&&(R=E),(j=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=j}o=A===-1||R===-1?null:{start:A,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qm={focusedElem:n,selectionRange:o},Ch=!1,Ut=r;Ut!==null;)if(r=Ut,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Ut=n;else for(;Ut!==null;){switch(r=Ut,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Se=Qs(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Se,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){tt(o,o.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)$m(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$m(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Ut=n;break}Ut=r.return}}function Tv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Or(n,o),u&4&&Ql(5,o);break;case 1:if(Or(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(E){tt(o,o.return,E)}else{var f=Qs(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(o,o.return,E)}}u&64&&pv(o),u&512&&Yl(o,o.return);break;case 3:if(Or(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{n_(n,r)}catch(E){tt(o,o.return,E)}}break;case 27:r===null&&u&4&&vv(o);case 26:case 5:Or(n,o),r===null&&u&4&&yv(o),u&512&&Yl(o,o.return);break;case 12:Or(n,o);break;case 13:Or(n,o),u&4&&bv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=nI.bind(null,o),EI(n,o))));break;case 22:if(u=o.memoizedState!==null||Gi,!u){r=r!==null&&r.memoizedState!==null||At,f=Gi;var m=At;Gi=u,(At=r)&&!m?Mr(n,o,(o.subtreeFlags&8772)!==0):Or(n,o),Gi=f,At=m}break;case 30:break;default:Or(n,o)}}function Av(n){var r=n.alternate;r!==null&&(n.alternate=null,Av(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Na(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var at=null,dn=!1;function Ki(n,r,o){for(o=o.child;o!==null;)Sv(n,r,o),o=o.sibling}function Sv(n,r,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ur,o)}catch{}switch(o.tag){case 26:At||di(o,r),Ki(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||di(o,r);var u=at,f=dn;zr(o.type)&&(at=o.stateNode,dn=!1),Ki(n,r,o),iu(o.stateNode),at=u,dn=f;break;case 5:At||di(o,r);case 6:if(u=at,f=dn,at=null,Ki(n,r,o),at=u,dn=f,at!==null)if(dn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(o.stateNode)}catch(m){tt(o,r,m)}else try{at.removeChild(o.stateNode)}catch(m){tt(o,r,m)}break;case 18:at!==null&&(dn?(n=at,hE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),hu(n)):hE(at,o.stateNode));break;case 4:u=at,f=dn,at=o.stateNode.containerInfo,dn=!0,Ki(n,r,o),at=u,dn=f;break;case 0:case 11:case 14:case 15:At||xr(2,o,r),At||xr(4,o,r),Ki(n,r,o);break;case 1:At||(di(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&gv(o,r,u)),Ki(n,r,o);break;case 21:Ki(n,r,o);break;case 22:At=(u=At)||o.memoizedState!==null,Ki(n,r,o),At=u;break;default:Ki(n,r,o)}}function bv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{hu(n)}catch(o){tt(r,r.return,o)}}function Yw(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Ev),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Ev),r;default:throw Error(i(435,n.tag))}}function Sm(n,r){var o=Yw(n);r.forEach(function(u){var f=iI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function En(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,E=r,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(zr(A.type)){at=A.stateNode,dn=!1;break e}break;case 5:at=A.stateNode,dn=!1;break e;case 3:case 4:at=A.stateNode.containerInfo,dn=!0;break e}A=A.return}if(at===null)throw Error(i(160));Sv(m,E,f),at=null,dn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)wv(r,n),r=r.sibling}var Jn=null;function wv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(r,n),Tn(n),u&4&&(xr(3,n,n.return),Ql(3,n),xr(5,n,n.return));break;case 1:En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),u&64&&Gi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Jn;if(En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[pr]||m[_t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,u,o),m[_t]=n,vt(m),u=m;break e;case"link":var E=vE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(m=E[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;case"meta":if(E=vE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(m=E[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[_t]=n,vt(m),u=m}n.stateNode=u}else EE(f,n.type,n.stateNode);else n.stateNode=_E(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?EE(f,n.type,n.stateNode):_E(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&vm(n,n.memoizedProps,o.memoizedProps)}break;case 27:En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),o!==null&&u&4&&vm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),n.flags&32){f=n.stateNode;try{Vn(f,"")}catch(j){tt(n,n.return,j)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,vm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Am=!0);break;case 6:if(En(r,n),Tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(j){tt(n,n.return,j)}}break;case 3:if(wh=null,f=Jn,Jn=Sh(r.containerInfo),En(r,n),Jn=f,Tn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hu(r.containerInfo)}catch(j){tt(n,n.return,j)}Am&&(Am=!1,Iv(n));break;case 4:u=Jn,Jn=Sh(n.stateNode.containerInfo),En(r,n),Tn(n),Jn=u;break;case 12:En(r,n),Tn(n);break;case 13:En(r,n),Tn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dm=hn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Sm(n,u)));break;case 22:f=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,z=Gi,X=At;if(Gi=z||f,At=X||R,En(r,n),At=X,Gi=z,Tn(n),u&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||R||Gi||At||Ys(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){R=o=r;try{if(m=R.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=R.stateNode;var J=R.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(j){tt(R,R.return,j)}}}else if(r.tag===6){if(o===null){R=r;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(j){tt(R,R.return,j)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sm(n,o))));break;case 19:En(r,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Sm(n,u)));break;case 30:break;case 21:break;default:En(r,n),Tn(n)}}function Tn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(_v(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Em(n);ch(n,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(Vn(E,""),o.flags&=-33);var A=Em(n);ch(n,A,E);break;case 3:case 4:var R=o.stateNode.containerInfo,z=Em(n);Tm(n,z,R);break;default:throw Error(i(161))}}catch(X){tt(n,n.return,X)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Iv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Or(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Tv(n,r.alternate,r),r=r.sibling}function Ys(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:xr(4,r,r.return),Ys(r);break;case 1:di(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&gv(r,r.return,o),Ys(r);break;case 27:iu(r.stateNode);case 26:case 5:di(r,r.return),Ys(r);break;case 22:r.memoizedState===null&&Ys(r);break;case 30:Ys(r);break;default:Ys(r)}n=n.sibling}}function Mr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Mr(f,m,o),Ql(4,m);break;case 1:if(Mr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){tt(u,u.return,z)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)t_(R[f],A)}catch(z){tt(u,u.return,z)}}o&&E&64&&pv(m),Yl(m,m.return);break;case 27:vv(m);case 26:case 5:Mr(f,m,o),o&&u===null&&E&4&&yv(m),Yl(m,m.return);break;case 12:Mr(f,m,o);break;case 13:Mr(f,m,o),o&&E&4&&bv(f,m);break;case 22:m.memoizedState===null&&Mr(f,m,o),Yl(m,m.return);break;case 30:break;default:Mr(f,m,o)}r=r.sibling}}function bm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ol(o))}function wm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ol(n))}function mi(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rv(n,r,o,u),r=r.sibling}function Rv(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:mi(n,r,o,u),f&2048&&Ql(9,r);break;case 1:mi(n,r,o,u);break;case 3:mi(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ol(n)));break;case 12:if(f&2048){mi(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,E=m.id,A=m.onPostCommit;typeof A=="function"&&A(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){tt(r,r.return,R)}}else mi(n,r,o,u);break;case 13:mi(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?mi(n,r,o,u):Xl(n,r):m._visibility&2?mi(n,r,o,u):(m._visibility|=2,io(n,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&bm(E,r);break;case 24:mi(n,r,o,u),f&2048&&wm(r.alternate,r);break;default:mi(n,r,o,u)}}function io(n,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,E=r,A=o,R=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:io(m,E,A,R,f),Ql(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?io(m,E,A,R,f):Xl(m,E):(X._visibility|=2,io(m,E,A,R,f)),f&&z&2048&&bm(E.alternate,E);break;case 24:io(m,E,A,R,f),f&&z&2048&&wm(E.alternate,E);break;default:io(m,E,A,R,f)}r=r.sibling}}function Xl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:Xl(o,u),f&2048&&bm(u.alternate,u);break;case 24:Xl(o,u),f&2048&&wm(u.alternate,u);break;default:Xl(o,u)}r=r.sibling}}var $l=8192;function ro(n){if(n.subtreeFlags&$l)for(n=n.child;n!==null;)Cv(n),n=n.sibling}function Cv(n){switch(n.tag){case 26:ro(n),n.flags&$l&&n.memoizedState!==null&&OI(Jn,n.memoizedState,n.memoizedProps);break;case 5:ro(n);break;case 3:case 4:var r=Jn;Jn=Sh(n.stateNode.containerInfo),ro(n),Jn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=$l,$l=16777216,ro(n),$l=r):ro(n));break;default:ro(n)}}function Dv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Zl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ut=u,Vv(u,n)}Dv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Nv(n),n=n.sibling}function Nv(n){switch(n.tag){case 0:case 11:case 15:Zl(n),n.flags&2048&&xr(9,n,n.return);break;case 3:Zl(n);break;case 12:Zl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,hh(n)):Zl(n);break;default:Zl(n)}}function hh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ut=u,Vv(u,n)}Dv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:xr(8,r,r.return),hh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,hh(r));break;default:hh(r)}n=n.sibling}}function Vv(n,r){for(;Ut!==null;){var o=Ut;switch(o.tag){case 0:case 11:case 15:xr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ol(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ut=u;else e:for(o=n;Ut!==null;){u=Ut;var f=u.sibling,m=u.return;if(Av(u),u===o){Ut=null;break e}if(f!==null){f.return=m,Ut=f;break e}Ut=m}}}var Xw={getCacheForType:function(n){var r=$t(Nt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},$w=typeof WeakMap=="function"?WeakMap:Map,Ge=0,it=null,xe=null,Ue=0,Ke=0,An=null,Pr=!1,so=!1,Im=!1,Qi=0,pt=0,kr=0,Xs=0,Rm=0,Un=0,ao=0,Jl=null,mn=null,Cm=!1,Dm=0,fh=1/0,dh=null,Lr=null,Ht=0,Ur=null,oo=null,lo=0,Nm=0,Vm=null,xv=null,Wl=0,xm=null;function Sn(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(Y.T!==null){var n=Xa;return n!==0?n:Bm()}return Di()}function Ov(){Un===0&&(Un=(Ue&536870912)===0||Fe?ul():536870912);var n=Ln.current;return n!==null&&(n.flags|=32),Un}function bn(n,r,o){(n===it&&(Ke===2||Ke===9)||n.cancelPendingCommit!==null)&&(uo(n,0),Br(n,Ue,Un,!1)),yt(n,o),((Ge&2)===0||n!==it)&&(n===it&&((Ge&2)===0&&(Xs|=o),pt===4&&Br(n,Ue,Un,!1)),pi(n))}function Mv(n,r,o){if((Ge&6)!==0)throw Error(i(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||hr(n,r),f=u?Ww(n,r):Pm(n,r,!0),m=u;do{if(f===0){so&&!u&&Br(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!Zw(o)){f=Pm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var A=n;f=Jl;var R=A.current.memoizedState.isDehydrated;if(R&&(uo(A,E).flags|=256),E=Pm(A,E,!1),E!==2){if(Im&&!R){A.errorRecoveryDisabledLanes|=m,Xs|=m,f=4;break e}m=mn,mn=f,m!==null&&(mn===null?mn=m:mn.push.apply(mn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){uo(n,0),Br(n,r,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Br(u,r,Un,!Pr);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Dm+300-hn(),10<f)){if(Br(u,r,Un,!Pr),Dn(u,0,!0)!==0)break e;u.timeoutHandle=uE(Pv.bind(null,u,o,mn,dh,Cm,r,Un,Xs,ao,Pr,m,2,-0,0),f);break e}Pv(u,o,mn,dh,Cm,r,Un,Xs,ao,Pr,m,0,-0,0)}}break}while(!0);pi(n)}function Pv(n,r,o,u,f,m,E,A,R,z,X,J,q,j){if(n.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(au={stylesheets:null,count:0,unsuspend:xI},Cv(r),J=MI(),J!==null)){n.cancelPendingCommit=J(Fv.bind(null,n,r,m,o,u,f,E,A,R,X,1,q,j)),Br(n,m,E,!z);return}Fv(n,r,m,o,u,f,E,A,R)}function Zw(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!_n(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Br(n,r,o,u){r&=~Rm,r&=~Xs,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-nn(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&dr(n,o,r)}function mh(){return(Ge&6)===0?(eu(0),!1):!0}function Om(){if(xe!==null){if(Ke===0)var n=xe.return;else n=xe,Bi=js=null,$d(n),to=null,Hl=0,n=xe;for(;n!==null;)mv(n.alternate,n),n=n.return;xe=null}}function uo(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,pI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Om(),it=n,xe=o=ki(n.current,null),Ue=r,Ke=0,An=null,Pr=!1,so=hr(n,r),Im=!1,ao=Un=Rm=Xs=kr=pt=0,mn=Jl=null,Cm=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-nn(u),m=1<<f;r|=n[f],u&=~m}return Qi=r,kc(),o}function kv(n,r){De=null,Y.H=th,r===Pl||r===Gc?(r=Wy(),Ke=3):r===$y?(r=Wy(),Ke=4):Ke=r===ev?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,xe===null&&(pt=1,ah(n,On(r,n.current)))}function Lv(){var n=Y.H;return Y.H=th,n===null?th:n}function Uv(){var n=Y.A;return Y.A=Xw,n}function Mm(){pt=4,Pr||(Ue&4194048)!==Ue&&Ln.current!==null||(so=!0),(kr&134217727)===0&&(Xs&134217727)===0||it===null||Br(it,Ue,Un,!1)}function Pm(n,r,o){var u=Ge;Ge|=2;var f=Lv(),m=Uv();(it!==n||Ue!==r)&&(dh=null,uo(n,r)),r=!1;var E=pt;e:do try{if(Ke!==0&&xe!==null){var A=xe,R=An;switch(Ke){case 8:Om(),E=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var z=Ke;if(Ke=0,An=null,co(n,A,R,z),o&&so){E=0;break e}break;default:z=Ke,Ke=0,An=null,co(n,A,R,z)}}Jw(),E=pt;break}catch(X){kv(n,X)}while(!0);return r&&n.shellSuspendCounter++,Bi=js=null,Ge=u,Y.H=f,Y.A=m,xe===null&&(it=null,Ue=0,kc()),E}function Jw(){for(;xe!==null;)Bv(xe)}function Ww(n,r){var o=Ge;Ge|=2;var u=Lv(),f=Uv();it!==n||Ue!==r?(dh=null,fh=hn()+500,uo(n,r)):so=hr(n,r);e:do try{if(Ke!==0&&xe!==null){r=xe;var m=An;t:switch(Ke){case 1:Ke=0,An=null,co(n,r,m,1);break;case 2:case 9:if(Zy(m)){Ke=0,An=null,zv(r);break}r=function(){Ke!==2&&Ke!==9||it!==n||(Ke=7),pi(n)},m.then(r,r);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Zy(m)?(Ke=0,An=null,zv(r)):(Ke=0,An=null,co(n,r,m,7));break;case 5:var E=null;switch(xe.tag){case 26:E=xe.memoizedState;case 5:case 27:var A=xe;if(!E||TE(E)){Ke=0,An=null;var R=A.sibling;if(R!==null)xe=R;else{var z=A.return;z!==null?(xe=z,ph(z)):xe=null}break t}}Ke=0,An=null,co(n,r,m,5);break;case 6:Ke=0,An=null,co(n,r,m,6);break;case 8:Om(),pt=6;break e;default:throw Error(i(462))}}eI();break}catch(X){kv(n,X)}while(!0);return Bi=js=null,Y.H=u,Y.A=f,Ge=o,xe!==null?0:(it=null,Ue=0,kc(),pt)}function eI(){for(;xe!==null&&!ud();)Bv(xe)}function Bv(n){var r=fv(n.alternate,n,Qi);n.memoizedProps=n.pendingProps,r===null?ph(n):xe=r}function zv(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=av(o,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=av(o,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:$d(r);default:mv(o,r),r=xe=qy(r,Qi),r=fv(o,r,Qi)}n.memoizedProps=n.pendingProps,r===null?ph(n):xe=r}function co(n,r,o,u){Bi=js=null,$d(r),to=null,Hl=0;var f=r.return;try{if(jw(n,f,r,o,Ue)){pt=1,ah(n,On(o,n.current)),xe=null;return}}catch(m){if(f!==null)throw xe=f,m;pt=1,ah(n,On(o,n.current)),xe=null;return}r.flags&32768?(Fe||u===1?n=!0:so||(Ue&536870912)!==0?n=!1:(Pr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),qv(r,n)):ph(r)}function ph(n){var r=n;do{if((r.flags&32768)!==0){qv(r,Pr);return}n=r.return;var o=Gw(r.alternate,r,Qi);if(o!==null){xe=o;return}if(r=r.sibling,r!==null){xe=r;return}xe=r=n}while(r!==null);pt===0&&(pt=5)}function qv(n,r){do{var o=Kw(n.alternate,n);if(o!==null){o.flags&=32767,xe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){xe=n;return}xe=n=o}while(n!==null);pt=6,xe=null}function Fv(n,r,o,u,f,m,E,A,R){n.cancelPendingCommit=null;do gh();while(Ht!==0);if((Ge&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=wd,vc(n,o,m,E,A,R),n===it&&(xe=it=null,Ue=0),oo=r,Ur=n,lo=o,Nm=m,Vm=f,xv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rI(Ci,function(){return Qv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=ue.p,ue.p=2,E=Ge,Ge|=4;try{Qw(n,r,o)}finally{Ge=E,ue.p=f,Y.T=u}}Ht=1,jv(),Hv(),Gv()}}function jv(){if(Ht===1){Ht=0;var n=Ur,r=oo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var f=Ge;Ge|=4;try{wv(r,n);var m=Qm,E=Vy(n.containerInfo),A=m.focusedElem,R=m.selectionRange;if(E!==A&&A&&A.ownerDocument&&Ny(A.ownerDocument.documentElement,A)){if(R!==null&&Ed(A)){var z=R.start,X=R.end;if(X===void 0&&(X=z),"selectionStart"in A)A.selectionStart=z,A.selectionEnd=Math.min(X,A.value.length);else{var J=A.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var j=q.getSelection(),Se=A.textContent.length,Ee=Math.min(R.start,Se),et=R.end===void 0?Ee:Math.min(R.end,Se);!j.extend&&Ee>et&&(E=et,et=Ee,Ee=E);var P=Dy(A,Ee),x=Dy(A,et);if(P&&x&&(j.rangeCount!==1||j.anchorNode!==P.node||j.anchorOffset!==P.offset||j.focusNode!==x.node||j.focusOffset!==x.offset)){var U=J.createRange();U.setStart(P.node,P.offset),j.removeAllRanges(),Ee>et?(j.addRange(U),j.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),j.addRange(U))}}}}for(J=[],j=A;j=j.parentNode;)j.nodeType===1&&J.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<J.length;A++){var Z=J[A];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Ch=!!Km,Qm=Km=null}finally{Ge=f,ue.p=u,Y.T=o}}n.current=r,Ht=2}}function Hv(){if(Ht===2){Ht=0;var n=Ur,r=oo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var f=Ge;Ge|=4;try{Tv(n,r.alternate,r)}finally{Ge=f,ue.p=u,Y.T=o}}Ht=3}}function Gv(){if(Ht===4||Ht===3){Ht=0,ol();var n=Ur,r=oo,o=lo,u=xv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,oo=Ur=null,Kv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Lr=null),hl(o),r=r.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ur,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Y.T,f=ue.p,ue.p=2,Y.T=null;try{for(var m=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];m(A.value,{componentStack:A.stack})}}finally{Y.T=r,ue.p=f}}(lo&3)!==0&&gh(),pi(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===xm?Wl++:(Wl=0,xm=n):Wl=0,eu(0)}}function Kv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Ol(r)))}function gh(n){return jv(),Hv(),Gv(),Qv()}function Qv(){if(Ht!==5)return!1;var n=Ur,r=Nm;Nm=0;var o=hl(lo),u=Y.T,f=ue.p;try{ue.p=32>o?32:o,Y.T=null,o=Vm,Vm=null;var m=Ur,E=lo;if(Ht=0,oo=Ur=null,lo=0,(Ge&6)!==0)throw Error(i(331));var A=Ge;if(Ge|=4,Nv(m.current),Rv(m,m.current,E,o),Ge=A,eu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ur,m)}catch{}return!0}finally{ue.p=f,Y.T=u,Kv(n,r)}}function Yv(n,r,o){r=On(o,r),r=cm(n.stateNode,r,2),n=Cr(n,r,2),n!==null&&(yt(n,2),pi(n))}function tt(n,r,o){if(n.tag===3)Yv(n,n,o);else for(;r!==null;){if(r.tag===3){Yv(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Lr===null||!Lr.has(u))){n=On(o,n),o=J_(2),u=Cr(r,o,2),u!==null&&(W_(o,u,r,n),yt(u,2),pi(u));break}}r=r.return}}function km(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new $w;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Im=!0,f.add(o),n=tI.bind(null,n,r,o),r.then(n,n))}function tI(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,it===n&&(Ue&o)===o&&(pt===4||pt===3&&(Ue&62914560)===Ue&&300>hn()-Dm?(Ge&2)===0&&uo(n,0):Rm|=o,ao===Ue&&(ao=0)),pi(n)}function Xv(n,r){r===0&&(r=fr()),n=Ga(n,r),n!==null&&(yt(n,r),pi(n))}function nI(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Xv(n,o)}function iI(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Xv(n,o)}function rI(n,r){return ms(n,r)}var yh=null,ho=null,Lm=!1,_h=!1,Um=!1,$s=0;function pi(n){n!==ho&&n.next===null&&(ho===null?yh=ho=n:ho=ho.next=n),_h=!0,Lm||(Lm=!0,aI())}function eu(n,r){if(!Um&&_h){Um=!0;do for(var o=!1,u=yh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-nn(42|n)+1)-1,m&=f&~(E&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Wv(u,m))}else m=Ue,m=Dn(u,u===it?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||hr(u,m)||(o=!0,Wv(u,m));u=u.next}while(o);Um=!1}}function sI(){$v()}function $v(){_h=Lm=!1;var n=0;$s!==0&&(mI()&&(n=$s),$s=0);for(var r=hn(),o=null,u=yh;u!==null;){var f=u.next,m=Zv(u,r);m===0?(u.next=null,o===null?yh=f:o.next=f,f===null&&(ho=o)):(o=u,(n!==0||(m&3)!==0)&&(_h=!0)),u=f}eu(n)}function Zv(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-nn(m),A=1<<E,R=f[E];R===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Ca(A,r)):R<=r&&(n.expiredLanes|=A),m&=~A}if(r=it,o=Ue,o=Dn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Ke===2||Ke===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ra(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||hr(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&Ra(u),hl(o)){case 2:case 8:o=Pt;break;case 32:o=Ci;break;case 268435456:o=ll;break;default:o=Ci}return u=Jv.bind(null,n),o=ms(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&Ra(u),n.callbackPriority=2,n.callbackNode=null,2}function Jv(n,r){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(gh()&&n.callbackNode!==o)return null;var u=Ue;return u=Dn(n,n===it?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Mv(n,u,r),Zv(n,hn()),n.callbackNode!=null&&n.callbackNode===o?Jv.bind(null,n):null)}function Wv(n,r){if(gh())return null;Mv(n,r,!0)}function aI(){gI(function(){(Ge&6)!==0?ms(Ct,sI):$v()})}function Bm(){return $s===0&&($s=ul()),$s}function eE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qn(""+n)}function tE(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function oI(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=eE((f[Ft]||null).action),E=u.submitter;E&&(r=(r=E[Ft]||null)?eE(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var A=new Ds("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($s!==0){var R=E?tE(f,E):new FormData(f);sm(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(A.preventDefault(),R=E?tE(f,E):new FormData(f),sm(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var zm=0;zm<bd.length;zm++){var qm=bd[zm],lI=qm.toLowerCase(),uI=qm[0].toUpperCase()+qm.slice(1);Zn(lI,"on"+uI)}Zn(My,"onAnimationEnd"),Zn(Py,"onAnimationIteration"),Zn(ky,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(Iw,"onTransitionRun"),Zn(Rw,"onTransitionStart"),Zn(Cw,"onTransitionCancel"),Zn(Ly,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function nE(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var A=u[E],R=A.instance,z=A.currentTarget;if(A=A.listener,R!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=z;try{m(f)}catch(X){sh(X)}f.currentTarget=null,m=R}else for(E=0;E<u.length;E++){if(A=u[E],R=A.instance,z=A.currentTarget,A=A.listener,R!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=z;try{m(f)}catch(X){sh(X)}f.currentTarget=null,m=R}}}}function Oe(n,r){var o=r[gs];o===void 0&&(o=r[gs]=new Set);var u=n+"__bubble";o.has(u)||(iE(r,n,2,!1),o.add(u))}function Fm(n,r,o){var u=0;r&&(u|=4),iE(o,n,u,r)}var vh="_reactListening"+Math.random().toString(36).slice(2);function jm(n){if(!n[vh]){n[vh]=!0,Ec.forEach(function(o){o!=="selectionchange"&&(cI.has(o)||Fm(o,!1,n),Fm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[vh]||(r[vh]=!0,Fm("selectionchange",!1,r))}}function iE(n,r,o,u){switch(RE(r)){case 2:var f=LI;break;case 8:f=UI;break;default:f=ip}o=f.bind(null,r,o,n),f=void 0,!Mi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Hm(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=ri(A),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){u=m=E;continue e}A=A.parentNode}}u=u.return}Is(function(){var z=m,X=_l(o),J=[];e:{var q=Uy.get(n);if(q!==void 0){var j=Ds,Se=n;switch(n){case"keypress":if(Rs(o)===0)break e;case"keydown":case"keyup":j=qa;break;case"focusin":Se="focus",j=Ua;break;case"focusout":Se="blur",j=Ua;break;case"beforeblur":case"afterblur":j=Ua;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=br;break;case My:case Py:case ky:j=El;break;case Ly:j=y;break;case"scroll":case"scrollend":j=Vs;break;case"wheel":j=S;break;case"copy":case"cut":case"paste":j=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Sl;break;case"toggle":case"beforetoggle":j=G}var Ee=(r&4)!==0,et=!Ee&&(n==="scroll"||n==="scrollend"),P=Ee?q!==null?q+"Capture":null:q;Ee=[];for(var x=z,U;x!==null;){var Z=x;if(U=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||U===null||P===null||(Z=Ar(x,P),Z!=null&&Ee.push(nu(x,Z,U))),et)break;x=x.return}0<Ee.length&&(q=new j(q,Se,null,o,X),J.push({event:q,listeners:Ee}))}}if((r&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",q&&o!==yl&&(Se=o.relatedTarget||o.fromElement)&&(ri(Se)||Se[Ni]))break e;if((j||q)&&(q=X.window===X?X:(q=X.ownerDocument)?q.defaultView||q.parentWindow:window,j?(Se=o.relatedTarget||o.toElement,j=z,Se=Se?ri(Se):null,Se!==null&&(et=l(Se),Ee=Se.tag,Se!==et||Ee!==5&&Ee!==27&&Ee!==6)&&(Se=null)):(j=null,Se=z),j!==Se)){if(Ee=Ms,Z="onMouseLeave",P="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Sl,Z="onPointerLeave",P="onPointerEnter",x="pointer"),et=j==null?q:gr(j),U=Se==null?q:gr(Se),q=new Ee(Z,x+"leave",j,o,X),q.target=et,q.relatedTarget=U,Z=null,ri(X)===z&&(Ee=new Ee(P,x+"enter",Se,o,X),Ee.target=U,Ee.relatedTarget=et,Z=Ee),et=Z,j&&Se)t:{for(Ee=j,P=Se,x=0,U=Ee;U;U=fo(U))x++;for(U=0,Z=P;Z;Z=fo(Z))U++;for(;0<x-U;)Ee=fo(Ee),x--;for(;0<U-x;)P=fo(P),U--;for(;x--;){if(Ee===P||P!==null&&Ee===P.alternate)break t;Ee=fo(Ee),P=fo(P)}Ee=null}else Ee=null;j!==null&&rE(J,q,j,Ee,!1),Se!==null&&et!==null&&rE(J,et,Se,Ee,!0)}}e:{if(q=z?gr(z):window,j=q.nodeName&&q.nodeName.toLowerCase(),j==="select"||j==="input"&&q.type==="file")var he=Sy;else if(Ty(q))if(by)he=Sw;else{he=Tw;var Ve=Ew}else j=q.nodeName,!j||j.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Pa(z.elementType)&&(he=Sy):he=Aw;if(he&&(he=he(n,z))){Ay(J,he,o,X);break e}Ve&&Ve(n,q,z),n==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&ml(q,"number",q.value)}switch(Ve=z?gr(z):window,n){case"focusin":(Ty(Ve)||Ve.contentEditable==="true")&&(Fa=Ve,Td=z,Cl=null);break;case"focusout":Cl=Td=Fa=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,xy(J,o,X);break;case"selectionchange":if(ww)break;case"keydown":case"keyup":xy(J,o,X)}var me;if(Re)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else $n?Yn(n,o)&&(Te="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(Et&&o.locale!=="ko"&&($n||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&$n&&(me=Ic()):(xn=X,nt="value"in xn?xn.value:xn.textContent,$n=!0)),Ve=Eh(z,Te),0<Ve.length&&(Te=new Al(Te,n,null,o,X),J.push({event:Te,listeners:Ve}),me?Te.data=me:(me=Xn(o),me!==null&&(Te.data=me)))),(me=He?bl(n,o):yw(n,o))&&(Te=Eh(z,"onBeforeInput"),0<Te.length&&(Ve=new Al("onBeforeInput","beforeinput",null,o,X),J.push({event:Ve,listeners:Te}),Ve.data=me)),oI(J,n,z,o,X)}nE(J,r)})}function nu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Eh(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ar(n,o),f!=null&&u.unshift(nu(n,f,m)),f=Ar(n,r),f!=null&&u.push(nu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function rE(n,r,o,u,f){for(var m=r._reactName,E=[];o!==null&&o!==u;){var A=o,R=A.alternate,z=A.stateNode;if(A=A.tag,R!==null&&R===u)break;A!==5&&A!==26&&A!==27||z===null||(R=z,f?(z=Ar(o,m),z!=null&&E.unshift(nu(o,z,R))):f||(z=Ar(o,m),z!=null&&E.push(nu(o,z,R)))),o=o.return}E.length!==0&&n.push({event:r,listeners:E})}var hI=/\r\n?/g,fI=/\u0000|\uFFFD/g;function sE(n){return(typeof n=="string"?n:""+n).replace(hI,`
`).replace(fI,"")}function aE(n,r){return r=sE(r),sE(n)===r}function Th(){}function We(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Vn(n,""+u);break;case"className":Ts(n,"class",u);break;case"tabIndex":Ts(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(n,o,u);break;case"style":gl(n,u,m);break;case"data":if(r!=="object"){Ts(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&We(n,r,"name",f.name,f,null),We(n,r,"formEncType",f.formEncType,f,null),We(n,r,"formMethod",f.formMethod,f,null),We(n,r,"formTarget",f.formTarget,f,null)):(We(n,r,"encType",f.encType,f,null),We(n,r,"method",f.method,f,null),We(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Th);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Qn(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),Es(n,"popover",u);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Es(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Sc.get(o)||o,Es(n,o,u))}}function Gm(n,r,o,u,f,m){switch(o){case"style":gl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&Vn(n,""+u);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_s.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Es(n,o,u)}}}function Gt(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(n,r,m,E,o,null)}}f&&We(n,r,"srcSet",o.srcSet,o,null),u&&We(n,r,"src",o.src,o,null);return;case"input":Oe("invalid",n);var A=m=E=f=null,R=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":E=X;break;case"checked":R=X;break;case"defaultChecked":z=X;break;case"value":m=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:We(n,r,u,X,o,null)}}dl(n,m,A,R,z,E,f,!1),vr(n);return;case"select":Oe("invalid",n),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:We(n,r,f,A,o,null)}r=m,o=E,n.multiple=!!u,r!=null?Er(n,!!u,r,!1):o!=null&&Er(n,!!u,o,!0);return;case"textarea":Oe("invalid",n),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:We(n,r,E,A,o,null)}Ac(n,u,f,m),vr(n);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:We(n,r,R,u,o,null)}return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(u=0;u<tu.length;u++)Oe(tu[u],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(n,r,z,u,o,null)}return;default:if(Pa(r)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&Gm(n,r,X,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&We(n,r,A,u,o,null))}function dI(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,A=null,R=null,z=null,X=null;for(j in o){var J=o[j];if(o.hasOwnProperty(j)&&J!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=J;default:u.hasOwnProperty(j)||We(n,r,j,null,u,J)}}for(var q in u){var j=u[q];if(J=o[q],u.hasOwnProperty(q)&&(j!=null||J!=null))switch(q){case"type":m=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":X=j;break;case"value":E=j;break;case"defaultValue":A=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:j!==J&&We(n,r,q,j,u,J)}}fl(n,E,A,R,z,X,m,f);return;case"select":j=E=A=q=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":j=R;default:u.hasOwnProperty(m)||We(n,r,m,null,u,R)}for(f in u)if(m=u[f],R=o[f],u.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":q=m;break;case"defaultValue":A=m;break;case"multiple":E=m;default:m!==R&&We(n,r,f,m,u,R)}r=A,o=E,u=j,q!=null?Er(n,!!o,q,!1):!!u!=!!o&&(r!=null?Er(n,!!o,r,!0):Er(n,!!o,o?[]:"",!1));return;case"textarea":j=q=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:We(n,r,A,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":q=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&We(n,r,E,f,u,m)}Tc(n,q,j);return;case"option":for(var Se in o)if(q=o[Se],o.hasOwnProperty(Se)&&q!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:We(n,r,Se,null,u,q)}for(R in u)if(q=u[R],j=o[R],u.hasOwnProperty(R)&&q!==j&&(q!=null||j!=null))switch(R){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:We(n,r,R,q,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)q=o[Ee],o.hasOwnProperty(Ee)&&q!=null&&!u.hasOwnProperty(Ee)&&We(n,r,Ee,null,u,q);for(z in u)if(q=u[z],j=o[z],u.hasOwnProperty(z)&&q!==j&&(q!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:We(n,r,z,q,u,j)}return;default:if(Pa(r)){for(var et in o)q=o[et],o.hasOwnProperty(et)&&q!==void 0&&!u.hasOwnProperty(et)&&Gm(n,r,et,void 0,u,q);for(X in u)q=u[X],j=o[X],!u.hasOwnProperty(X)||q===j||q===void 0&&j===void 0||Gm(n,r,X,q,u,j);return}}for(var P in o)q=o[P],o.hasOwnProperty(P)&&q!=null&&!u.hasOwnProperty(P)&&We(n,r,P,null,u,q);for(J in u)q=u[J],j=o[J],!u.hasOwnProperty(J)||q===j||q==null&&j==null||We(n,r,J,q,u,j)}var Km=null,Qm=null;function Ah(n){return n.nodeType===9?n:n.ownerDocument}function oE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lE(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Ym(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Xm=null;function mI(){var n=window.event;return n&&n.type==="popstate"?n===Xm?!1:(Xm=n,!0):(Xm=null,!1)}var uE=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,gI=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(n){return cE.resolve(null).then(n).catch(yI)}:uE;function yI(n){setTimeout(function(){throw n})}function zr(n){return n==="head"}function hE(n,r){var o=r,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&iu(E.documentElement),o&2&&iu(E.body),o&4)for(o=E.head,iu(o),E=o.firstChild;E;){var A=E.nextSibling,R=E.nodeName;E[pr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(m),hu(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);hu(r)}function $m(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":$m(o),Na(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function _I(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[pr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Wn(n.nextSibling),n===null)break}return null}function vI(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Wn(n.nextSibling),n===null))return null;return n}function Zm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function EI(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Wn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var Jm=null;function fE(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function dE(n,r,o){switch(r=Ah(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function iu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Na(n)}var Bn=new Map,mE=new Set;function Sh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yi=ue.d;ue.d={f:TI,r:AI,D:SI,C:bI,L:wI,m:II,X:CI,S:RI,M:DI};function TI(){var n=Yi.f(),r=mh();return n||r}function AI(n){var r=si(n);r!==null&&r.tag===5&&r.type==="form"?M_(r):Yi.r(n)}var mo=typeof document>"u"?null:document;function pE(n,r,o){var u=mo;if(u&&typeof r=="string"&&r){var f=kt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),mE.has(f)||(mE.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Gt(r,"link",n),vt(r),u.head.appendChild(r)))}}function SI(n){Yi.D(n),pE("dns-prefetch",n,null)}function bI(n,r){Yi.C(n,r),pE("preconnect",n,r)}function wI(n,r,o){Yi.L(n,r,o);var u=mo;if(u&&n&&r){var f='link[rel="preload"][as="'+kt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+kt(o.imageSizes)+'"]')):f+='[href="'+kt(n)+'"]';var m=f;switch(r){case"style":m=po(n);break;case"script":m=go(n)}Bn.has(m)||(n=_({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Bn.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(ru(m))||r==="script"&&u.querySelector(su(m))||(r=u.createElement("link"),Gt(r,"link",n),vt(r),u.head.appendChild(r)))}}function II(n,r){Yi.m(n,r);var o=mo;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+kt(u)+'"][href="'+kt(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=go(n)}if(!Bn.has(m)&&(n=_({rel:"modulepreload",href:n},r),Bn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(su(m)))return}u=o.createElement("link"),Gt(u,"link",n),vt(u),o.head.appendChild(u)}}}function RI(n,r,o){Yi.S(n,r,o);var u=mo;if(u&&n){var f=yr(u).hoistableStyles,m=po(n);r=r||"default";var E=f.get(m);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(ru(m)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Bn.get(m))&&Wm(n,o);var R=E=u.createElement("link");vt(R),Gt(R,"link",n),R._p=new Promise(function(z,X){R.onload=z,R.onerror=X}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bh(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(m,E)}}}function CI(n,r){Yi.X(n,r);var o=mo;if(o&&n){var u=yr(o).hoistableScripts,f=go(n),m=u.get(f);m||(m=o.querySelector(su(f)),m||(n=_({src:n,async:!0},r),(r=Bn.get(f))&&ep(n,r),m=o.createElement("script"),vt(m),Gt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function DI(n,r){Yi.M(n,r);var o=mo;if(o&&n){var u=yr(o).hoistableScripts,f=go(n),m=u.get(f);m||(m=o.querySelector(su(f)),m||(n=_({src:n,async:!0,type:"module"},r),(r=Bn.get(f))&&ep(n,r),m=o.createElement("script"),vt(m),Gt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function gE(n,r,o,u){var f=(f=Ae.current)?Sh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=po(o.href),o=yr(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=po(o.href);var m=yr(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(ru(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Bn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bn.set(n,o),m||NI(f,n,o,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(o),o=yr(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function po(n){return'href="'+kt(n)+'"'}function ru(n){return'link[rel="stylesheet"]['+n+"]"}function yE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function NI(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Gt(r,"link",o),vt(r),n.head.appendChild(r))}function go(n){return'[src="'+kt(n)+'"]'}function su(n){return"script[async]"+n}function _E(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+kt(o.href)+'"]');if(u)return r.instance=u,vt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),vt(u),Gt(u,"style",f),bh(u,o.precedence,n),r.instance=u;case"stylesheet":f=po(o.href);var m=n.querySelector(ru(f));if(m)return r.state.loading|=4,r.instance=m,vt(m),m;u=yE(o),(f=Bn.get(f))&&Wm(u,f),m=(n.ownerDocument||n).createElement("link"),vt(m);var E=m;return E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),Gt(m,"link",u),r.state.loading|=4,bh(m,o.precedence,n),r.instance=m;case"script":return m=go(o.src),(f=n.querySelector(su(m)))?(r.instance=f,vt(f),f):(u=o,(f=Bn.get(m))&&(u=_({},o),ep(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),vt(f),Gt(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,bh(u,o.precedence,n));return r.instance}function bh(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===r)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Wm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ep(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var wh=null;function vE(n,r,o){if(wh===null){var u=new Map,f=wh=new Map;f.set(o,u)}else f=wh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[pr]||m[_t]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=n+E;var A=u.get(E);A?A.push(m):u.set(E,[m])}}return u}function EE(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function VI(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function TE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var au=null;function xI(){}function OI(n,r,o){if(au===null)throw Error(i(475));var u=au;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=po(o.href),m=n.querySelector(ru(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Ih.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=m,vt(m);return}m=n.ownerDocument||n,o=yE(o),(f=Bn.get(f))&&Wm(o,f),m=m.createElement("link"),vt(m);var E=m;E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),Gt(m,"link",o),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Ih.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function MI(){if(au===null)throw Error(i(475));var n=au;return n.stylesheets&&n.count===0&&tp(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&tp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Ih(){if(this.count--,this.count===0){if(this.stylesheets)tp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Rh=null;function tp(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Rh=new Map,r.forEach(PI,n),Rh=null,Ih.call(n))}function PI(n,r){if(!(r.state.loading&4)){var o=Rh.get(n);if(o)var u=o.get(null);else{o=new Map,Rh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=Ih.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var ou={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function kI(n,r,o,u,f,m,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.hiddenUpdates=Da(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function AE(n,r,o,u,f,m,E,A,R,z,X,J){return n=new kI(n,r,o,E,A,R,z,J),r=1,m===!0&&(r|=24),m=vn(3,null,null,r),n.current=m,m.stateNode=n,r=kd(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},zd(m),n}function SE(n){return n?(n=Ka,n):Ka}function bE(n,r,o,u,f,m){f=SE(f),u.context===null?u.context=f:u.pendingContext=f,u=Rr(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Cr(n,u,r),o!==null&&(bn(o,n,r),Ll(o,n,r))}function wE(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function np(n,r){wE(n,r),(n=n.alternate)&&wE(n,r)}function IE(n){if(n.tag===13){var r=Ga(n,67108864);r!==null&&bn(r,n,67108864),np(n,67108864)}}var Ch=!0;function LI(n,r,o,u){var f=Y.T;Y.T=null;var m=ue.p;try{ue.p=2,ip(n,r,o,u)}finally{ue.p=m,Y.T=f}}function UI(n,r,o,u){var f=Y.T;Y.T=null;var m=ue.p;try{ue.p=8,ip(n,r,o,u)}finally{ue.p=m,Y.T=f}}function ip(n,r,o,u){if(Ch){var f=rp(u);if(f===null)Hm(n,r,u,Dh,o),CE(n,u);else if(zI(f,n,r,o,u))u.stopPropagation();else if(CE(n,u),r&4&&-1<BI.indexOf(n)){for(;f!==null;){var m=si(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Hn(m.pendingLanes);if(E!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var R=1<<31-nn(E);A.entanglements[1]|=R,E&=~R}pi(m),(Ge&6)===0&&(fh=hn()+500,eu(0))}}break;case 13:A=Ga(m,2),A!==null&&bn(A,m,2),mh(),np(m,2)}if(m=rp(u),m===null&&Hm(n,r,u,Dh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Hm(n,r,u,null,o)}}function rp(n){return n=_l(n),sp(n)}var Dh=null;function sp(n){if(Dh=null,n=ri(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Dh=n,null}function RE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gc()){case Ct:return 2;case Pt:return 8;case Ci:case cd:return 32;case ll:return 268435456;default:return 32}default:return 32}}var ap=!1,qr=null,Fr=null,jr=null,lu=new Map,uu=new Map,Hr=[],BI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CE(n,r){switch(n){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":lu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(r.pointerId)}}function cu(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=si(r),r!==null&&IE(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function zI(n,r,o,u,f){switch(r){case"focusin":return qr=cu(qr,n,r,o,u,f),!0;case"dragenter":return Fr=cu(Fr,n,r,o,u,f),!0;case"mouseover":return jr=cu(jr,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return lu.set(m,cu(lu.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,uu.set(m,cu(uu.get(m)||null,n,r,o,u,f)),!0}return!1}function DE(n){var r=ri(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,dd(n.priority,function(){if(o.tag===13){var u=Sn();u=cl(u);var f=Ga(o,u);f!==null&&bn(f,o,u),np(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=rp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);yl=u,o.target.dispatchEvent(u),yl=null}else return r=si(o),r!==null&&IE(r),n.blockedOn=o,!1;r.shift()}return!0}function NE(n,r,o){Nh(n)&&o.delete(r)}function qI(){ap=!1,qr!==null&&Nh(qr)&&(qr=null),Fr!==null&&Nh(Fr)&&(Fr=null),jr!==null&&Nh(jr)&&(jr=null),lu.forEach(NE),uu.forEach(NE)}function Vh(n,r){n.blockedOn===r&&(n.blockedOn=null,ap||(ap=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qI)))}var xh=null;function VE(n){xh!==n&&(xh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xh===n&&(xh=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(sp(u||o)===null)continue;break}var m=si(o);m!==null&&(n.splice(r,3),r-=3,sm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function hu(n){function r(R){return Vh(R,n)}qr!==null&&Vh(qr,n),Fr!==null&&Vh(Fr,n),jr!==null&&Vh(jr,n),lu.forEach(r),uu.forEach(r);for(var o=0;o<Hr.length;o++){var u=Hr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Hr.length&&(o=Hr[0],o.blockedOn===null);)DE(o),o.blockedOn===null&&Hr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[Ft]||null;if(typeof m=="function")E||VE(o);else if(E){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Ft]||null)A=E.formAction;else if(sp(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),VE(o)}}}function op(n){this._internalRoot=n}Oh.prototype.render=op.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Sn();bE(o,u,n,r,null,null)},Oh.prototype.unmount=op.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;bE(n.current,2,null,n,null,null),mh(),r[Ni]=null}};function Oh(n){this._internalRoot=n}Oh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Di();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Hr.length&&r!==0&&r<Hr[o].priority;o++);Hr.splice(o,0,n),o===0&&DE(n)}};var xE=e.version;if(xE!=="19.1.1")throw Error(i(527,xE,"19.1.1"));ue.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(r),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var FI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{ur=Mh.inject(FI),Yt=Mh}catch{}}return du.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=Y_,m=X_,E=$_,A=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=AE(n,1,!1,null,null,o,u,f,m,E,A,null),n[Ni]=r.current,jm(n),new op(r)},du.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=Y_,E=X_,A=$_,R=null,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(z=o.formState)),r=AE(n,1,!0,r,o??null,u,f,m,E,A,R,z),r.context=SE(null),o=r.current,u=Sn(),u=cl(u),f=Rr(u),f.callback=null,Cr(o,f,u),o=u,r.current.lanes=o,yt(r,o),pi(r),n[Ni]=r.current,jm(n),new Oh(r)},du.version="19.1.1",du}var FE;function WI(){if(FE)return cp.exports;FE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cp.exports=JI(),cp.exports}var eR=WI();const tR=H0(eR);/**
 * react-router v7.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jE="popstate";function nR(s={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Np("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Mu(a)}return rR(e,t,null,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bi(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iR(){return Math.random().toString(36).substring(2,10)}function HE(s,e){return{usr:s.state,key:s.key,idx:e}}function Np(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Zo(e):e,state:t,key:e&&e.key||i||iR()}}function Mu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Zo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function rR(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let F=_(),te=F==null?null:F-g;g=F,p&&p({action:d,location:K.location,delta:te})}function b(F,te){d="PUSH";let W=Np(K.location,F,te);g=_()+1;let ne=HE(W,g),ve=K.createHref(W);try{c.pushState(ne,"",ve)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;a.location.assign(ve)}l&&p&&p({action:d,location:K.location,delta:1})}function O(F,te){d="REPLACE";let W=Np(K.location,F,te);g=_();let ne=HE(W,g),ve=K.createHref(W);c.replaceState(ne,"",ve),l&&p&&p({action:d,location:K.location,delta:0})}function H(F){return sR(F)}let K={get action(){return d},get location(){return s(a,c)},listen(F){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(jE,T),p=F,()=>{a.removeEventListener(jE,T),p=null}},createHref(F){return e(a,F)},createURL:H,encodeLocation(F){let te=H(F);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:b,replace:O,go(F){return c.go(F)}};return K}function sR(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ft(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Mu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function G0(s,e,t="/"){return aR(s,e,t,!1)}function aR(s,e,t,i){let a=typeof e=="string"?Zo(e):e,l=er(a.pathname||"/",t);if(l==null)return null;let c=K0(s);oR(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=_R(l);d=gR(c[p],g,i)}return d}function K0(s,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Ji([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(ft(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),K0(c.children,e,b,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:mR(T,c.index),routesMeta:b})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of Q0(c.path))l(c,d,!0,p)}),e}function Q0(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=Q0(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function oR(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:pR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var lR=/^:[\w-]+$/,uR=3,cR=2,hR=1,fR=10,dR=-2,GE=s=>s==="*";function mR(s,e){let t=s.split("/"),i=t.length;return t.some(GE)&&(i+=dR),e&&(i+=cR),t.filter(a=>!GE(a)).reduce((a,l)=>a+(lR.test(l)?uR:l===""?hR:fR),i)}function pR(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function gR(s,e,t=!1){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=hf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),b=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=hf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ji([l,T.pathname]),pathnameBase:AR(Ji([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=Ji([l,T.pathnameBase]))}return c}function hf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=yR(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},b)=>{if(_==="*"){let H=d[b]||"";c=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const O=d[b];return T&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function yR(s,e=!1,t=!0){bi(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function _R(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function er(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function vR(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?Zo(s):s;return{pathname:t?t.startsWith("/")?t:ER(t,e):e,search:SR(i),hash:bR(a)}}function ER(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function mp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TR(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Y0(s){let e=TR(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function X0(s,e,t,i=!1){let a;typeof s=="string"?a=Zo(s):(a={...s},ft(!a.pathname||!a.pathname.includes("?"),mp("?","pathname","search",a)),ft(!a.pathname||!a.pathname.includes("#"),mp("#","pathname","hash",a)),ft(!a.search||!a.search.includes("#"),mp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let p=vR(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Ji=s=>s.join("/").replace(/\/\/+/g,"/"),AR=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),SR=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,bR=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function wR(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var $0=["POST","PUT","PATCH","DELETE"];new Set($0);var IR=["GET",...$0];new Set(IR);var Jo=$.createContext(null);Jo.displayName="DataRouter";var Lf=$.createContext(null);Lf.displayName="DataRouterState";$.createContext(!1);var Z0=$.createContext({isTransitioning:!1});Z0.displayName="ViewTransition";var RR=$.createContext(new Map);RR.displayName="Fetchers";var CR=$.createContext(null);CR.displayName="Await";var Ii=$.createContext(null);Ii.displayName="Navigation";var Zu=$.createContext(null);Zu.displayName="Location";var Ri=$.createContext({outlet:null,matches:[],isDataRoute:!1});Ri.displayName="Route";var mg=$.createContext(null);mg.displayName="RouteError";function DR(s,{relative:e}={}){ft(Ju(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext(Ii),{hash:a,pathname:l,search:c}=Wu(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ji([t,l])),i.createHref({pathname:d,search:c,hash:a})}function Ju(){return $.useContext(Zu)!=null}function Aa(){return ft(Ju(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Zu).location}var J0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W0(s){$.useContext(Ii).static||$.useLayoutEffect(s)}function NR(){let{isDataRoute:s}=$.useContext(Ri);return s?HR():VR()}function VR(){ft(Ju(),"useNavigate() may be used only in the context of a <Router> component.");let s=$.useContext(Jo),{basename:e,navigator:t}=$.useContext(Ii),{matches:i}=$.useContext(Ri),{pathname:a}=Aa(),l=JSON.stringify(Y0(i)),c=$.useRef(!1);return W0(()=>{c.current=!0}),$.useCallback((p,g={})=>{if(bi(c.current,J0),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=X0(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ji([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,s])}$.createContext(null);function xR(){let{matches:s}=$.useContext(Ri),e=s[s.length-1];return e?e.params:{}}function Wu(s,{relative:e}={}){let{matches:t}=$.useContext(Ri),{pathname:i}=Aa(),a=JSON.stringify(Y0(t));return $.useMemo(()=>X0(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function OR(s,e){return eA(s,e)}function eA(s,e,t,i,a){ft(Ju(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=$.useContext(Ii),{matches:c}=$.useContext(Ri),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let W=T&&T.path||"";tA(g,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let b=Aa(),O;if(e){let W=typeof e=="string"?Zo(e):e;ft(_==="/"||W.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),O=W}else O=b;let H=O.pathname||"/",K=H;if(_!=="/"){let W=_.replace(/^\//,"").split("/");K="/"+H.replace(/^\//,"").split("/").slice(W.length).join("/")}let F=G0(s,{pathname:K});bi(T||F!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),bi(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=UR(F&&F.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:Ji([_,l.encodeLocation?l.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:Ji([_,l.encodeLocation?l.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),c,t,i,a);return e&&te?$.createElement(Zu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},te):te}function MR(){let s=jR(),e=wR(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:a},t):null,c)}var PR=$.createElement(MR,null),kR=class extends $.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?$.createElement(Ri.Provider,{value:this.props.routeContext},$.createElement(mg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LR({routeContext:s,match:e,children:t}){let i=$.useContext(Jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Ri.Provider,{value:s},t)}function UR(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=g),_.route.id){let{loaderData:T,errors:b}=t,O=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||O){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,_,T)=>{let b,O=!1,H=null,K=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,H=_.route.errorElement||PR,d&&(p<0&&T===0?(tA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,K=null):p===T&&(O=!0,K=_.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,T+1)),te=()=>{let W;return b?W=H:O?W=K:_.route.Component?W=$.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=g,$.createElement(LR,{match:_,routeContext:{outlet:g,matches:F,isDataRoute:t!=null},children:W})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?$.createElement(kR,{location:t.location,revalidation:t.revalidation,component:H,error:b,children:te(),routeContext:{outlet:null,matches:F,isDataRoute:!0},unstable_onError:i}):te()},null)}function pg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BR(s){let e=$.useContext(Jo);return ft(e,pg(s)),e}function zR(s){let e=$.useContext(Lf);return ft(e,pg(s)),e}function qR(s){let e=$.useContext(Ri);return ft(e,pg(s)),e}function gg(s){let e=qR(s),t=e.matches[e.matches.length-1];return ft(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function FR(){return gg("useRouteId")}function jR(){let s=$.useContext(mg),e=zR("useRouteError"),t=gg("useRouteError");return s!==void 0?s:e.errors?.[t]}function HR(){let{router:s}=BR("useNavigate"),e=gg("useNavigate"),t=$.useRef(!1);return W0(()=>{t.current=!0}),$.useCallback(async(a,l={})=>{bi(t.current,J0),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var KE={};function tA(s,e,t){!e&&!KE[s]&&(KE[s]=!0,bi(!1,t))}$.memo(GR);function GR({routes:s,future:e,state:t,unstable_onError:i}){return eA(s,void 0,t,i,e)}function Gh(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KR({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ft(!Ju(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Zo(t));let{pathname:p="/",search:g="",hash:_="",state:T=null,key:b="default"}=t,O=$.useMemo(()=>{let H=er(p,c);return H==null?null:{location:{pathname:H,search:g,hash:_,state:T,key:b},navigationType:i}},[c,p,g,_,T,b,i]);return bi(O!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:$.createElement(Ii.Provider,{value:d},$.createElement(Zu.Provider,{children:e,value:O}))}function QR({children:s,location:e}){return OR(Vp(s),e)}function Vp(s,e=[]){let t=[];return $.Children.forEach(s,(i,a)=>{if(!$.isValidElement(i))return;let l=[...e,a];if(i.type===$.Fragment){t.push.apply(t,Vp(i.props.children,l));return}ft(i.type===Gh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Vp(i.props.children,l)),t.push(c)}),t}var Kh="get",Qh="application/x-www-form-urlencoded";function Uf(s){return s!=null&&typeof s.tagName=="string"}function YR(s){return Uf(s)&&s.tagName.toLowerCase()==="button"}function XR(s){return Uf(s)&&s.tagName.toLowerCase()==="form"}function $R(s){return Uf(s)&&s.tagName.toLowerCase()==="input"}function ZR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function JR(s,e){return s.button===0&&(!e||e==="_self")&&!ZR(s)}var Ph=null;function WR(){if(Ph===null)try{new FormData(document.createElement("form"),0),Ph=!1}catch{Ph=!0}return Ph}var e1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pp(s){return s!=null&&!e1.has(s)?(bi(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qh}"`),null):s}function t1(s,e){let t,i,a,l,c;if(XR(s)){let d=s.getAttribute("action");i=d?er(d,e):null,t=s.getAttribute("method")||Kh,a=pp(s.getAttribute("enctype"))||Qh,l=new FormData(s)}else if(YR(s)||$R(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(i=p?er(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||Kh,a=pp(s.getAttribute("formenctype"))||pp(d.getAttribute("enctype"))||Qh,l=new FormData(d,s),!WR()){let{name:g,type:_,value:T}=s;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,T)}}else{if(Uf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Kh,i=null,a=Qh,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function n1(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&er(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function i1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function s1(s,e,t){let i=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await i1(l,t);return c.links?c.links():[]}return[]}));return u1(i.flat(1).filter(r1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function QE(s,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function a1(s,e,{includeHydrateFallback:t}={}){return o1(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function o1(s){return[...new Set(s)]}function l1(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function u1(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let l=JSON.stringify(l1(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function nA(){let s=$.useContext(Jo);return yg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function c1(){let s=$.useContext(Lf);return yg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _g=$.createContext(void 0);_g.displayName="FrameworkContext";function iA(){let s=$.useContext(_g);return yg(s,"You must render this element inside a <HydratedRouter> element"),s}function h1(s,e){let t=$.useContext(_g),[i,a]=$.useState(!1),[l,c]=$.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,b=$.useRef(null);$.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let K=te=>{te.forEach(W=>{c(W.isIntersecting)})},F=new IntersectionObserver(K,{threshold:.5});return b.current&&F.observe(b.current),()=>{F.disconnect()}}},[s]),$.useEffect(()=>{if(i){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[i]);let O=()=>{a(!0)},H=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,b,{}]:[l,b,{onFocus:mu(d,O),onBlur:mu(p,H),onMouseEnter:mu(g,O),onMouseLeave:mu(_,H),onTouchStart:mu(T,O)}]:[!1,b,{}]}function mu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function f1({page:s,...e}){let{router:t}=nA(),i=$.useMemo(()=>G0(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?$.createElement(m1,{page:s,matches:i,...e}):null}function d1(s){let{manifest:e,routeModules:t}=iA(),[i,a]=$.useState([]);return $.useEffect(()=>{let l=!1;return s1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),i}function m1({page:s,matches:e,...t}){let i=Aa(),{manifest:a,routeModules:l}=iA(),{basename:c}=nA(),{loaderData:d,matches:p}=c1(),g=$.useMemo(()=>QE(s,e,p,a,i,"data"),[s,e,p,a,i]),_=$.useMemo(()=>QE(s,e,p,a,i,"assets"),[s,e,p,a,i]),T=$.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let H=new Set,K=!1;if(e.forEach(te=>{let W=a.routes[te.route.id];!W||!W.hasLoader||(!g.some(ne=>ne.route.id===te.route.id)&&te.route.id in d&&l[te.route.id]?.shouldRevalidate||W.hasClientLoader?K=!0:H.add(te.route.id))}),H.size===0)return[];let F=n1(s,c,"data");return K&&H.size>0&&F.searchParams.set("_routes",e.filter(te=>H.has(te.route.id)).map(te=>te.route.id).join(",")),[F.pathname+F.search]},[c,d,i,a,g,e,s,l]),b=$.useMemo(()=>a1(_,a),[_,a]),O=d1(_);return $.createElement($.Fragment,null,T.map(H=>$.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),b.map(H=>$.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),O.map(({key:H,link:K})=>$.createElement("link",{key:H,nonce:t.nonce,...K})))}function p1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rA&&(window.__reactRouterVersion="7.9.2")}catch{}function g1({basename:s,children:e,window:t}){let i=$.useRef();i.current==null&&(i.current=nR({window:t,v5Compat:!0}));let a=i.current,[l,c]=$.useState({action:a.action,location:a.location}),d=$.useCallback(p=>{$.startTransition(()=>c(p))},[c]);return $.useLayoutEffect(()=>a.listen(d),[a,d]),$.createElement(KR,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var sA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Po=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:T,...b},O){let{basename:H}=$.useContext(Ii),K=typeof g=="string"&&sA.test(g),F,te=!1;if(typeof g=="string"&&K&&(F=g,rA))try{let I=new URL(window.location.href),M=g.startsWith("//")?new URL(I.protocol+g):new URL(g),V=er(M.pathname,H);M.origin===I.origin&&V!=null?g=V+M.search+M.hash:te=!0}catch{bi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=DR(g,{relative:a}),[ne,ve,oe]=h1(i,b),_e=E1(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:T});function D(I){e&&e(I),I.defaultPrevented||_e(I)}let w=$.createElement("a",{...b,...oe,href:F||W,onClick:te||l?e:D,ref:p1(O,ve),target:p,"data-discover":!K&&t==="render"?"true":void 0});return ne&&!K?$.createElement($.Fragment,null,w,$.createElement(f1,{page:W})):w});Po.displayName="Link";var y1=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let T=Wu(c,{relative:g.relative}),b=Aa(),O=$.useContext(Lf),{navigator:H,basename:K}=$.useContext(Ii),F=O!=null&&w1(T)&&d===!0,te=H.encodeLocation?H.encodeLocation(T).pathname:T.pathname,W=b.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(W=W.toLowerCase(),ne=ne?ne.toLowerCase():null,te=te.toLowerCase()),ne&&K&&(ne=er(ne,K)||ne);const ve=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let oe=W===te||!a&&W.startsWith(te)&&W.charAt(ve)==="/",_e=ne!=null&&(ne===te||!a&&ne.startsWith(te)&&ne.charAt(te.length)==="/"),D={isActive:oe,isPending:_e,isTransitioning:F},w=oe?e:void 0,I;typeof i=="function"?I=i(D):I=[i,oe?"active":null,_e?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(D):l;return $.createElement(Po,{...g,"aria-current":w,className:I,ref:_,style:M,to:c,viewTransition:d},typeof p=="function"?p(D):p)});y1.displayName="NavLink";var _1=$.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Kh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,...b},O)=>{let H=S1(),K=b1(d,{relative:g}),F=c.toLowerCase()==="get"?"get":"post",te=typeof d=="string"&&sA.test(d),W=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let ve=ne.nativeEvent.submitter,oe=ve?.getAttribute("formmethod")||c;H(ve||ne.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return $.createElement("form",{ref:O,method:F,action:K,onSubmit:i?p:W,...b,"data-discover":!te&&s==="render"?"true":void 0})});_1.displayName="Form";function v1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aA(s){let e=$.useContext(Jo);return ft(e,v1(s)),e}function E1(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=NR(),p=Aa(),g=Wu(s,{relative:l});return $.useCallback(_=>{if(JR(_,e)){_.preventDefault();let T=t!==void 0?t:Mu(p)===Mu(g);d(s,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[p,d,g,t,i,e,s,a,l,c])}var T1=0,A1=()=>`__${String(++T1)}__`;function S1(){let{router:s}=aA("useSubmit"),{basename:e}=$.useContext(Ii),t=FR();return $.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:p,body:g}=t1(i,e);if(a.navigate===!1){let _=a.fetcherKey||A1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function b1(s,{relative:e}={}){let{basename:t}=$.useContext(Ii),i=$.useContext(Ri);ft(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Wu(s||".",{relative:e})},c=Aa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ji([t,l.pathname])),Mu(l)}function w1(s,{relative:e}={}){let t=$.useContext(Z0);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=aA("useViewTransitionState"),a=Wu(s,{relative:e});if(!t.isTransitioning)return!1;let l=er(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=er(t.nextLocation.pathname,i)||t.nextLocation.pathname;return hf(a.pathname,c)!=null||hf(a.pathname,l)!=null}function I1(){return Pe.jsxs("div",{className:"p-4",children:[Pe.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Spaced Repetition App"}),Pe.jsx(Po,{to:"/decks",className:"text-blue-500 underline",children:"Go to Decks"})]})}const R1=()=>{};var YE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},C1=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},lA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(b=64)),i.push(t[_],t[T],t[b],t[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(oA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):C1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new D1;const b=l<<2|d>>4;if(i.push(b),g!==64){const O=d<<4&240|g>>2;if(i.push(O),T!==64){const H=g<<6&192|T;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class D1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N1=function(s){const e=oA(s);return lA.encodeByteArray(e,!0)},ff=function(s){return N1(s).replace(/\./g,"")},uA=function(s){try{return lA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=()=>cA().__FIREBASE_DEFAULTS__,x1=()=>{if(typeof process>"u"||typeof YE>"u")return;const s=YE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},O1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&uA(s[1]);return e&&JSON.parse(e)},Bf=()=>{try{return R1()||V1()||x1()||O1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},hA=s=>Bf()?.emulatorHosts?.[s],M1=s=>{const e=hA(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},fA=()=>Bf()?.config,dA=s=>Bf()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mA(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ff(JSON.stringify(t)),ff(JSON.stringify(c)),""].join(".")}const bu={};function L1(){const s={prod:[],emulator:[]};for(const e of Object.keys(bu))bu[e]?s.emulator.push(e):s.prod.push(e);return s}function U1(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let XE=!1;function pA(s,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||bu[s]===e||bu[s]||XE)return;bu[s]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=L1().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,O){b.setAttribute("width","24"),b.setAttribute("id",O),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{XE=!0,c()},b}function _(b,O){b.setAttribute("id",O),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=U1(i),O=t("text"),H=document.getElementById(O)||document.createElement("span"),K=t("learnmore"),F=document.getElementById(K)||document.createElement("a"),te=t("preprendIcon"),W=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ne=b.element;d(ne),_(F,K);const ve=g();p(W,te),ne.append(W,H,F,ve),document.body.appendChild(ne)}l?(H.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function gA(){const s=Bf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function F1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const s=Ot();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function yA(){return!gA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){return!gA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vA(){try{return typeof indexedDB=="object"}catch{return!1}}function H1(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="FirebaseError";class ar extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=G1,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?K1(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ar(a,d,i)}}function K1(s,e){return s.replace(Q1,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Q1=/\{\$([^}]+)}/g;function Y1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ca(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=s[a],c=e[a];if($E(l)&&$E(c)){if(!ca(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function $E(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function X1(s,e){const t=new $1(s,e);return t.subscribe.bind(t)}class $1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Z1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=gp),a.error===void 0&&(a.error=gp),a.complete===void 0&&(a.complete=gp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z1(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(s){return s&&s._delegate?s._delegate:s}class ha{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new P1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:W1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W1(s){return s===Js?void 0:s}function eC(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new J1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const nC={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},iC=ke.INFO,rC={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},sC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=rC[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=sC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const aC=(s,e)=>e.some(t=>s instanceof t);let ZE,JE;function oC(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lC(){return JE||(JE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EA=new WeakMap,xp=new WeakMap,TA=new WeakMap,yp=new WeakMap,Eg=new WeakMap;function uC(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(ns(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&EA.set(t,s)}).catch(()=>{}),Eg.set(e,s),e}function cC(s){if(xp.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});xp.set(s,e)}let Op={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return xp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||TA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hC(s){Op=s(Op)}function fC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(_p(this),e,...t);return TA.set(i,e.sort?e.sort():[e]),ns(i)}:lC().includes(s)?function(...e){return s.apply(_p(this),e),ns(EA.get(this))}:function(...e){return ns(s.apply(_p(this),e))}}function dC(s){return typeof s=="function"?fC(s):(s instanceof IDBTransaction&&cC(s),aC(s,oC())?new Proxy(s,Op):s)}function ns(s){if(s instanceof IDBRequest)return uC(s);if(yp.has(s))return yp.get(s);const e=dC(s);return e!==s&&(yp.set(s,e),Eg.set(e,s)),e}const _p=s=>Eg.get(s);function mC(s,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=ns(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ns(c.result),p.oldVersion,p.newVersion,ns(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const pC=["get","getKey","getAll","getAllKeys","count"],gC=["put","add","delete","clear"],vp=new Map;function WE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=gC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||pC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return vp.set(e,l),l}hC(s=>({...s,get:(e,t,i)=>WE(e,t)||s.get(e,t,i),has:(e,t)=>!!WE(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_C(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function _C(s){return s.getComponent()?.type==="VERSION"}const Mp="@firebase/app",eT="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new vg("@firebase/app"),vC="@firebase/app-compat",EC="@firebase/analytics-compat",TC="@firebase/analytics",AC="@firebase/app-check-compat",SC="@firebase/app-check",bC="@firebase/auth",wC="@firebase/auth-compat",IC="@firebase/database",RC="@firebase/data-connect",CC="@firebase/database-compat",DC="@firebase/functions",NC="@firebase/functions-compat",VC="@firebase/installations",xC="@firebase/installations-compat",OC="@firebase/messaging",MC="@firebase/messaging-compat",PC="@firebase/performance",kC="@firebase/performance-compat",LC="@firebase/remote-config",UC="@firebase/remote-config-compat",BC="@firebase/storage",zC="@firebase/storage-compat",qC="@firebase/firestore",FC="@firebase/ai",jC="@firebase/firestore-compat",HC="firebase",GC="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",KC={[Mp]:"fire-core",[vC]:"fire-core-compat",[TC]:"fire-analytics",[EC]:"fire-analytics-compat",[SC]:"fire-app-check",[AC]:"fire-app-check-compat",[bC]:"fire-auth",[wC]:"fire-auth-compat",[IC]:"fire-rtdb",[RC]:"fire-data-connect",[CC]:"fire-rtdb-compat",[DC]:"fire-fn",[NC]:"fire-fn-compat",[VC]:"fire-iid",[xC]:"fire-iid-compat",[OC]:"fire-fcm",[MC]:"fire-fcm-compat",[PC]:"fire-perf",[kC]:"fire-perf-compat",[LC]:"fire-rc",[UC]:"fire-rc-compat",[BC]:"fire-gcs",[zC]:"fire-gcs-compat",[qC]:"fire-fst",[jC]:"fire-fst-compat",[FC]:"fire-vertex","fire-js":"fire-js",[HC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Map,QC=new Map,kp=new Map;function tT(s,e){try{s.container.addComponent(e)}catch(t){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ko(s){const e=s.name;if(kp.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,s);for(const t of df.values())tT(t,s);for(const t of QC.values())tT(t,s);return!0}function Tg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function yi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new ec("app","Firebase",YC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=GC;function AA(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Pp,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw is.create("bad-app-name",{appName:String(a)});if(t||(t=fA()),!t)throw is.create("no-options");const l=df.get(a);if(l){if(ca(t,l.options)&&ca(i,l.config))return l;throw is.create("duplicate-app",{appName:a})}const c=new tC(a);for(const p of kp.values())c.addComponent(p);const d=new XC(t,i,c);return df.set(a,d),d}function SA(s=Pp){const e=df.get(s);if(!e&&s===Pp&&fA())return AA();if(!e)throw is.create("no-app",{appName:s});return e}function rs(s,e,t){let i=KC[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(c.join(" "));return}ko(new ha(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebase-heartbeat-database",ZC=1,Pu="firebase-heartbeat-store";let Ep=null;function bA(){return Ep||(Ep=mC($C,ZC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Pu)}catch(t){console.warn(t)}}}}).catch(s=>{throw is.create("idb-open",{originalErrorMessage:s.message})})),Ep}async function JC(s){try{const t=(await bA()).transaction(Pu),i=await t.objectStore(Pu).get(wA(s));return await t.done,i}catch(e){if(e instanceof ar)tr.warn(e.message);else{const t=is.create("idb-get",{originalErrorMessage:e?.message});tr.warn(t.message)}}}async function nT(s,e){try{const i=(await bA()).transaction(Pu,"readwrite");await i.objectStore(Pu).put(e,wA(s)),await i.done}catch(t){if(t instanceof ar)tr.warn(t.message);else{const i=is.create("idb-set",{originalErrorMessage:t?.message});tr.warn(i.message)}}}function wA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1024,eD=30;class tD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=iT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>eD){const a=rD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=iT(),{heartbeatsToSend:t,unsentEntries:i}=nD(this._heartbeatsCache.heartbeats),a=ff(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return tr.warn(e),""}}}function iT(){return new Date().toISOString().substring(0,10)}function nD(s,e=WC){const t=[];let i=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),rT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),rT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class iD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vA()?H1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rT(s){return ff(JSON.stringify({version:2,heartbeats:s})).length}function rD(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(s){ko(new ha("platform-logger",e=>new yC(e),"PRIVATE")),ko(new ha("heartbeat",e=>new tD(e),"PRIVATE")),rs(Mp,eT,s),rs(Mp,eT,"esm2020"),rs("fire-js","")}sD("");var sT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,IA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function I(){}I.prototype=w.prototype,D.F=w.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(M,V,k){for(var C=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)C[dt-2]=arguments[dt];return w.prototype[V].apply(M,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var V=0;V<16;++V)M[V]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(V=0;V<16;++V)M[V]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=D.g[0],I=D.g[1],V=D.g[2];let k=D.g[3],C;C=w+(k^I&(V^k))+M[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(V^w&(I^V))+M[1]+3905402710&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(I^k&(w^I))+M[2]+606105819&4294967295,V=k+(C<<17&4294967295|C>>>15),C=I+(w^V&(k^w))+M[3]+3250441966&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(k^I&(V^k))+M[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(V^w&(I^V))+M[5]+1200080426&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(I^k&(w^I))+M[6]+2821735955&4294967295,V=k+(C<<17&4294967295|C>>>15),C=I+(w^V&(k^w))+M[7]+4249261313&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(k^I&(V^k))+M[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(V^w&(I^V))+M[9]+2336552879&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(I^k&(w^I))+M[10]+4294925233&4294967295,V=k+(C<<17&4294967295|C>>>15),C=I+(w^V&(k^w))+M[11]+2304563134&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(k^I&(V^k))+M[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(V^w&(I^V))+M[13]+4254626195&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(I^k&(w^I))+M[14]+2792965006&4294967295,V=k+(C<<17&4294967295|C>>>15),C=I+(w^V&(k^w))+M[15]+1236535329&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(V^k&(I^V))+M[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^V&(w^I))+M[6]+3225465664&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(k^w))+M[11]+643717713&4294967295,V=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(V^k))+M[0]+3921069994&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(I^V))+M[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^V&(w^I))+M[10]+38016083&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(k^w))+M[15]+3634488961&4294967295,V=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(V^k))+M[4]+3889429448&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(I^V))+M[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^V&(w^I))+M[14]+3275163606&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(k^w))+M[3]+4107603335&4294967295,V=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(V^k))+M[8]+1163531501&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(I^V))+M[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^V&(w^I))+M[2]+4243563512&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(k^w))+M[7]+1735328473&4294967295,V=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(V^k))+M[12]+2368359562&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(I^V^k)+M[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^V)+M[8]+2272392833&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^I)+M[11]+1839030562&4294967295,V=k+(C<<16&4294967295|C>>>16),C=I+(V^k^w)+M[14]+4259657740&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^k)+M[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^V)+M[4]+1272893353&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^I)+M[7]+4139469664&4294967295,V=k+(C<<16&4294967295|C>>>16),C=I+(V^k^w)+M[10]+3200236656&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^k)+M[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^V)+M[0]+3936430074&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^I)+M[3]+3572445317&4294967295,V=k+(C<<16&4294967295|C>>>16),C=I+(V^k^w)+M[6]+76029189&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^k)+M[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^V)+M[12]+3873151461&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^I)+M[15]+530742520&4294967295,V=k+(C<<16&4294967295|C>>>16),C=I+(V^k^w)+M[2]+3299628645&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(V^(I|~k))+M[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~V))+M[7]+1126891415&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~I))+M[14]+2878612391&4294967295,V=k+(C<<15&4294967295|C>>>17),C=I+(k^(V|~w))+M[5]+4237533241&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~k))+M[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~V))+M[3]+2399980690&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~I))+M[10]+4293915773&4294967295,V=k+(C<<15&4294967295|C>>>17),C=I+(k^(V|~w))+M[1]+2240044497&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~k))+M[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~V))+M[15]+4264355552&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~I))+M[6]+2734768916&4294967295,V=k+(C<<15&4294967295|C>>>17),C=I+(k^(V|~w))+M[13]+1309151649&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~k))+M[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~V))+M[11]+3174756917&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~I))+M[2]+718787259&4294967295,V=k+(C<<15&4294967295|C>>>17),C=I+(k^(V|~w))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.v=function(D,w){w===void 0&&(w=D.length);const I=w-this.blockSize,M=this.C;let V=this.h,k=0;for(;k<w;){if(V==0)for(;k<=I;)a(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<w;)if(M[V++]=D.charCodeAt(k++),V==this.blockSize){a(this,M),V=0;break}}else for(;k<w;)if(M[V++]=D[k++],V==this.blockSize){a(this,M),V=0;break}}this.h=V,this.o+=w},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)D[w++]=this.g[I]>>>M&255;return D};function l(D,w){var I=d;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=w(D)}function c(D,w){this.h=w;const I=[];let M=!0;for(let V=D.length-1;V>=0;V--){const k=D[V]|0;M&&k==w||(I[V]=k,M=!1)}this.g=I}var d={};function p(D){return-128<=D&&D<128?l(D,function(w){return new c([w|0],w<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return F(g(-D));const w=[];let I=1;for(let M=0;D>=I;M++)w[M]=D/I|0,I*=4294967296;return new c(w,0)}function _(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return F(_(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let M=T;for(let k=0;k<D.length;k+=8){var V=Math.min(8,D.length-k);const C=parseInt(D.substring(k,k+V),w);V<8?(V=g(Math.pow(w,V)),M=M.j(V).add(g(C))):(M=M.j(I),M=M.add(g(C)))}return M}var T=p(0),b=p(1),O=p(16777216);s=c.prototype,s.m=function(){if(K(this))return-F(this).m();let D=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);D+=(M>=0?M:4294967296+M)*w,w*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(K(this))return"-"+F(this).toString(D);const w=g(Math.pow(D,6));var I=this;let M="";for(;;){const V=ve(I,w).g;I=te(I,V.j(w));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=V,H(I))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function K(D){return D.h==-1}s.l=function(D){return D=te(this,D),K(D)?-1:H(D)?0:1};function F(D){const w=D.g.length,I=[];for(let M=0;M<w;M++)I[M]=~D.g[M];return new c(I,~D.h).add(b)}s.abs=function(){return K(this)?F(this):this},s.add=function(D){const w=Math.max(this.g.length,D.g.length),I=[];let M=0;for(let V=0;V<=w;V++){let k=M+(this.i(V)&65535)+(D.i(V)&65535),C=(k>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);M=C>>>16,k&=65535,C&=65535,I[V]=C<<16|k}return new c(I,I[I.length-1]&-2147483648?-1:0)};function te(D,w){return D.add(F(w))}s.j=function(D){if(H(this)||H(D))return T;if(K(this))return K(D)?F(this).j(F(D)):F(F(this).j(D));if(K(D))return F(this.j(F(D)));if(this.l(O)<0&&D.l(O)<0)return g(this.m()*D.m());const w=this.g.length+D.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<D.g.length;V++){const k=this.i(M)>>>16,C=this.i(M)&65535,dt=D.i(V)>>>16,st=D.i(V)&65535;I[2*M+2*V]+=C*st,W(I,2*M+2*V),I[2*M+2*V+1]+=k*st,W(I,2*M+2*V+1),I[2*M+2*V+1]+=C*dt,W(I,2*M+2*V+1),I[2*M+2*V+2]+=k*dt,W(I,2*M+2*V+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new c(I,0)};function W(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function ne(D,w){this.g=D,this.h=w}function ve(D,w){if(H(w))throw Error("division by zero");if(H(D))return new ne(T,T);if(K(D))return w=ve(F(D),w),new ne(F(w.g),F(w.h));if(K(w))return w=ve(D,F(w)),new ne(F(w.g),w.h);if(D.g.length>30){if(K(D)||K(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,M=w;M.l(D)<=0;)I=oe(I),M=oe(M);var V=_e(I,1),k=_e(M,1);for(M=_e(M,2),I=_e(I,2);!H(M);){var C=k.add(M);C.l(D)<=0&&(V=V.add(I),k=C),M=_e(M,1),I=_e(I,1)}return w=te(D,V.j(w)),new ne(V,w)}for(V=T;D.l(w)>=0;){for(I=Math.max(1,Math.floor(D.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=g(I),C=k.j(w);K(C)||C.l(D)>0;)I-=M,k=g(I),C=k.j(w);H(k)&&(k=b),V=V.add(k),D=te(D,C)}return new ne(V,D)}s.B=function(D){return ve(this,D).h},s.and=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&D.i(M);return new c(I,this.h&D.h)},s.or=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|D.i(M);return new c(I,this.h|D.h)},s.xor=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^D.i(M);return new c(I,this.h^D.h)};function oe(D){const w=D.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=D.i(M)<<1|D.i(M-1)>>>31;return new c(I,D.h)}function _e(D,w){const I=w>>5;w%=32;const M=D.g.length-I,V=[];for(let k=0;k<M;k++)V[k]=w>0?D.i(k+I)>>>w|D.i(k+I+1)<<32-w:D.i(k+I);return new c(V,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,IA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ss=c}).apply(typeof sT<"u"?sT:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RA,Eu,CA,Yh,Lp,DA,NA,VA;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in v))break e;v=v[B]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=p,g.apply(null,arguments)}function _(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,B,G){for(var re=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)re[Re-2]=arguments[Re];return y.prototype[B].apply(S,re)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function H(h,y){for(let S=1;S<arguments.length;S++){const B=arguments[S];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=h.length||0;const G=B.length||0;h.length=v+G;for(let re=0;re<G;re++)h[v+re]=B[re]}else h.push(B)}}class K{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){c.setTimeout(()=>{throw h},0)}function te(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,v){const S=ne.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ne=new K(()=>new ve,h=>h.reset());class ve{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,_e=!1,D=new W,w=()=>{const h=Promise.resolve(void 0);oe=()=>{h.then(I)}};function I(){for(var h;h=te();){try{h.h.call(h.g)}catch(v){F(v)}var y=ne;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}_e=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function dt(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(dt,V),dt.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(h,y,v,S,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=B,this.key=++Y,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function N(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function ee(h){const y={};for(const v in h)y[v]=h[v];return y}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)h[v]=S[v];for(let G=0;G<ce.length;G++)v=ce[G],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,y,v,S,B){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const re=Ae(h,y,S,B);return re>-1?(y=h[re],v||(y.fa=!1)):(y=new ue(y,this.src,G,!!S,B),y.fa=v,h.push(y)),y};function Me(h,y){const v=y.type;if(v in h.g){var S=h.g[v],B=Array.prototype.indexOf.call(S,y,void 0),G;(G=B>=0)&&Array.prototype.splice.call(S,B,1),G&&(ge(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ae(h,y,v,S){for(let B=0;B<h.length;++B){const G=h[B];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==S)return B}return-1}var qt="closure_lm_"+(Math.random()*1e6|0),$e={};function jn(h,y,v,S,B){if(Array.isArray(y)){for(let G=0;G<y.length;G++)jn(h,y[G],v,S,B);return null}return v=gc(v),h&&h[st]?h.J(y,v,d(S)?!!S.capture:!1,B):al(h,y,v,!1,S,B)}function al(h,y,v,S,B,G){if(!y)throw Error("Invalid event type");const re=d(B)?!!B.capture:!!B;let Re=ol(h);if(Re||(h[qt]=Re=new pe(h)),v=Re.add(y,v,S,re,G),v.proxy)return v;if(S=wa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(B=re),B===void 0&&(B=!1),h.addEventListener(y.toString(),S,B);else if(h.attachEvent)h.attachEvent(Ra(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wa(){function h(v){return y.call(h.src,h.listener,v)}const y=ud;return h}function Ia(h,y,v,S,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)Ia(h,y[G],v,S,B);else S=d(S)?!!S.capture:!!S,v=gc(v),h&&h[st]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],v=Ae(y,v,S,B),v>-1&&(ge(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=ol(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,v,S,B)),(v=h>-1?y[h]:null)&&ms(v))}function ms(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[st])Me(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(Ra(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=ol(y))?(Me(v,h),v.h==0&&(v.src=null,y[qt]=null)):ge(h)}}}function Ra(h){return h in $e?$e[h]:$e[h]="on"+h}function ud(h,y){if(h.da)h=!0;else{y=new dt(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&ms(h),h=v.call(S,y)}return h}function ol(h){return h=h[qt],h instanceof pe?h:null}var hn="__closure_events_fn_"+(Math.random()*1e9>>>0);function gc(h){return typeof h=="function"?h:(h[hn]||(h[hn]=function(y){return h.handleEvent(y)}),h[hn])}function Ct(){M.call(this),this.i=new pe(this),this.M=this,this.G=null}T(Ct,M),Ct.prototype[st]=!0,Ct.prototype.removeEventListener=function(h,y,v,S){Ia(this,h,y,v,S)};function Pt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var B=y;y=new V(S,h),le(y,B)}B=!0;let G,re;if(v)for(re=v.length-1;re>=0;re--)G=y.g=v[re],B=Ci(G,S,!0,y)&&B;if(G=y.g=h,B=Ci(G,S,!0,y)&&B,B=Ci(G,S,!1,y)&&B,v)for(re=0;re<v.length;re++)G=y.g=v[re],B=Ci(G,S,!1,y)&&B}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)ge(v[S]);delete h.g[y],h.h--}}this.G=null},Ct.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ct.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Ci(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let G=0;G<y.length;++G){const re=y[G];if(re&&!re.da&&re.capture==v){const Re=re.listener,rt=re.ha||re.src;re.fa&&Me(h.i,re),B=Re.call(rt,S)!==!1&&B}}return B&&!S.defaultPrevented}function cd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ll(h){h.g=cd(()=>{h.g=null,h.i&&(h.i=!1,ll(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hd extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ll(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(h){M.call(this),this.h=h,this.g={}}T(ps,M);var ur=[];function Yt(h){ze(h.g,function(y,v){this.g.hasOwnProperty(v)&&ms(y)},h),h.g={}}ps.prototype.N=function(){ps.Z.N.call(this),Yt(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=c.JSON.stringify,nn=c.JSON.parse,fd=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function yc(){}function _c(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cr(){V.call(this,"d")}T(cr,V);function Hn(){V.call(this,"c")}T(Hn,V);var Dn={},hr=null;function Ca(){return hr=hr||new Ct}Dn.Ia="serverreachability";function ul(h){V.call(this,Dn.Ia,h)}T(ul,V);function fr(h){const y=Ca();Pt(y,new ul(y))}Dn.STAT_EVENT="statevent";function Da(h,y){V.call(this,Dn.STAT_EVENT,h),this.stat=y}T(Da,V);function yt(h){const y=Ca();Pt(y,new Da(y,h))}Dn.Ja="timingevent";function vc(h,y){V.call(this,Dn.Ja,h),this.size=y}T(vc,V);function dr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function mr(){this.g=!0}mr.prototype.ua=function(){this.g=!1};function cl(h,y,v,S,B,G){h.info(function(){if(h.g)if(G){var re="",Re=G.split("&");for(let He=0;He<Re.length;He++){var rt=Re[He].split("=");if(rt.length>1){const Et=rt[0];rt=rt[1];const yn=Et.split("_");re=yn.length>=2&&yn[1]=="type"?re+(Et+"="+rt+"&"):re+(Et+"=redacted&")}}}else re=null;else re=G;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+v+`
`+re})}function hl(h,y,v,S,B,G,re){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+v+`
`+G+" "+re})}function Di(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ii(h,v)+(S?" "+S:"")})}function dd(h,y){h.info(function(){return"TIMEOUT: "+y})}mr.prototype.info=function(){};function ii(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let re=1;re<S.length;re++)S[re]=""}}}}return Cn(G)}catch{return y}}var _t={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ft={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ni;function gs(){}T(gs,yc),gs.prototype.g=function(){return new XMLHttpRequest},Ni=new gs;function ys(h){return encodeURIComponent(String(h))}function md(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Gn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new ps(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pr}function pr(){this.i=null,this.g="",this.h=!1}var Na={},ri={};function si(h,y,v){h.M=1,h.A=xi(ut(y)),h.u=v,h.R=!0,gr(h,null)}function gr(h,y){h.F=Date.now(),_s(h),h.B=ut(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Sc(v.i,"t",S),h.C=0,v=h.j.L,h.h=new pr,h.g=za(h.j,v?y:null,!h.u),h.P>0&&(h.O=new hd(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(ur[0]=B.toString()),B=ur);for(let G=0;G<B.length;G++){const re=jn(v,B[G],S||y.handleEvent,!1,y.h||y);if(!re)break;y.g[re.key]=re}y=h.J?ee(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),fr(),cl(h.i,h.v,h.B,h.l,h.S,h.u)}Gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xt(h)==3?y.j():this.Y(h)},Gn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Xt(this.g),rt=this.g.ya(),He=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Ds(this.g)))){this.K||Re!=4||rt==7||(rt==8||He<=0?fr(3):fr(2)),oi(this);var y=this.g.ca();this.X=y;var v=yr(this);if(this.o=y==200,hl(this.i,this.v,this.B,this.l,this.S,Re,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var G=S;break t}}G=null}if(h=G)Di(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Va(this,h);else{this.o=!1,this.m=3,yt(12),li(this),vs(this);break e}}if(this.R){h=!0;let Et;for(;!this.K&&this.C<v.length;)if(Et=Ec(this,v),Et==ri){Re==4&&(this.m=4,yt(14),h=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Na){this.m=4,yt(15),Di(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Di(this.i,this.l,Et,null),Va(this,Et);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,yt(16),h=!1),this.o=this.o&&h,!h)Di(this.i,this.l,v,"[Invalid Chunked Response]"),li(this),vs(this);else if(v.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Tl(re),re.P=!0,yt(11))}}else Di(this.i,this.l,v,null),Va(this,v);Re==4&&li(this),this.o&&!this.K&&(Re==4?Al(this.j,this):(this.o=!1,_s(this)))}else Ns(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),li(this),vs(this)}}}catch{}finally{}};function yr(h){if(!vt(h))return h.g.la();const y=Ds(h.g);if(y==="")return"";let v="";const S=y.length,B=Xt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return li(h),vs(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<S;G++)h.h.h=!0,v+=h.h.i.decode(y[G],{stream:!(B&&G==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function vt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ec(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?ri:(v=Number(y.substring(v,S)),isNaN(v)?Na:(S+=1,S+v>y.length?ri:(y=y.slice(S,S+v),h.C=S+v,y)))}Gn.prototype.cancel=function(){this.K=!0,li(this)};function _s(h){h.T=Date.now()+h.H,ai(h,h.H)}function ai(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=dr(g(h.aa,h),y)}function oi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(dd(this.i,this.B),this.M!=2&&(fr(),yt(17)),li(this),this.m=2,vs(this)):ai(this,this.T-h)};function vs(h){h.j.I==0||h.K||Al(h.j,h)}function li(h){oi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Yt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Va(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||As(v.h,h))){if(!h.L&&As(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ba(v),ui(v);else break e;El(v),yt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=dr(g(v.Va,v),6e3));Nn(v.h)<=1&&v.ta&&(v.ta=void 0)}else Pi(v,11)}else if((h.L||v.g==h)&&Ba(v),!C(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let He=B[y];const Et=He[0];if(!(Et<=v.K))if(v.K=Et,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const yn=He[3];yn!=null&&(v.ka=yn,v.j.info("VER="+v.ka));const ci=He[4];ci!=null&&(v.za=ci,v.j.info("SVER="+v.za));const Yn=He[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(S=1.5*Yn,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Xn=h.g;if(Xn){const $n=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var G=S.h;G.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(xa(G,G.h),G.h=null))}if(S.G){const bl=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(S.wa=bl,Ze(S.J,S.G,bl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var re=h;if(S.na=xc(S,S.L?S.ba:null,S.W),re.L){Vi(S.h,re);var Re=re,rt=S.O;rt&&(Re.H=rt),Re.D&&(oi(Re),_s(Re)),S.g=re}else Cc(S);v.i.length>0&&Ms(v)}else He[0]!="stop"&&He[0]!="close"||Pi(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Pi(v,7):xs(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}fr(4)}catch{}}var pd=class{constructor(h,y){this.g=h,this.map=y}};function Es(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ts(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nn(h){return h.h?1:h.g?h.g.size:0}function As(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function xa(h,y){h.g?h.g.add(y):h.h=y}function Vi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Es.prototype.cancel=function(){if(this.i=Oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return O(h.i)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let B,G=null;S>=0?(B=h[v].substring(0,S),G=h[v].substring(S+1)):B=h[v],y(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Kn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Kn?(this.l=h.l,_r(this,h.j),this.o=h.o,this.g=h.g,Ss(this,h.u),this.h=h.h,vr(this,bc(h.i)),this.m=h.m):h&&(y=String(h).match(Ma))?(this.l=!1,_r(this,y[1]||"",!0),this.o=bs(y[2]||""),this.g=bs(y[3]||"",!0),Ss(this,y[4]),this.h=bs(y[5]||"",!0),vr(this,y[6]||"",!0),this.m=bs(y[7]||"")):(this.l=!1,this.i=new Vn(null,this.l))}Kn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(kt(y,dl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(kt(y,dl,!0),"@"),h.push(ys(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(kt(v,v.charAt(0)=="/"?Er:ml,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",kt(v,Ac)),h.join("")},Kn.prototype.resolve=function(h){const y=ut(this);let v=!!h.j;v?_r(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Ss(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=y.h.lastIndexOf("/");B!=-1&&(S=y.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let re=0;re<B.length;){const Re=B[re++];Re=="."?S&&re==B.length&&G.push(""):Re==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&re==B.length&&G.push("")):(G.push(Re),S=!0)}S=G.join("/")}else S=B}return v?y.h=S:v=h.i.toString()!=="",v?vr(y,bc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function ut(h){return new Kn(h)}function _r(h,y,v){h.j=v?bs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ss(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function vr(h,y,v){y instanceof Vn?(h.i=y,yl(h.i,h.l)):(v||(y=kt(y,Tc)),h.i=new Vn(y,h.l))}function Ze(h,y,v){h.i.set(y,v)}function xi(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function bs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kt(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fl),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var dl=/[#\/\?@]/g,ml=/[#\?:]/g,Er=/[#\?]/g,Tc=/[#\?@]/g,Ac=/#/g;function Vn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Oi(h){h.g||(h.g=new Map,h.h=0,h.i&&gd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Vn.prototype,s.add=function(h,y){Oi(this),this.i=null,h=Qn(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function pl(h,y){Oi(h),y=Qn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function gl(h,y){return Oi(h),y=Qn(h,y),h.g.has(y)}s.forEach=function(h,y){Oi(this),this.g.forEach(function(v,S){v.forEach(function(B){h.call(y,B,S,this)},this)},this)};function Pa(h,y){Oi(h);let v=[];if(typeof y=="string")gl(h,y)&&(v=v.concat(h.g.get(Qn(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return Oi(this),this.i=null,h=Qn(this,h),gl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Pa(this,h),h.length>0?String(h[0]):y):y};function Sc(h,y,v){pl(h,y),v.length>0&&(h.i=null,h.g.set(Qn(h,y),O(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const B=ys(v);v=Pa(this,v);for(let G=0;G<v.length;G++){let re=B;v[G]!==""&&(re+="="+ys(v[G])),h.push(re)}}return this.i=h.join("&")};function bc(h){const y=new Vn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Qn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function yl(h,y){y&&!h.j&&(Oi(h),h.i=null,h.g.forEach(function(v,S){const B=S.toLowerCase();S!=B&&(pl(this,S),Sc(this,B,v))},h)),h.j=y}function _l(h,y){const v=new mr;if(c.Image){const S=new Image;S.onload=_(rn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=_(rn,v,"TestLoadImage: error",!1,y,S),S.onabort=_(rn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(rn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Tr(h,y){const v=new mr,S=new AbortController,B=setTimeout(()=>{S.abort(),rn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(G=>{clearTimeout(B),G.ok?rn(v,"TestPingServer: ok",!0,y):rn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),rn(v,"TestPingServer: error",!1,y)})}function rn(h,y,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function wc(){this.g=new fd}function ws(h){this.i=h.Sb||null,this.h=h.ab||!1}T(ws,yc),ws.prototype.g=function(){return new Is(this.i,this.h)};function Is(h,y){Ct.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Is,Ct),s=Is.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Mi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ar(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ar(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?sn(this):Mi(this),this.readyState==3&&Ar(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,sn(this))},s.Na=function(h){this.g&&(this.response=h,sn(this))},s.ga=function(){this.g&&sn(this)};function sn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Mi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Mi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Sr(h){let y="";return ze(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function xn(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Sr(v),typeof h=="string"?v!=null&&ys(v):Ze(h,y,v))}function nt(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var ka=/^https?$/i,Ic=["POST","PUT"];s=nt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ni.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){Rs(this,G);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())v.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ic,y,void 0)>=0)||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,re]of v)this.g.setRequestHeader(G,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){Rs(this,G)}};function Rs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Cs(h),Dt(h)}function Cs(h){h.A||(h.A=!0,Pt(h,"complete"),Pt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Pt(this,"complete"),Pt(this,"abort"),Dt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dt(this,!0)),nt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?vl(this):this.Xa())},s.Xa=function(){vl(this)};function vl(h){if(h.h&&typeof l<"u"){if(h.v&&Xt(h)==4)setTimeout(h.Ca.bind(h),0);else if(Pt(h,"readystatechange"),Xt(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=G===0){let re=String(h.D).match(Ma)[1]||null;!re&&c.self&&c.self.location&&(re=c.self.location.protocol.slice(0,-1)),S=!ka.test(re?re.toLowerCase():"")}v=S}if(v)Pt(h,"complete"),Pt(h,"success");else{h.o=6;try{var B=Xt(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Cs(h)}}finally{Dt(h)}}}}function Dt(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Pt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xt(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Xt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),nn(y)}};function Ds(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ns(h){const y={};h=(h.g&&Xt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(C(h[S]))continue;var v=md(h[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[B]||[];y[B]=G,G.push(v)}N(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function La(h){this.za=0,this.i=[],this.j=new mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vs("baseRetryDelayMs",5e3,h),this.Za=Vs("retryDelaySeedMs",1e4,h),this.Ta=Vs("forwardChannelMaxRetries",2,h),this.va=Vs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Es(h&&h.concurrentRequestLimit),this.Ba=new wc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=La.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){yt(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=xc(this,null,this.W),Ms(this)};function xs(h){if(Os(h),h.I==3){var y=h.V++,v=ut(h.J);if(Ze(v,"SID",h.M),Ze(v,"RID",y),Ze(v,"TYPE","terminate"),Ps(h,v),y=new Gn(h,h.j,y),y.M=2,y.A=xi(ut(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=za(y.j,null),y.g.ea(y.A)),y.F=Date.now(),_s(y)}Vc(h)}function ui(h){h.g&&(Tl(h),h.g.cancel(),h.g=null)}function Os(h){ui(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ba(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ms(h){if(!Ts(h.h)&&!h.m){h.m=!0;var y=h.Ea;oe||w(),_e||(oe(),_e=!0),D.add(y,h),h.D=0}}function yd(h,y){return Nn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=dr(g(h.Ea,h,y),Nc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Gn(this,this.j,h);let G=this.o;if(this.U&&(G?(G=ee(G),le(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Ua(this,B,y),v=ut(this.J),Ze(v,"RID",h),Ze(v,"CVER",22),this.G&&Ze(v,"X-HTTP-Session-Id",this.G),Ps(this,v),G&&(this.R?y="headers="+ys(Sr(G))+"&"+y:this.u&&xn(v,this.u,G)),xa(this.h,B),this.Ra&&Ze(v,"TYPE","init"),this.S?(Ze(v,"$req",y),Ze(v,"SID","null"),B.U=!0,si(B,v,null)):si(B,v,y),this.I=2}}else this.I==3&&(h?Rc(this,h):this.i.length==0||Ts(this.h)||Rc(this))};function Rc(h,y){var v;y?v=y.l:v=h.V++;const S=ut(h.J);Ze(S,"SID",h.M),Ze(S,"RID",v),Ze(S,"AID",h.K),Ps(h,S),h.u&&h.o&&xn(S,h.u,h.o),v=new Gn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ua(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xa(h.h,v),si(v,S,y)}function Ps(h,y){h.H&&ze(h.H,function(v,S){Ze(y,S,v)}),h.l&&ze({},function(v,S){Ze(y,S,v)})}function Ua(h,y,v){v=Math.min(h.i.length,v);const S=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let Re=-1;for(;;){const rt=["count="+v];Re==-1?v>0?(Re=B[0].g,rt.push("ofs="+Re)):Re=0:rt.push("ofs="+Re);let He=!0;for(let Et=0;Et<v;Et++){var G=B[Et].g;const yn=B[Et].map;if(G-=Re,G<0)Re=Math.max(0,B[Et].g-100),He=!1;else try{G="req"+G+"_"||"";try{var re=yn instanceof Map?yn:Object.entries(yn);for(const[ci,Yn]of re){let Xn=Yn;d(Yn)&&(Xn=Cn(Yn)),rt.push(G+ci+"="+encodeURIComponent(Xn))}}catch(ci){throw rt.push(G+"type="+encodeURIComponent("_badmap")),ci}}catch{S&&S(yn)}}if(He){re=rt.join("&");break e}}re=void 0}return h=h.i.splice(0,v),y.G=h,re}function Cc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;oe||w(),_e||(oe(),_e=!0),D.add(y,h),h.A=0}}function El(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=dr(g(h.Da,h),Nc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Dc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=dr(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),ui(this),Dc(this))};function Tl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Dc(h){h.g=new Gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ut(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),Ps(h,y),h.u&&h.o&&xn(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=xi(ut(y)),v.u=null,v.R=!0,gr(v,h)}s.Va=function(){this.C!=null&&(this.C=null,ui(this),El(this),yt(19))};function Ba(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Al(h,y){var v=null;if(h.g==y){Ba(h),Tl(h),h.g=null;var S=2}else if(As(h.h,y))v=y.G,Vi(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;S=Ca(),Pt(S,new vc(S,v)),Ms(h)}else Cc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(S==1&&yd(h,y)||S==2&&El(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),B){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function Nc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Pi(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),S=h.Ua;const B=!S;S=new Kn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_r(S,"https"),xi(S),B?_l(S.toString(),v):Tr(S.toString(),v)}else yt(2);h.I=0,h.l&&h.l.pa(y),Vc(h),Os(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vc(h){if(h.I=0,h.ja=[],h.l){const y=Oa(h.h);(y.length!=0||h.i.length!=0)&&(H(h.ja,y),H(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function xc(h,y,v){var S=v instanceof Kn?ut(v):new Kn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ss(S,S.u);else{var B=c.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const G=new Kn(null);S&&_r(G,S),y&&(G.g=y),B&&Ss(G,B),v&&(G.h=v),S=G}return v=h.G,y=h.wa,v&&y&&Ze(S,v,y),Ze(S,"VER",h.ka),Ps(h,S),S}function za(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new ws({ab:v})):new nt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}s=Oc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qa(){}qa.prototype.g=function(h,y){return new an(h,y)};function an(h,y){Ct.call(this),this.g=new La(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new br(this)}T(an,Ct),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){xs(this.g)},an.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Cn(h),h=v);y.i.push(new pd(y.Ya++,h)),y.I==3&&Ms(y)},an.prototype.N=function(){this.g.l=null,delete this.j,xs(this.g),delete this.g,an.Z.N.call(this)};function Sl(h){cr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Sl,cr);function Mc(){Hn.call(this),this.status=1}T(Mc,Hn);function br(h){this.g=h}T(br,Oc),br.prototype.ra=function(){Pt(this.g,"a")},br.prototype.qa=function(h){Pt(this.g,new Sl(h))},br.prototype.pa=function(h){Pt(this.g,new Mc)},br.prototype.oa=function(){Pt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,VA=function(){return new qa},NA=function(){return Ca()},DA=Dn,Lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,Yh=_t,Ft.COMPLETE="complete",CA=Ft,_c.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Eu=_c,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,RA=nt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const aT="@firebase/firestore",oT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new vg("@firebase/firestore");function So(){return fa.logLevel}function ie(s,...e){if(fa.logLevel<=ke.DEBUG){const t=e.map(Ag);fa.debug(`Firestore (${tl}): ${s}`,...t)}}function ln(s,...e){if(fa.logLevel<=ke.ERROR){const t=e.map(Ag);fa.error(`Firestore (${tl}): ${s}`,...t)}}function da(s,...e){if(fa.logLevel<=ke.WARN){const t=e.map(Ag);fa.warn(`Firestore (${tl}): ${s}`,...t)}}function Ag(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,xA(s,i,t)}function xA(s,e,t){let i=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ln(i),new Error(i)}function de(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||xA(e,a,i)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class oD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lD{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string",31837,{l:i}),new OA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class uD{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cD{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new uD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){de(this.o===void 0,3512);const i=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(de(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=fD(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function we(s,e){return s<e?-1:s>e?1:0}function Up(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),l=e.charAt(i);if(a!==l)return Tp(a)===Tp(l)?we(a,l):Tp(a)?1:-1}return we(s.length,e.length)}const dD=55296,mD=57343;function Tp(s){const e=s.charCodeAt(0);return e>=dD&&e<=mD}function Lo(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}function MA(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="__name__";class gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&fe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=gi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return we(e.length,t.length)}static compareSegments(e,t){const i=gi.isNumericId(e),a=gi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?gi.extractNumericId(e).compare(gi.extractNumericId(t)):Up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class je extends gi{construct(e,t,i){return new je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new je(t)}static emptyPath(){return new je([])}}const pD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends gi{construct(e,t,i){return new ht(e,t,i)}static isValidIdentifier(e){return pD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uT}static keyField(){return new ht([uT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(je.fromString(e))}static fromName(e){return new ae(je.fromString(e).popFirst(5))}static empty(){return new ae(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(s,e,t){if(!t)throw new se(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function gD(s,e,t,i){if(e===!0&&i===!0)throw new se(Q.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function cT(s){if(!ae.isDocumentKey(s))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function hT(s){if(ae.isDocumentKey(s))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function kA(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function zf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":fe(12329,{type:typeof s})}function ma(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(s);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(s,e){const t={typeString:s};return e&&(t.value=e),t}function nc(s,e){if(!kA(s))throw new se(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const c=s[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=-62135596800,dT=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*dT);return new Qe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fT)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dT}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:It("string",Qe._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Qe(0,0))}static max(){return new ye(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=-1;class mf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Bp(s){return s.fields.find((e=>e.kind===2))}function Ws(s){return s.fields.filter((e=>e.kind!==2))}mf.UNKNOWN_ID=-1;class Xh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lu(0,Rn.min())}}function yD(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=ye.fromTimestamp(i===1e9?new Qe(t+1,0):new Qe(t,i));return new Rn(a,ae.empty(),e)}function LA(s){return new Rn(s.readTime,s.key,ku)}class Rn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Rn(ye.min(),ae.empty(),ku)}static max(){return new Rn(ye.max(),ae.empty(),ku)}}function bg(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(s.documentKey,e.documentKey),t!==0?t:we(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==UA)throw s;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,i)=>{t(e)}))}static reject(e){return new L(((t,i)=>{i(e)}))}static waitFor(e){return new L(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=L.resolve(!1);for(const i of e)t=t.next((a=>a?L.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new L(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new L(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="SimpleDb";class qf{static open(e,t,i,a){try{return new qf(t,e.transaction(a,i))}catch(l){throw new wu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Wi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new wu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=wg(i.target.error);this.S.reject(new wu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ie(wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vD(t)}}class as{static delete(e){return ie(wn,"Removing database:",e),ta(cA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!vA())return!1;if(as.F())return!0;const e=Ot(),t=as.M(e),i=0<t&&t<10,a=zA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,as.M(Ot())===12.2&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ie(wn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new se(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new se(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new wu(e,c))},a.onupgradeneeded=l=>{ie(wn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ie(wn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=qf.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),L.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(ie(wn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zA(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _D{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ta(this.U.delete())}}class wu extends se{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fs(s){return s.name==="IndexedDbTransactionError"}class vD{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ie(wn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ie(wn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ta(i)}add(e){return ie(wn,"ADD",this.store.name,e,e),ta(this.store.add(e))}get(e){return ta(this.store.get(e)).next((t=>(t===void 0&&(t=null),ie(wn,"GET",this.store.name,e,t),t)))}delete(e){return ie(wn,"DELETE",this.store.name,e),ta(this.store.delete(e))}count(){return ie(wn,"COUNT",this.store.name),ta(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,p)=>{c.push(p)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new L(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ie(wn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new L(((i,a)=>{t.onerror=l=>{const c=wg(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new L(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new _D(d),g=t(d.primaryKey,d.value,p);if(g instanceof L){const _=g.catch((T=>(p.done(),L.reject(T))));i.push(_)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>L.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ta(s){return new L(((e,t)=>{s.onsuccess=i=>{const a=i.target.result;e(a)},s.onerror=i=>{const a=wg(i.target.error);t(a)}}))}let mT=!1;function wg(s){const e=as.M(Ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const i=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mT||(mT=!0,setTimeout((()=>{throw i}),0)),i}}return s}const Iu="IndexBackfiller";class ED{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ie(Iu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ie(Iu,`Documents written: ${t}`)}catch(t){fs(t)?ie(Iu,"Ignoring IndexedDB error during index backfill: ",t):await Sa(t)}await this.re(6e4)}))}}class TD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return L.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ie(Iu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(ie(Iu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=LA(l);bg(c,i)>0&&(i=c)})),new Rn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=-1;function Ff(s){return s==null}function Uu(s){return s===0&&1/s==-1/0}function AD(s){return typeof s=="number"&&Number.isInteger(s)&&!Uu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="";function tn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=pT(e)),e=SD(s.get(t),e);return pT(e)}function SD(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case pf:t+="";break;default:t+=l}}return t}function pT(s){return s+pf+""}function _i(s){const e=s.length;if(de(e>=2,64408,{path:s}),e===2)return de(s.charAt(0)===pf&&s.charAt(1)==="",56145,{path:s}),je.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=s.indexOf(pf,l);switch((c<0||c>t)&&fe(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:fe(61167,{path:s})}l=c+2}return new je(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="remoteDocuments",ic="owner",yo="owner",Bu="mutationQueues",bD="userId",ei="mutations",gT="batchId",sa="userMutationsIndex",yT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(s,e){return[s,tn(e)]}function qA(s,e,t){return[s,tn(e),t]}const wD={},Uo="documentMutations",gf="remoteDocumentsV14",ID=["prefixPath","collectionGroup","readTime","documentId"],Zh="documentKeyIndex",RD=["prefixPath","collectionGroup","documentId"],FA="collectionGroupIndex",CD=["collectionGroup","readTime","prefixPath","documentId"],zu="remoteDocumentGlobal",zp="remoteDocumentGlobalKey",Bo="targets",jA="queryTargetsIndex",DD=["canonicalId","targetId"],zo="targetDocuments",ND=["targetId","path"],Ig="documentTargetsIndex",VD=["path","targetId"],yf="targetGlobalKey",oa="targetGlobal",qu="collectionParents",xD=["collectionId","parent"],qo="clientMetadata",OD="clientId",jf="bundles",MD="bundleId",Hf="namedQueries",PD="name",Rg="indexConfiguration",kD="indexId",qp="collectionGroupIndex",LD="collectionGroup",Ru="indexState",UD=["indexId","uid"],HA="sequenceNumberIndex",BD=["uid","sequenceNumber"],Cu="indexEntries",zD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GA="documentKeyIndex",qD=["indexId","uid","orderedDocumentKey"],Gf="documentOverlays",FD=["userId","collectionPath","documentId"],Fp="collectionPathOverlayIndex",jD=["userId","collectionPath","largestBatchId"],KA="collectionGroupOverlayIndex",HD=["userId","collectionGroup","largestBatchId"],Cg="globals",GD="name",QA=[Bu,ei,Uo,ea,Bo,ic,oa,zo,qo,zu,qu,jf,Hf],KD=[...QA,Gf],YA=[Bu,ei,Uo,gf,Bo,ic,oa,zo,qo,zu,qu,jf,Hf,Gf],XA=YA,Dg=[...XA,Rg,Ru,Cu],QD=Dg,$A=[...Dg,Cg],YD=$A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends BA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Mt(s,e){const t=Ie(s);return as.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ds(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function ZA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=a??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Qt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vT(this.data.getIterator())}getIteratorFrom(e){return new vT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class vT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _o(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new pn([])}unionWith(e){let t=new Xe(ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new JA("Invalid base64 string: "+l):l}})(e);return new Rt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(s){if(de(!!s,39018),typeof s=="string"){let e=0;const t=XD.exec(s);if(de(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(s.seconds),nanos:ot(s.nanos)}}function ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ir(s){return typeof s=="string"?Rt.fromBase64String(s):Rt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="server_timestamp",eS="__type__",tS="__previous_value__",nS="__local_write_time__";function Ng(s){return(s?.mapValue?.fields||{})[eS]?.stringValue===WA}function Kf(s){const e=s.mapValue.fields[tS];return Ng(e)?Kf(e):e}function Fu(s){const e=nr(s.mapValue.fields[nS].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const _f="(default)";class pa{constructor(e,t){this.projectId=e,this.database=t||_f}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="__type__",iS="__max__",ts={mapValue:{fields:{__type__:{stringValue:iS}}}},xg="__vector__",Fo="value",Jh={nullValue:"NULL_VALUE"};function ls(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ng(s)?4:rS(s)?9007199254740991:Qf(s)?10:11:fe(28295,{value:s})}function wi(s,e){if(s===e)return!0;const t=ls(s);if(t!==ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Fu(s).isEqual(Fu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=nr(a.timestampValue),d=nr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return ir(a.bytesValue).isEqual(ir(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return ot(a.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ot(a.integerValue)===ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ot(a.doubleValue),d=ot(l.doubleValue);return c===d?Uu(c)===Uu(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Lo(s.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(_T(c)!==_T(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!wi(c[p],d[p])))return!1;return!0})(s,e);default:return fe(52216,{left:s})}}function ju(s,e){return(s.values||[]).find((t=>wi(t,e)))!==void 0}function us(s,e){if(s===e)return 0;const t=ls(s),i=ls(e);if(t!==i)return we(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ot(l.integerValue||l.doubleValue),p=ot(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return ET(s.timestampValue,e.timestampValue);case 4:return ET(Fu(s),Fu(e));case 5:return Up(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=ir(l),p=ir(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=we(d[g],p[g]);if(_!==0)return _}return we(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=we(ot(l.latitude),ot(c.latitude));return d!==0?d:we(ot(l.longitude),ot(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return TT(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Fo]?.arrayValue,_=p[Fo]?.arrayValue,T=we(g?.values?.length||0,_?.values?.length||0);return T!==0?T:TT(g,_)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ts.mapValue&&c===ts.mapValue)return 0;if(l===ts.mapValue)return 1;if(c===ts.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const b=Up(p[T],_[T]);if(b!==0)return b;const O=us(d[p[T]],g[_[T]]);if(O!==0)return O}return we(p.length,_.length)})(s.mapValue,e.mapValue);default:throw fe(23264,{he:t})}}function ET(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return we(s,e);const t=nr(s),i=nr(e),a=we(t.seconds,i.seconds);return a!==0?a:we(t.nanos,i.nanos)}function TT(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=us(t[a],i[a]);if(l)return l}return we(t.length,i.length)}function jo(s){return Hp(s)}function Hp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=nr(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return ir(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ae.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Hp(l);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Hp(t.fields[c])}`;return a+"}"})(s.mapValue):fe(61005,{value:s})}function Wh(s){switch(ls(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(s);return e?16+Wh(e):16;case 5:return 2*s.stringValue.length;case 6:return ir(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Wh(l)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return ds(i.fields,((l,c)=>{a+=l.length+Wh(c)})),a})(s.mapValue);default:throw fe(13486,{value:s})}}function Hu(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Gp(s){return!!s&&"integerValue"in s}function Gu(s){return!!s&&"arrayValue"in s}function AT(s){return!!s&&"nullValue"in s}function ST(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ef(s){return!!s&&"mapValue"in s}function Qf(s){return(s?.mapValue?.fields||{})[Vg]?.stringValue===xg}function Du(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ds(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Du(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Du(s.arrayValue.values[t]);return e}return{...s}}function rS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===iS}const sS={mapValue:{fields:{[Vg]:{stringValue:xg},[Fo]:{arrayValue:{}}}}};function ZD(s){return"nullValue"in s?Jh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Hu(pa.empty(),ae.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Qf(s)?sS:{mapValue:{}}:fe(35942,{value:s})}function JD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Hu(pa.empty(),ae.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?sS:"mapValue"in s?Qf(s)?{mapValue:{}}:ts:fe(61959,{value:s})}function bT(s,e){const t=us(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function wT(s,e){const t=us(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=ht.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Du(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ds(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new en(Du(this.value))}}function aS(s){const e=[];return ds(s.fields,((t,i)=>{const a=new ht([t]);if(ef(i)){const l=aS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new gt(e,0,ye.min(),ye.min(),ye.min(),en.empty(),0)}static newFoundDocument(e,t,i,a){return new gt(e,1,t,ye.min(),i,a,0)}static newNoDocument(e,t){return new gt(e,2,t,ye.min(),ye.min(),en.empty(),0)}static newUnknownDocument(e,t){return new gt(e,3,t,ye.min(),ye.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){this.position=e,this.inclusive=t}}function IT(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?i=ae.comparator(ae.fromName(c.referenceValue),t.key):i=us(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function RT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!wi(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function WD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{}class Le extends oS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new e2(e,t,i):t==="array-contains"?new i2(e,i):t==="in"?new dS(e,i):t==="not-in"?new r2(e,i):t==="array-contains-any"?new s2(e,i):new Le(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new t2(e,i):new n2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(us(t,this.value)):t!==null&&ls(this.value)===ls(t)&&this.matchesComparison(us(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends oS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return Go(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Go(s){return s.op==="and"}function Kp(s){return s.op==="or"}function Og(s){return lS(s)&&Go(s)}function lS(s){for(const e of s.filters)if(e instanceof Ye)return!1;return!0}function Qp(s){if(s instanceof Le)return s.field.canonicalString()+s.op.toString()+jo(s.value);if(Og(s))return s.filters.map((e=>Qp(e))).join(",");{const e=s.filters.map((t=>Qp(t))).join(",");return`${s.op}(${e})`}}function uS(s,e){return s instanceof Le?(function(i,a){return a instanceof Le&&i.op===a.op&&i.field.isEqual(a.field)&&wi(i.value,a.value)})(s,e):s instanceof Ye?(function(i,a){return a instanceof Ye&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&uS(c,a.filters[d])),!0):!1})(s,e):void fe(19439)}function cS(s,e){const t=s.filters.concat(e);return Ye.create(t,s.op)}function hS(s){return s instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(s):s instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map(hS).join(" ,")+"}"})(s):"Filter"}class e2 extends Le{constructor(e,t,i){super(e,t,i),this.key=ae.fromName(i.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class t2 extends Le{constructor(e,t){super(e,"in",t),this.keys=fS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class n2 extends Le{constructor(e,t){super(e,"not-in",t),this.keys=fS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fS(s,e){return(e.arrayValue?.values||[]).map((t=>ae.fromName(t.referenceValue)))}class i2 extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gu(t)&&ju(t.arrayValue,this.value)}}class dS extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class r2 extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class s2 extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ju(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Yp(s,e=null,t=[],i=[],a=null,l=null,c=null){return new a2(s,e,t,i,a,l,c)}function ga(s){const e=Ie(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function rc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!WD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!uS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!RT(s.startAt,e.startAt)&&RT(s.endAt,e.endAt)}function Ef(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Tf(s,e){return s.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function CT(s,e,t){let i=Jh,a=!0;for(const l of Tf(s,e)){let c=Jh,d=!0;switch(l.op){case"<":case"<=":c=ZD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Jh}bT({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];bT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function DT(s,e,t){let i=ts,a=!0;for(const l of Tf(s,e)){let c=ts,d=!0;switch(l.op){case">=":case">":c=JD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ts}wT({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];wT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o2(s,e,t,i,a,l,c,d){return new sc(s,e,t,i,a,l,c,d)}function Mg(s){return new sc(s)}function NT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function mS(s){return s.collectionGroup!==null}function Nu(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(ht.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vf(l,i))})),t.has(ht.keyField().canonicalString())||e.Ie.push(new vf(ht.keyField(),i))}return e.Ie}function Fn(s){const e=Ie(s);return e.Ee||(e.Ee=l2(e,Nu(s))),e.Ee}function l2(s,e){if(s.limitType==="F")return Yp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new vf(a.field,l)}));const t=s.endAt?new Ho(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ho(s.startAt.position,s.startAt.inclusive):null;return Yp(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Xp(s,e){const t=s.filters.concat([e]);return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function $p(s,e,t){return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Yf(s,e){return rc(Fn(s),Fn(e))&&s.limitType===e.limitType}function pS(s){return`${ga(Fn(s))}|lt:${s.limitType}`}function bo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>hS(a))).join(", ")}]`),Ff(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>jo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>jo(a))).join(",")),`Target(${i})`})(Fn(s))}; limitType=${s.limitType})`}function ac(s,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ae.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(s,e)&&(function(i,a){for(const l of Nu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=IT(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Nu(i),a)||i.endAt&&!(function(c,d,p){const g=IT(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Nu(i),a))})(s,e)}function u2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gS(s){return(e,t)=>{let i=!1;for(const a of Nu(s)){const l=c2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function c2(s,e,t){const i=s.field.isKeyField()?ae.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?us(p,g):fe(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return fe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new lt(ae.comparator);function In(){return h2}const yS=new lt(ae.comparator);function Tu(...s){let e=yS;for(const t of s)e=e.insert(t.key,t);return e}function _S(s){let e=yS;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function vi(){return Vu()}function vS(){return Vu()}function Vu(){return new or((s=>s.toString()),((s,e)=>s.isEqual(e)))}const f2=new lt(ae.comparator),d2=new Xe(ae.comparator);function Ne(...s){let e=d2;for(const t of s)e=e.add(t);return e}const m2=new Xe(we);function p2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uu(e)?"-0":e}}function ES(s){return{integerValue:""+s}}function g2(s,e){return AD(e)?ES(e):Pg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function y2(s,e,t){return s instanceof Ku?(function(a,l){const c={fields:{[eS]:{stringValue:WA},[nS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ng(l)&&(l=Kf(l)),l&&(c.fields[tS]=l),{mapValue:c}})(t,e):s instanceof Ko?AS(s,e):s instanceof Qo?SS(s,e):(function(a,l){const c=TS(a,l),d=VT(c)+VT(a.Ae);return Gp(c)&&Gp(a.Ae)?ES(d):Pg(a.serializer,d)})(s,e)}function _2(s,e,t){return s instanceof Ko?AS(s,e):s instanceof Qo?SS(s,e):t}function TS(s,e){return s instanceof Qu?(function(i){return Gp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ku extends Xf{}class Ko extends Xf{constructor(e){super(),this.elements=e}}function AS(s,e){const t=bS(e);for(const i of s.elements)t.some((a=>wi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Qo extends Xf{constructor(e){super(),this.elements=e}}function SS(s,e){let t=bS(e);for(const i of s.elements)t=t.filter((a=>!wi(a,i)));return{arrayValue:{values:t}}}class Qu extends Xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function VT(s){return ot(s.integerValue||s.doubleValue)}function bS(s){return Gu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.field=e,this.transform=t}}function E2(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Ko&&a instanceof Ko||i instanceof Qo&&a instanceof Qo?Lo(i.elements,a.elements,wi):i instanceof Qu&&a instanceof Qu?wi(i.Ae,a.Ae):i instanceof Ku&&a instanceof Ku})(s.transform,e.transform)}class T2{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class $f{}function wS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kg(s.key,gn.none()):new nl(s.key,s.data,gn.none());{const t=s.data,i=en.empty();let a=new Xe(ht.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new lr(s.key,i,new pn(a.toArray()),gn.none())}}function A2(s,e,t){s instanceof nl?(function(a,l,c){const d=a.value.clone(),p=OT(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof lr?(function(a,l,c){if(!tf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=OT(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(IS(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function xu(s,e,t,i){return s instanceof nl?(function(l,c,d,p){if(!tf(l.precondition,c))return d;const g=l.value.clone(),_=MT(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,i):s instanceof lr?(function(l,c,d,p){if(!tf(l.precondition,c))return d;const g=MT(l.fieldTransforms,p,c),_=c.data;return _.setAll(IS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(s,e,t,i):(function(l,c,d){return tf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function S2(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),l=TS(i.transform,a||null);l!=null&&(t===null&&(t=en.empty()),t.set(i.field,l))}return t||null}function xT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Lo(i,a,((l,c)=>E2(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class nl extends $f{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class lr extends $f{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function IS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function OT(s,e,t){const i=new Map;de(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,_2(c,d,t[a]))}return i}function MT(s,e,t){const i=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);i.set(a.field,y2(l,c,e))}return i}class kg extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RS extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&A2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=vS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=wS(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(ye.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,i)=>xT(t,i)))&&Lo(this.baseMutations,e.baseMutations,((t,i)=>xT(t,i)))}}class Ug{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){de(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return f2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Ug(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Be;function w2(s){switch(s){case Q.OK:return fe(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return fe(15467,{code:s})}}function CS(s){if(s===void 0)return ln("GRPC error has no .code"),Q.UNKNOWN;switch(s){case wt.OK:return Q.OK;case wt.CANCELLED:return Q.CANCELLED;case wt.UNKNOWN:return Q.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Q.INTERNAL;case wt.UNAVAILABLE:return Q.UNAVAILABLE;case wt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case wt.NOT_FOUND:return Q.NOT_FOUND;case wt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case wt.ABORTED:return Q.ABORTED;case wt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case wt.DATA_LOSS:return Q.DATA_LOSS;default:return fe(39323,{code:s})}}(Be=wt||(wt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new ss([4294967295,4294967295],0);function PT(s){const e=I2().encode(s),t=new IA;return t.update(e),new Uint8Array(t.digest())}function kT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ss([t,i],0),new ss([a,l],0)]}class zg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(i<0)throw new Au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ss.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ss.fromNumber(i)));return a.compare(R2)===1&&(a=new ss([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=PT(e),[i,a]=kT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new zg(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=PT(e),[i,a]=kT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Zf(ye.min(),a,new lt(we),In(),Ne())}}class oc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new oc(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class DS{constructor(e,t){this.targetId=e,this.Ce=t}}class NS{constructor(e,t,i=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class LT{constructor(){this.ve=0,this.Fe=UT(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),i=Ne();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:fe(38017,{changeType:l})}})),new oc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=UT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class C2{constructor(e){this.Ge=e,this.ze=new Map,this.je=In(),this.Je=Uh(),this.He=Uh(),this.Ye=new lt(we)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ef(l))if(i===0){const c=new ae(l.path);this.et(t,c,gt.newNoDocument(c,ye.min()))}else de(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ir(i).toUint8Array()}catch(p){if(p instanceof JA)return da("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new zg(c,a,l)}catch(p){return da(p instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Ef(d.target)){const p=new ae(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,gt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ne();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Zf(e,t,this.Ye,this.je,i);return this.je=In(),this.Je=Uh(),this.He=Uh(),this.Ye=new lt(we),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new LT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(we),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(we),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new LT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Uh(){return new lt(ae.comparator)}function UT(){return new lt(ae.comparator)}const D2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V2={and:"AND",or:"OR"};class x2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zp(s,e){return s.useProto3Json||Ff(e)?e:{value:e}}function Yo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function O2(s,e){return Yo(s,e.toTimestamp())}function un(s){return de(!!s,49232),ye.fromTimestamp((function(t){const i=nr(t);return new Qe(i.seconds,i.nanos)})(s))}function qg(s,e){return Jp(s,e).canonicalString()}function Jp(s,e){const t=(function(a){return new je(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function xS(s){const e=je.fromString(s);return de(qS(e),10190,{key:e.toString()}),e}function Af(s,e){return qg(s.databaseId,e.path)}function la(s,e){const t=xS(e);if(t.get(1)!==s.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ae(PS(t))}function OS(s,e){return qg(s.databaseId,e)}function MS(s){const e=xS(s);return e.length===4?je.emptyPath():PS(e)}function Wp(s){return new je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function PS(s){return de(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function BT(s,e,t){return{name:Af(s,e),fields:t.value.mapValue.fields}}function M2(s,e,t){const i=la(s,e.name),a=un(e.updateTime),l=e.createTime?un(e.createTime):ye.min(),c=new en({mapValue:{fields:e.fields}}),d=gt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function P2(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(de(_===void 0||typeof _=="string",58123),Rt.fromBase64String(_||"")):(de(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Rt.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?Q.UNKNOWN:CS(g.code);return new se(_,g.message||"")})(c);t=new NS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=la(s,i.document.name),l=un(i.document.updateTime),c=i.document.createTime?un(i.document.createTime):ye.min(),d=new en({mapValue:{fields:i.document.fields}}),p=gt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new nf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=la(s,i.document),l=i.readTime?un(i.readTime):ye.min(),c=gt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new nf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=la(s,i.document),l=i.removedTargetIds||[];t=new nf([],l,a,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new b2(a,l),d=i.targetId;t=new DS(d,c)}}return t}function Sf(s,e){let t;if(e instanceof nl)t={update:BT(s,e.key,e.value)};else if(e instanceof kg)t={delete:Af(s,e.key)};else if(e instanceof lr)t={update:BT(s,e.key,e.data),updateMask:q2(e.fieldMask)};else{if(!(e instanceof RS))return fe(16599,{Vt:e.type});t={verify:Af(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Ku)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ko)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Qo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qu)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw fe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:O2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:fe(27497)})(s,e.precondition)),t}function eg(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?gn.updateTime(un(l.updateTime)):l.exists!==void 0?gn.exists(l.exists):gn.none()})(e.currentDocument):gn.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)de(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Ku;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];p=new Ko(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];p=new Qo(_)}else"increment"in d?p=new Qu(c,d.increment):fe(16584,{proto:d});const g=ht.fromServerFormat(d.fieldPath);return new v2(g,p)})(s,a))):[];if(e.update){e.update.name;const a=la(s,e.update.name),l=new en({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new pn(g.map((_=>ht.fromServerFormat(_))))})(e.updateMask);return new lr(a,l,c,t,i)}return new nl(a,l,t,i)}if(e.delete){const a=la(s,e.delete);return new kg(a,t)}if(e.verify){const a=la(s,e.verify);return new RS(a,t)}return fe(1463,{proto:e})}function k2(s,e){return s&&s.length>0?(de(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?un(a.updateTime):un(l);return c.isEqual(ye.min())&&(c=un(l)),new T2(c,a.transformResults||[])})(t,e)))):[]}function kS(s,e){return{documents:[OS(s,e.path)]}}function LS(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=OS(s,a);const l=(function(g){if(g.length!==0)return zS(Ye.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:wo(b.field),direction:U2(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Zp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function US(s){let e=MS(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){de(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const b=BS(T);return b instanceof Ye&&Og(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(H){return new vf(Io(H.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,Ff(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(T){const b=!!T.before,O=T.values||[];return new Ho(O,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const b=!T.before,O=T.values||[];return new Ho(O,b)})(t.endAt)),o2(e,a,c,l,d,"F",p,g)}function L2(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return Le.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Io(t.unaryFilter.field);return Le.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Io(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Le.create(Io(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((i=>BS(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(t.compositeFilter.op))})(s):fe(30097,{filter:s})}function U2(s){return D2[s]}function B2(s){return N2[s]}function z2(s){return V2[s]}function wo(s){return{fieldPath:s.canonicalString()}}function Io(s){return ht.fromServerFormat(s.fieldPath)}function zS(s){return s instanceof Le?(function(t){if(t.op==="=="){if(ST(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(AT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ST(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(AT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:B2(t.op),value:t.value}}})(s):s instanceof Ye?(function(t){const i=t.getFilters().map((a=>zS(a)));return i.length===1?i[0]:{compositeFilter:{op:z2(t.op),filters:i}}})(s):fe(54877,{filter:s})}function q2(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,i,a,l=ye.min(),c=ye.min(),d=Rt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.yt=e}}function F2(s,e){let t;if(e.document)t=M2(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ae.fromSegments(e.noDocument.path),a=_a(e.noDocument.readTime);t=gt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe(56709);{const i=ae.fromSegments(e.unknownDocument.path),a=_a(e.unknownDocument.version);t=gt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Qe(a[0],a[1]);return ye.fromTimestamp(l)})(e.readTime)),t}function zT(s,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Af(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Yo(l,c.version.toTimestamp()),createTime:Yo(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ya(e.version)};else{if(!e.isUnknownDocument())return fe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:ya(e.version)}}return i}function bf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function ya(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _a(s){const e=new Qe(s.seconds,s.nanoseconds);return ye.fromTimestamp(e)}function na(s,e){const t=(e.baseMutations||[]).map((l=>eg(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>eg(s.yt,l))),a=Qe.fromMillis(e.localWriteTimeMs);return new Lg(e.batchId,a,t,i)}function Su(s){const e=_a(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?_a(s.lastLimboFreeSnapshotVersion):ye.min();let i;return i=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return de(c===1,1966,{count:c}),Fn(Mg(MS(l.documents[0])))})(s.query):(function(l){return Fn(US(l))})(s.query),new Xi(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Rt.fromBase64String(s.resumeToken))}function jS(s,e){const t=ya(e.snapshotVersion),i=ya(e.lastLimboFreeSnapshotVersion);let a;a=Ef(e.target)?kS(s.yt,e.target):LS(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ga(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function HS(s){const e=US({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?$p(e,e.limit,"L"):e}function Ap(s,e){return new Bg(e.largestBatchId,eg(s.yt,e.overlayMutation))}function qT(s,e){const t=e.path.lastSegment();return[s,tn(e.path.popLast()),t]}function FT(s,e,t,i){return{indexId:s,uid:e,sequenceNumber:t,readTime:ya(i.readTime),documentKey:tn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{getBundleMetadata(e,t){return jT(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:_a(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return jT(e).put((function(a){return{bundleId:a.id,createTime:ya(un(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return HT(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:HS(l.bundledQuery),readTime:_a(l.readTime)}})(i)}))}saveNamedQuery(e,t){return HT(e).put((function(a){return{name:a.name,readTime:ya(un(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function jT(s){return Mt(s,jf)}function HT(s){return Mt(s,Hf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Jf(e,i)}getOverlay(e,t){return pu(e).get(qT(this.userId,t)).next((i=>i?Ap(this.serializer,i):null))}getOverlays(e,t){const i=vi();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new Bg(t,c);a.push(this.St(e,d))})),L.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(tn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(pu(e).Z(Fp,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,i){const a=vi(),l=tn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return pu(e).J(Fp,c).next((d=>{for(const p of d){const g=Ap(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=vi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pu(e).ee({index:KA,range:d},((p,g,_)=>{const T=Ap(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return pu(e).put((function(a,l,c){const[d,p,g]=qT(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Sf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function pu(s){return Mt(s,Gf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{bt(e){return Mt(e,Cg)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Rt.fromUint8Array(i):Rt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ot(e.integerValue));else if("doubleValue"in e){const i=ot(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Uu(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=nr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ir(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?rS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Qf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):fe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Fo,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ot(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ia.Kt=new ia;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=255;function G2(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function GT(s){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=G2(255&i[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class K2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=GT(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=GT(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(vo),this.sn(255)}_n(){this.an(vo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===vo?(this.sn(vo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===vo?(this.an(vo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Q2{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Y2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class gu{constructor(){this.cn=new K2,this.ln=new Q2(this.cn),this.hn=new Y2(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new ra(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:rf(this.En),directionalValue:rf(this.dn),orderedDocumentKey:rf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Kr(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=KT(s.En,e.En),t!==0?t:(t=KT(s.dn,e.dn),t!==0?t:ae.comparator(s.In,e.In)))}function KT(s,e){for(let t=0;t<s.length&&t<e.length;++t){const i=s[t]-e[t];if(i!==0)return i}return s.length-e.length}function rf(s){return _A()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(s):s}function QT(s){return typeof s!="string"?s:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(s)}class YT{constructor(e){this.mn=new Xe(((t,i)=>ht.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(de(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Bp(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ws(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.Sn(d,p)||!this.bn(this.fn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xe(ht.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Xh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Xh(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Xh(i.field,i.dir==="asc"?0:1)));return new mf(mf.UNKNOWN_ID,this.collectionId,t,Lu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(s){if(de(s instanceof Le||s instanceof Ye,20012),s instanceof Le){if(s instanceof dS){const t=s.value.arrayValue?.values?.map((i=>Le.create(s.field,"==",i)))||[];return Ye.create(t,"or")}return s}const e=s.filters.map((t=>GS(t)));return Ye.create(e,s.op)}function X2(s){if(s.getFilters().length===0)return[];const e=ig(GS(s));return de(KS(e),7391),tg(e)||ng(e)?[e]:e.getFilters()}function tg(s){return s instanceof Le}function ng(s){return s instanceof Ye&&Og(s)}function KS(s){return tg(s)||ng(s)||(function(t){if(t instanceof Ye&&Kp(t)){for(const i of t.getFilters())if(!tg(i)&&!ng(i))return!1;return!0}return!1})(s)}function ig(s){if(de(s instanceof Le||s instanceof Ye,34018),s instanceof Le)return s;if(s.filters.length===1)return ig(s.filters[0]);const e=s.filters.map((i=>ig(i)));let t=Ye.create(e,s.op);return t=wf(t),KS(t)?t:(de(t instanceof Ye,64498),de(Go(t),40251),de(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Fg(i,a))))}function Fg(s,e){let t;return de(s instanceof Le||s instanceof Ye,38388),de(e instanceof Le||e instanceof Ye,25473),t=s instanceof Le?e instanceof Le?(function(a,l){return Ye.create([a,l],"and")})(s,e):XT(s,e):e instanceof Le?XT(e,s):(function(a,l){if(de(a.filters.length>0&&l.filters.length>0,48005),Go(a)&&Go(l))return cS(a,l.getFilters());const c=Kp(a)?a:l,d=Kp(a)?l:a,p=c.filters.map((g=>Fg(g,d)));return Ye.create(p,"or")})(s,e),wf(t)}function XT(s,e){if(Go(e))return cS(e,s.getFilters());{const t=e.filters.map((i=>Fg(s,i)));return Ye.create(t,"or")}}function wf(s){if(de(s instanceof Le||s instanceof Ye,11850),s instanceof Le)return s;const e=s.getFilters();if(e.length===1)return wf(e[0]);if(lS(s))return s;const t=e.map((a=>wf(a))),i=[];return t.forEach((a=>{a instanceof Le?i.push(a):a instanceof Ye&&(a.op===s.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ye.create(i,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Cn=new jg}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Rn.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class jg{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Xe(je.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Xe(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="IndexedDbIndexManager",Bh=new Uint8Array(0);class Z2{constructor(e,t){this.databaseId=t,this.vn=new jg,this.Fn=new or((i=>ga(i)),((i,a)=>rc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:tn(a)};return ZT(e).put(l)}return L.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[MA(t),""],!1,!0);return ZT(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(_i(c.parent))}return i}))}addFieldIndex(e,t){const i=yu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=To(e);return l.next((d=>{c.put(FT(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=yu(e),a=To(e),l=Eo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=yu(e),i=Eo(e),a=To(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new YT(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Eo(e);let a=!0;const l=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ne();const d=[];return L.forEach(l,((p,g)=>{ie($T,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((ve=>`${ve.fieldPath}:${ve.kind}`)).join(",")}`})(p)} to execute ${ga(t)}`);const _=(function(ne,ve){const oe=Bp(ve);if(oe===void 0)return null;for(const _e of Tf(ne,oe.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null})(g,p),T=(function(ne,ve){const oe=new Map;for(const _e of Ws(ve))for(const D of Tf(ne,_e.fieldPath))switch(D.op){case"==":case"in":oe.set(_e.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return oe.set(_e.fieldPath.canonicalString(),D.value),Array.from(oe.values())}return null})(g,p),b=(function(ne,ve){const oe=[];let _e=!0;for(const D of Ws(ve)){const w=D.kind===0?CT(ne,D.fieldPath,ne.startAt):DT(ne,D.fieldPath,ne.startAt);oe.push(w.value),_e&&(_e=w.inclusive)}return new Ho(oe,_e)})(g,p),O=(function(ne,ve){const oe=[];let _e=!0;for(const D of Ws(ve)){const w=D.kind===0?DT(ne,D.fieldPath,ne.endAt):CT(ne,D.fieldPath,ne.endAt);oe.push(w.value),_e&&(_e=w.inclusive)}return new Ho(oe,_e)})(g,p),H=this.On(p,g,b),K=this.On(p,g,O),F=this.Nn(p,g,T),te=this.Bn(p.indexId,_,H,b.inclusive,K,O.inclusive,F);return L.forEach(te,(W=>i.Y(W,t.limit).next((ne=>{ne.forEach((ve=>{const oe=ae.fromSegments(ve.documentKey);c.has(oe)||(c=c.add(oe),d.push(oe))}))}))))})).next((()=>d))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=X2(Ye.create(e.filters,"and")).map((i=>Yp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),_=[];for(let T=0;T<p;++T){const b=t?this.Ln(t[T/g]):Bh,O=this.kn(e,b,i[T%g],a),H=this.qn(e,b,l[T%g],c),K=d.map((F=>this.kn(e,b,F,!0)));_.push(...this.createRange(O,H,K))}return _}kn(e,t,i,a){const l=new ra(e,ae.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new ra(e,ae.empty(),t,i);return a?l.An():l}xn(e,t){const i=new YT(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return L.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new Xe(ht.comparator),_=!1;for(const T of p.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new gu;for(const a of Ws(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);ia.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new gu;return ia.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new gu;return ia.Kt.Dt(Hu(this.databaseId,t),i.Pn((function(l){const c=Ws(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new gu);let l=0;for(const c of Ws(e)){const d=i[l++];for(const p of a)if(this.Un(t,c.fieldPath)&&Gu(d))a=this.Kn(a,c,d);else{const g=p.Pn(c.kind);ia.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new gu;p.seed(d.un()),ia.Kt.Dt(c,p.Pn(t.kind)),l.push(p)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Le&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=yu(e),a=To(e);return(t?i.J(qp,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return L.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(_,T){const b=T?new Lu(T.sequenceNumber,new Rn(_a(T.readTime),new ae(_i(T.documentKey)),T.largestBatchId)):Lu.empty(),O=_.fields.map((([H,K])=>new Xh(ht.fromServerFormat(H),K)));return new mf(_.indexId,_.collectionGroup,O,b)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:we(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=yu(e),l=To(e);return this.Gn(e).next((c=>a.J(qp,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(FT(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return L.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),L.forEach(d,(p=>this.zn(e,a,p).next((g=>{const _=this.jn(l,p);return g.isEqual(_)?L.resolve():this.Jn(e,l,p,g,_)})))))))}))}Hn(e,t,i,a){return Eo(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return Eo(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=Eo(e);let l=new Xe(Kr);return a.ee({index:GA,range:IDBKeyRange.only([i.indexId,this.uid,rf(this.$n(i,t))])},((c,d)=>{l=l.add(new ra(i.indexId,t,QT(d.arrayValue),QT(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new Xe(Kr);const a=this.Qn(t,e);if(a==null)return i;const l=Bp(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Gu(c))for(const d of c.arrayValue.values||[])i=i.add(new ra(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new ra(t.indexId,e.key,Bh,a));return i}Jn(e,t,i,a,l){ie($T,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,_,T,b){const O=p.getIterator(),H=g.getIterator();let K=_o(O),F=_o(H);for(;K||F;){let te=!1,W=!1;if(K&&F){const ne=_(K,F);ne<0?W=!0:ne>0&&(te=!0)}else K!=null?W=!0:te=!0;te?(T(F),F=_o(H)):W?(b(K),K=_o(O)):(K=_o(O),F=_o(H))}})(a,l,Kr,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),L.waitFor(c)}Gn(e){let t=1;return To(e).ee({index:HA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>Kr(c,d))).filter(((c,d,p)=>!d||Kr(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=Kr(c,e),p=Kr(c,t);if(d===0)a[0]=e.An();else if(d>0&&p<0)a.push(c),a.push(c.An());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,Bh,ae.empty()),p=a[c+1].Vn(this.uid,Bh,ae.empty());l.push(IDBKeyRange.bound(d,p))}return l}Zn(e,t){return Kr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(JT)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||fe(44426))))).next(JT)}}function ZT(s){return Mt(s,qu)}function Eo(s){return Mt(s,Cu)}function yu(s){return Mt(s,Rg)}function To(s){return Mt(s,Ru)}function JT(s){de(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;bg(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Rn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QS=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s,e,t){const i=s.store(ei),a=s.store(Uo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((_,T,b)=>(d++,b.delete())));l.push(p.next((()=>{de(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const T=qA(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return L.waitFor(l).next((()=>g))}function If(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw fe(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(QS,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class Wf{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){de(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Wf(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).ee({index:sa,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Ro(e),c=Qr(e);return c.add({}).next((d=>{de(typeof d=="number",49019);const p=new Lg(d,t,i,a),g=(function(O,H,K){const F=K.baseMutations.map((W=>Sf(O.yt,W))),te=K.mutations.map((W=>Sf(O.yt,W)));return{userId:H,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:F,mutations:te}})(this.serializer,this.userId,p),_=[];let T=new Xe(((b,O)=>we(b.canonicalString(),O.canonicalString())));for(const b of a){const O=qA(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(O,wD))}return T.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[d]=p.keys()})),L.waitFor(_).next((()=>p))}))}lookupMutationBatch(e,t){return Qr(e).get(t).next((i=>i?(de(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),na(this.serializer,i)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Qr(e).ee({index:sa,range:a},((c,d,p)=>{d.userId===this.userId&&(de(d.batchId>=i,47524,{tr:i}),l=na(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=aa;return Qr(e).ee({index:sa,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,aa],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).J(sa,t).next((i=>i.map((a=>na(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=$h(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Ro(e).ee({range:a},((c,d,p)=>{const[g,_,T]=c,b=_i(_);if(g===this.userId&&t.path.isEqual(b))return Qr(e).get(T).next((O=>{if(!O)throw fe(61480,{nr:c,batchId:T});de(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),l.push(na(this.serializer,O))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(we);const a=[];return t.forEach((l=>{const c=$h(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Ro(e).ee({range:d},((g,_,T)=>{const[b,O,H]=g,K=_i(O);b===this.userId&&l.path.isEqual(K)?i=i.add(H):T.done()}));a.push(p)})),L.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=$h(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new Xe(we);return Ro(e).ee({range:c},((p,g,_)=>{const[T,b,O]=p,H=_i(b);T===this.userId&&i.isPrefixOf(H)?H.length===a&&(d=d.add(O)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Qr(e).get(l).next((c=>{if(c===null)throw fe(35274,{batchId:l});de(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(na(this.serializer,c))})))})),L.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return YS(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Ro(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=_i(l[1]);a.push(p)}else d.done()})).next((()=>{de(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return XS(e,this.userId,t)}_r(e){return $S(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:aa,lastStreamToken:""}))}}function XS(s,e,t){const i=$h(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Ro(s).ee({range:l,X:!0},((d,p,g)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function Qr(s){return Mt(s,ei)}function Ro(s){return Mt(s,Uo)}function $S(s){return Mt(s,Bu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new va(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ye.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ao(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(de(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Ao(e).ee(((c,d)=>{const p=Su(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Ao(e).ee(((i,a)=>{const l=Su(a);t(l)}))}lr(e){return e0(e).get(yf).next((t=>(de(t!==null,2888),t)))}hr(e,t){return e0(e).put(yf,t)}Pr(e,t){return Ao(e).put(jS(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ga(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Ao(e).ee({range:a,index:jA},((c,d,p)=>{const g=Su(d);rc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=$r(e);return t.forEach((c=>{const d=tn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),L.waitFor(a)}removeMatchingKeys(e,t,i){const a=$r(e);return L.forEach(t,(l=>{const c=tn(l.path);return L.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=$r(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=$r(e);let l=Ne();return a.ee({range:i,X:!0},((c,d,p)=>{const g=_i(c[1]),_=new ae(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=tn(t.path),a=IDBKeyRange.bound([i],[MA(i)],!1,!0);let l=0;return $r(e).ee({index:Ig,X:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Ao(e).get(t).next((i=>i?Su(i):null))}}function Ao(s){return Mt(s,Bo)}function e0(s){return Mt(s,oa)}function $r(s){return Mt(s,zo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="LruGarbageCollector",W2=1048576;function n0([s,e],[t,i]){const a=we(s,t);return a===0?we(e,i):a}class eN{constructor(e){this.Ir=e,this.buffer=new Xe(n0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();n0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(t0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fs(t)?ie(t0,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Vr(3e5)}))}}class tN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(qn.ce);const i=new eN(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(WT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),So()<=ke.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function JS(s,e){return new tN(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.db=e,this.garbageCollector=JS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return zh(e,i)}removeReference(e,t,i){return zh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return zh(e,t)}br(e,t){return(function(a,l){let c=!1;return $S(a).te((d=>XS(a,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const p=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,ye.min()),$r(e).delete((function(T){return[0,tn(T.path)]})(c)))))}));a.push(p)}})).next((()=>L.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return zh(e,t)}Sr(e,t){const i=$r(e);let a,l=qn.ce;return i.ee({index:Ig},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==qn.ce&&t(new ae(_i(a)),l),l=g,a=p):l=qn.ce})).next((()=>{l!==qn.ce&&t(new ae(_i(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zh(s,e){return $r(s).put((function(i,a){return{targetId:0,path:tn(i.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.changes=new or((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Zs(e).put(i)}removeEntry(e,t,i){return Zs(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],bf(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=gt.newInvalidDocument(t);return Zs(e).ee({index:Zh,range:IDBKeyRange.only(_u(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:gt.newInvalidDocument(t)};return Zs(e).ee({index:Zh,range:IDBKeyRange.only(_u(t))},((a,l)=>{i={document:this.Cr(t,l),size:If(l)}})).next((()=>i))}getEntries(e,t){let i=In();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=In(),a=new lt(ae.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,If(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return L.resolve();let a=new Xe(s0);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(_u(a.first()),_u(a.last())),c=a.getIterator();let d=c.getNext();return Zs(e).ee({index:Zh,range:l},((p,g,_)=>{const T=ae.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&s0(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j(_u(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),bf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zs(e).J(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let _=In();for(const T of g){const b=this.Cr(ae.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(ac(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=In();const c=r0(t,i),d=r0(t,Rn.max());return Zs(e).ee({index:FA,range:IDBKeyRange.bound(c,d,!0)},((p,g,_)=>{const T=this.Cr(ae.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new rN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return i0(e).get(zp).next((t=>(de(!!t,20021),t)))}Dr(e,t){return i0(e).put(zp,t)}Cr(e,t){if(t){const i=F2(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(ye.min())))return i}return gt.newInvalidDocument(e)}}function eb(s){return new iN(s)}class rN extends WS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new or((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new Xe(((l,c)=>we(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=zT(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=If(p);i+=g-d.size,t.push(this.Nr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=zT(this.Nr.serializer,c.convertToNoDocument(ye.min()));t.push(this.Nr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function i0(s){return Mt(s,zu)}function Zs(s){return Mt(s,gf)}function _u(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function r0(s,e){const t=e.documentKey.path.toArray();return[s,bf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function s0(s,e){const t=s.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=we(t[l],i[l]),a)return a;return a=we(t.length,i.length),a||(a=we(t[t.length-2],i[i.length-2]),a||we(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&xu(i.mutation,a,pn.empty(),Qe.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ne()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ne()){const a=vi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Tu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=vi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ne())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=In();const c=Vu(),d=(function(){return Vu()})();return t.forEach(((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof lr)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),xu(_.mutation,g,_.mutation.getFieldMask(),Qe.now())):c.set(g.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new sN(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Vu();let a=new lt(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||pn.empty();_=d.applyToLocalView(g,_),i.set(p,_);const T=(a.get(d.batchId)||Ne()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,T=vS();_.forEach((b=>{if(!l.has(b)){const O=wS(t.get(b),i.get(b));O!==null&&T.set(b,O),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return L.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):L.resolve(vi());let d=ku,p=l;return c.next((g=>L.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?L.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{p=p.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ne()))).next((_=>({batchId:d,changes:_S(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((i=>{let a=Tu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Tu();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const g=(function(T,b){return new sc(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,gt.newInvalidDocument(_)))}));let d=Tu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&xu(_.mutation,g,pn.empty(),Qe.now()),ac(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:un(a.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:HS(a.bundledQuery),readTime:un(a.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.overlays=new lt(ae.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vi();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){const a=vi(),l=t.length+1,c=new ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return L.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new lt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=vi(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=vi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return L.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Bg(t,i));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.Qr=new Xe(zt.$r),this.Ur=new Xe(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new zt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ae(new je([])),i=new zt(t,e),a=new zt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new je([])),i=new zt(t,e),a=new zt(t,e+1);let l=Ne();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new zt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||we(e.Yr,t.Yr)}static Kr(e,t){return we(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(zt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Lg(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?aa:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),a=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(we);return t.forEach((a=>{const l=new zt(a,0),c=new zt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),L.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ae.isDocumentKey(l)||(l=l.child(""));const c=new zt(new ae(l),0);let d=new Xe(we);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),L.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){de(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return L.forEach(t.mutations,(a=>{const l=new zt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new zt(t,0),a=this.Zr.firstAfterOrEqual(i);return L.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.ri=e,this.docs=(function(){return new lt(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let i=In();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():gt.newInvalidDocument(a))})),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=In();const c=t.path,d=new ae(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||bg(LA(_),i)<=0||(a.has(_.key)||ac(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,i,a){fe(9500)}ii(e,t){return L.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hN(this)}getSize(e){return L.resolve(this.size)}}class hN extends WS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.persistence=e,this.si=new or((t=>ga(t)),rc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Hg,this.targetCount=0,this.ai=va.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new va(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),L.waitFor(l).next((()=>a))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.ui={},this.overlays={},this.ci=new qn(0),this.li=!1,this.li=!0,this.hi=new lN,this.referenceDelegate=e(this),this.Pi=new fN(this),this.indexManager=new $2,this.remoteDocumentCache=(function(a){return new cN(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new FS(t),this.Ii=new aN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uN(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const a=new dN(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return L.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class dN extends BA{constructor(e){super(),this.currentSequenceNumber=e}}class ed{constructor(e){this.persistence=e,this.Ri=new Hg,this.Vi=null}static mi(e){return new ed(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(i=>{const a=ae.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Rf{constructor(e,t){this.persistence=e,this.pi=new or((i=>tn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=JS(this,t)}static mi(e,t){return new Rf(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?L.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,ye.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wh(e.data.value)),t}br(e,t,i){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return L.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.serializer=e}k(e,t,i,a){const l=new qf("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(ic)})(e),(function(p){p.createObjectStore(Bu,{keyPath:bD}),p.createObjectStore(ei,{keyPath:gT,autoIncrement:!0}).createIndex(sa,yT,{unique:!0}),p.createObjectStore(Uo)})(e),a0(e),(function(p){p.createObjectStore(ea)})(e));let c=L.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(zo),p.deleteObjectStore(Bo),p.deleteObjectStore(oa)})(e),a0(e)),c=c.next((()=>(function(p){const g=p.store(oa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return g.put(yf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(ei).J().next((T=>{p.deleteObjectStore(ei),p.createObjectStore(ei,{keyPath:gT,autoIncrement:!0}).createIndex(sa,yT,{unique:!0});const b=g.store(ei),O=T.map((H=>b.put(H)));return L.waitFor(O)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(qo,{keyPath:OD})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(zu)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(jf,{keyPath:MD})})(e),(function(p){p.createObjectStore(Hf,{keyPath:PD})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Gf,{keyPath:FD});g.createIndex(Fp,jD,{unique:!1}),g.createIndex(KA,HD,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(gf,{keyPath:ID});g.createIndex(Zh,RD),g.createIndex(FA,CD)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(ea)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Rg,{keyPath:kD,autoIncrement:!0}).createIndex(qp,LD,{unique:!1}),p.createObjectStore(Ru,{keyPath:UD}).createIndex(HA,BD,{unique:!1}),p.createObjectStore(Cu,{keyPath:zD}).createIndex(GA,qD,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Ru).clear()})).next((()=>{t.objectStore(Cu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Cg,{keyPath:GD})})(e)}))),i<18&&a>=18&&_A()&&(c=c.next((()=>{t.objectStore(Ru).clear()})).next((()=>{t.objectStore(Cu).clear()}))),c}wi(e){let t=0;return e.store(ea).ee(((i,a)=>{t+=If(a)})).next((()=>{const i={byteSize:t};return e.store(zu).put(zp,i)}))}yi(e){const t=e.store(Bu),i=e.store(ei);return t.J().next((a=>L.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,aa],[l.userId,l.lastAcknowledgedBatchId]);return i.J(sa,c).next((d=>L.forEach(d,(p=>{de(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=na(this.serializer,p);return YS(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(zo),i=e.store(ea);return e.store(oa).get(yf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new je(c),g=(function(T){return[0,tn(T)]})(p);l.push(t.get(g).next((_=>_?L.resolve():(T=>t.put({targetId:0,path:tn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}bi(e,t){e.createObjectStore(qu,{keyPath:xD});const i=t.store(qu),a=new jg,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:tn(p)})}};return t.store(ea).ee({X:!0},((c,d)=>{const p=new je(c);return l(p.popLast())})).next((()=>t.store(Uo).ee({X:!0},(([c,d,p],g)=>{const _=_i(d);return l(_.popLast())}))))}Di(e){const t=e.store(Bo);return t.ee(((i,a)=>{const l=Su(a),c=jS(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(ea),a=[];return i.ee(((l,c)=>{const d=t.store(gf),p=(function(T){return T.document?new ae(je.fromString(T.document.name).popFirst(5)):T.noDocument?ae.fromSegments(T.noDocument.path):T.unknownDocument?ae.fromSegments(T.unknownDocument.path):fe(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>L.waitFor(a)))}Fi(e,t){const i=t.store(ei),a=eb(this.serializer),l=new Gg(ed.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Ne();na(this.serializer,p).keys().forEach((_=>g=g.add(_))),d.set(p.userId,g)})),L.forEach(d,((p,g)=>{const _=new Kt(g),T=Jf.wt(this.serializer,_),b=l.getIndexManager(_),O=Wf.wt(_,this.serializer,b,l.referenceDelegate);return new tb(a,O,T,b).recalculateAndSaveOverlaysForDocumentKeys(new jp(t,qn.ce),p).next()}))}))}}function a0(s){s.createObjectStore(zo,{keyPath:ND}).createIndex(Ig,VD,{unique:!0}),s.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(jA,DD,{unique:!0}),s.createObjectStore(oa)}const Yr="IndexedDbPersistence",Sp=18e5,bp=5e3,wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pN="main";class Kg{constructor(e,t,i,a,l,c,d,p,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!Kg.v())throw new se(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nN(this,a),this.$i=t+pN,this.serializer=new FS(p),this.Ui=new as(this.$i,this.Ni,new mN(this.serializer)),this.hi=new H2,this.Pi=new J2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eb(this.serializer),this.Ii=new j2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&ln(Yr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(Q.FAILED_PRECONDITION,wp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new qn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(fs(e))return ie(Yr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(Yr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return vu(e).get(yo).next((t=>L.resolve(this.es(t))))}ts(e){return qh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Sp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Mt(t,qo);return i.J().next((a=>{const l=this.ss(a,Sp),c=a.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):vu(e).get(yo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,bp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new se(Q.FAILED_PRECONDITION,wp);return!1}}return!(!this.networkEnabled||!this.inForeground)||qh(e).J().next((i=>this.ss(i,bp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ie(Yr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ic,qo],(e=>{const t=new jp(e,qn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>qh(e).J().next((t=>this.ss(t,Sp).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Wf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Z2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ie(Yr,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?YD:p===17?$A:p===16?QD:p===15?Dg:p===14?XA:p===13?YA:p===12?KD:p===11?QA:void fe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new jp(d,this.ci?this.ci.next():qn.ce),t==="readwrite-primary"?this.Hi(c).next((p=>!!p||this.Yi(c))).next((p=>{if(!p)throw ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new se(Q.FAILED_PRECONDITION,UA);return i(c)})).next((p=>this.Xi(c).next((()=>p)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return vu(e).get(yo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,bp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(Q.FAILED_PRECONDITION,wp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put(yo,t)}static v(){return as.v()}Zi(e){const t=vu(e);return t.get(yo).next((i=>this.es(i)?(ie(Yr,"Releasing primary lease."),t.delete(yo)):L.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(ln(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;yA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ie(Yr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return ln(Yr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ln("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vu(s){return Mt(s,ic)}function qh(s){return Mt(s,qo)}function gN(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Qg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yA()?8:zA(Ot())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new yN;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(So()<=ke.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(So()<=ke.DEBUG&&ie("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(So()<=ke.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):L.resolve())}ys(e,t){if(NT(t))return L.resolve(null);let i=Fn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=$p(t,null,"F"),i=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,$p(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return NT(t)||a.isEqual(ye.min())?L.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?L.resolve(null):(So()<=ke.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bo(t)),this.vs(e,c,t,yD(a,ku)).next((d=>d)))}))}Ds(e,t){let i=new Xe(gS(e));return t.forEach(((a,l)=>{ac(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return So()<=ke.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,Rn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="LocalStore",_N=3e8;class vN{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new lt(we),this.xs=new or((l=>ga(l)),rc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ib(s,e,t,i){return new vN(s,e,t,i)}async function rb(s,e){const t=Ie(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function EN(s,e){const t=Ie(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const T=g.batch,b=T.keys();let O=L.resolve();return b.forEach((H=>{O=O.next((()=>_.getEntry(p,H))).next((K=>{const F=g.docVersions.get(H);de(F!==null,48541),K.version.compareTo(F)<0&&(T.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),_.addEntry(K)))}))})),O.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function sb(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function TN(s,e){const t=Ie(s),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let O=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Rt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),a=a.insert(T,O),(function(K,F,te){return K.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=_N?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(b,O,_)&&d.push(t.Pi.updateTargetData(l,O))}));let p=In(),g=Ne();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(AN(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(ye.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function AN(s,e,t){let i=Ne(),a=Ne();return t.forEach((l=>i=i.add(l))),e.getEntries(s,i).next((l=>{let c=In();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(ye.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ie(Yg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function SN(s,e){const t=Ie(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=aa),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function bN(s,e){const t=Ie(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,L.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Xi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function rg(s,e,t){const i=Ie(s),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!fs(c))throw c;ie(Yg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function o0(s,e,t){const i=Ie(s);let a=ye.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const T=Ie(p),b=T.xs.get(_);return b!==void 0?L.resolve(T.Ms.get(b)):T.Pi.getTargetData(g,_)})(i,c,Fn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:ye.min(),t?l:Ne()))).next((d=>(wN(i,u2(e),d),{documents:d,Qs:l})))))}function wN(s,e,t){let i=s.Os.get(e)||ye.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),s.Os.set(e,i)}class l0{constructor(){this.activeTargetIds=p2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ab{constructor(){this.Mo=new l0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new l0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="ConnectivityMonitor";class c0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(u0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(u0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function sg(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="RestConnection",RN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===_f?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=sg(),d=this.zo(e,t.toUriEncodedString());ie(Ip,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=Wo(g);return this.Jo(e,d,p,i,_).then((T=>(ie(Ip,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw da(Ip,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=RN[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class NN extends CN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=sg();return new Promise(((d,p)=>{const g=new RA;g.setWithCredentials(!0),g.listenOnce(CA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Yh.NO_ERROR:const T=g.getResponseJson();ie(Jt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Yh.TIMEOUT:ie(Jt,`RPC '${e}' ${c} timed out`),p(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const b=g.getStatus();if(ie(Jt,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O?.error;if(H&&H.status&&H.message){const K=(function(te){const W=te.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(W)>=0?W:Q.UNKNOWN})(H.status);p(new se(K,H.message))}else p(new se(Q.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new se(Q.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ie(Jt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ie(Jt,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=sg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=VA(),d=NA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ie(Jt,`Creating RPC '${e}' stream ${a}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let b=!1,O=!1;const H=new DN({Yo:F=>{O?ie(Jt,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(b||(ie(Jt,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),ie(Jt,`RPC '${e}' stream ${a} sending:`,F),T.send(F))},Zo:()=>T.close()}),K=(F,te,W)=>{F.listen(te,(ne=>{try{W(ne)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return K(T,Eu.EventType.OPEN,(()=>{O||(ie(Jt,`RPC '${e}' stream ${a} transport opened.`),H.o_())})),K(T,Eu.EventType.CLOSE,(()=>{O||(O=!0,ie(Jt,`RPC '${e}' stream ${a} transport closed`),H.a_(),this.E_(T))})),K(T,Eu.EventType.ERROR,(F=>{O||(O=!0,da(Jt,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),H.a_(new se(Q.UNAVAILABLE,"The operation could not be completed")))})),K(T,Eu.EventType.MESSAGE,(F=>{if(!O){const te=F.data[0];de(!!te,16349);const W=te,ne=W?.error||W[0]?.error;if(ne){ie(Jt,`RPC '${e}' stream ${a} received error:`,ne);const ve=ne.status;let oe=(function(w){const I=wt[w];if(I!==void 0)return CS(I)})(ve),_e=ne.message;oe===void 0&&(oe=Q.INTERNAL,_e="Unknown error status: "+ve+" with message "+ne.message),O=!0,H.a_(new se(oe,_e)),T.close()}else ie(Jt,`RPC '${e}' stream ${a} received:`,te),H.u_(te)}})),K(d,DA.STAT_EVENT,(F=>{F.stat===Lp.PROXY?ie(Jt,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===Lp.NOPROXY&&ie(Jt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return typeof window<"u"?window:null}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(s){return new x2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="PersistentStream";class lb{constructor(e,t,i,a,l,c,d,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ob(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(ln(t.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new se(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(h0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ie(h0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xN extends lb{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=P2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ye.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?un(c.readTime):ye.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Wp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ef(p)?{documents:kS(l,p)}:{query:LS(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=VS(l,c.resumeToken);const g=Zp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ye.min())>0){d.readTime=Yo(l,c.snapshotVersion.toTimestamp());const g=Zp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=L2(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Wp(this.serializer),t.removeTarget=e,this.q_(t)}}class ON extends lb{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=k2(e.writeResults,e.commitTime),i=un(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Wp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Sf(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class PN extends MN{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Jp(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(Q.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Jp(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ln(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class LN{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{ba(this)&&(ie(Ea,"Restarting streams for network reachability change."),await(async function(p){const g=Ie(p);g.Ea.add(4),await lc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await nd(g)})(this))}))})),this.Ra=new kN(i,a)}}async function nd(s){if(ba(s))for(const e of s.da)await e(!0)}async function lc(s){for(const e of s.da)await e(!1)}function ub(s,e){const t=Ie(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jg(t)?Zg(t):il(t).O_()&&$g(t,e))}function Xg(s,e){const t=Ie(s),i=il(t);t.Ia.delete(e),i.O_()&&cb(t,e),t.Ia.size===0&&(i.O_()?i.L_():ba(t)&&t.Ra.set("Unknown"))}function $g(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(s).Y_(e)}function cb(s,e){s.Va.Ue(e),il(s).Z_(e)}function Zg(s){s.Va=new C2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),il(s).start(),s.Ra.ua()}function Jg(s){return ba(s)&&!il(s).x_()&&s.Ia.size>0}function ba(s){return Ie(s).Ea.size===0}function hb(s){s.Va=void 0}async function UN(s){s.Ra.set("Online")}async function BN(s){s.Ia.forEach(((e,t)=>{$g(s,e)}))}async function zN(s,e){hb(s),Jg(s)?(s.Ra.ha(e),Zg(s)):s.Ra.set("Unknown")}async function qN(s,e,t){if(s.Ra.set("Online"),e instanceof NS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(s,e)}catch(i){ie(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cf(s,i)}else if(e instanceof nf?s.Va.Ze(e):e instanceof DS?s.Va.st(e):s.Va.tt(e),!t.isEqual(ye.min()))try{const i=await sb(s.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Rt.EMPTY_BYTE_STRING,_.snapshotVersion)),cb(l,p);const T=new Xi(_.target,p,g,_.sequenceNumber);$g(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(i){ie(Ea,"Failed to raise snapshot:",i),await Cf(s,i)}}async function Cf(s,e,t){if(!fs(e))throw e;s.Ea.add(1),await lc(s),s.Ra.set("Offline"),t||(t=()=>sb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ie(Ea,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await nd(s)}))}function fb(s,e){return e().catch((t=>Cf(s,t,e)))}async function uc(s){const e=Ie(s),t=cs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:aa;for(;FN(e);)try{const a=await SN(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,jN(e,a)}catch(a){await Cf(e,a)}db(e)&&mb(e)}function FN(s){return ba(s)&&s.Ta.length<10}function jN(s,e){s.Ta.push(e);const t=cs(s);t.O_()&&t.X_&&t.ea(e.mutations)}function db(s){return ba(s)&&!cs(s).x_()&&s.Ta.length>0}function mb(s){cs(s).start()}async function HN(s){cs(s).ra()}async function GN(s){const e=cs(s);for(const t of s.Ta)e.ea(t.mutations)}async function KN(s,e,t){const i=s.Ta.shift(),a=Ug.from(i,e,t);await fb(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await uc(s)}async function QN(s,e){e&&cs(s).X_&&await(async function(i,a){if((function(c){return w2(c)&&c!==Q.ABORTED})(a.code)){const l=i.Ta.shift();cs(i).B_(),await fb(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await uc(i)}})(s,e),db(s)&&mb(s)}async function f0(s,e){const t=Ie(s);t.asyncQueue.verifyOperationInProgress(),ie(Ea,"RemoteStore received new credentials");const i=ba(t);t.Ea.add(3),await lc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nd(t)}async function YN(s,e){const t=Ie(s);e?(t.Ea.delete(2),await nd(t)):e||(t.Ea.add(2),await lc(t),t.Ra.set("Unknown"))}function il(s){return s.ma||(s.ma=(function(t,i,a){const l=Ie(t);return l.sa(),new xN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:UN.bind(null,s),t_:BN.bind(null,s),r_:zN.bind(null,s),H_:qN.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Jg(s)?Zg(s):s.Ra.set("Unknown")):(await s.ma.stop(),hb(s))}))),s.ma}function cs(s){return s.fa||(s.fa=(function(t,i,a){const l=Ie(t);return l.sa(),new ON(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:HN.bind(null,s),r_:QN.bind(null,s),ta:GN.bind(null,s),na:KN.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await uc(s)):(await s.fa.stop(),s.Ta.length>0&&(ie(Ea,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Wg(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(s,e){if(ln("AsyncQueue",`${e}: ${s}`),fs(s))return new se(Q.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ae.comparator(t.key,i.key):(t,i)=>ae.comparator(t.key,i.key),this.keyedMap=Tu(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.ga=new lt(ae.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xo{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xo(e,t,Do.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $N{constructor(){this.queries=m0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ie(t),l=a.queries;a.queries=m0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new se(Q.ABORTED,"Firestore shutting down"))}}function m0(){return new or((s=>pS(s)),Yf)}async function ZN(s,e){const t=Ie(s);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new XN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ey(c,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ty(t)}async function JN(s,e){const t=Ie(s),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WN(s,e){const t=Ie(s);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&ty(t)}function eV(s,e,t){const i=Ie(s),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function ty(s){s.Ca.forEach((e=>{e.next()}))}var ag,p0;(p0=ag||(ag={})).Ma="default",p0.Cache="cache";class tV{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.key=e}}class gb{constructor(e){this.key=e}}class nV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=gS(e),this.tu=new Do(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new d0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const b=a.get(_),O=ac(this.query,T)?T:null,H=!!b&&this.mutatedKeys.has(b.key),K=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let F=!1;b&&O?b.data.isEqual(O.data)?H!==K&&(i.track({type:3,doc:O}),F=!0):this.su(b,O)||(i.track({type:2,doc:O}),F=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(d=!0)):!b&&O?(i.track({type:0,doc:O}),F=!0):b&&!O&&(i.track({type:1,doc:b}),F=!0,(p||g)&&(d=!0)),F&&(O?(c=c.add(O),l=K?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(O,H){const K=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:F})}};return K(O)-K(H)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Xo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new d0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new pb(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ny="SyncEngine";class iV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rV{constructor(e){this.key=e,this.hu=!1}}class sV{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new or((d=>pS(d)),Yf),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ae.comparator),this.Au=new Map,this.Ru=new Hg,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aV(s,e,t=!0){const i=Ab(s);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await yb(i,e,t,!0),a}async function oV(s,e){const t=Ab(s);await yb(t,e,!0,!1)}async function yb(s,e,t,i){const a=await bN(s.localStore,Fn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await lV(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&ub(s.remoteStore,a),d}async function lV(s,e,t,i,a){s.pu=(T,b,O)=>(async function(K,F,te,W){let ne=F.view.ru(te);ne.Cs&&(ne=await o0(K.localStore,F.query,!1).then((({documents:D})=>F.view.ru(D,ne))));const ve=W&&W.targetChanges.get(F.targetId),oe=W&&W.targetMismatches.get(F.targetId)!=null,_e=F.view.applyChanges(ne,K.isPrimaryClient,ve,oe);return y0(K,F.targetId,_e.au),_e.snapshot})(s,T,b,O);const l=await o0(s.localStore,e,!0),c=new nV(e,l.Qs),d=c.ru(l.documents),p=oc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);y0(s,t,g.au);const _=new iV(e,t,c);return s.Tu.set(e,_),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function uV(s,e,t){const i=Ie(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Yf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await rg(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xg(i.remoteStore,a.targetId),og(i,a.targetId)})).catch(Sa)):(og(i,a.targetId),await rg(i.localStore,a.targetId,!0))}async function cV(s,e){const t=Ie(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xg(t.remoteStore,i.targetId))}async function hV(s,e,t){const i=Sb(s);try{const a=await(function(c,d){const p=Ie(c),g=Qe.now(),_=d.reduce(((O,H)=>O.add(H.key)),Ne());let T,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=In(),K=Ne();return p.Ns.getEntries(O,_).next((F=>{H=F,H.forEach(((te,W)=>{W.isValidDocument()||(K=K.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,H))).next((F=>{T=F;const te=[];for(const W of d){const ne=S2(W,T.get(W.key).overlayedDocument);ne!=null&&te.push(new lr(W.key,ne,aS(ne.value.mapValue),gn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,te,d)})).next((F=>{b=F;const te=F.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(O,F.batchId,te)}))})).then((()=>({batchId:b.batchId,changes:_S(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new lt(we)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await cc(i,a.changes),await uc(i.remoteStore)}catch(a){const l=ey(a,"Failed to persist write");t.reject(l)}}async function _b(s,e){const t=Ie(s);try{const i=await TN(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(de(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?de(c.hu,14607):a.removedDocuments.size>0&&(de(c.hu,42227),c.hu=!1))})),await cc(t,i,e)}catch(i){await Sa(i)}}function g0(s,e,t){const i=Ie(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Ie(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,T)=>{for(const b of T.Sa)b.va(d)&&(g=!0)})),g&&ty(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fV(s,e,t){const i=Ie(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new lt(ae.comparator);c=c.insert(l,gt.newNoDocument(l,ye.min()));const d=Ne().add(l),p=new Zf(ye.min(),new Map,new lt(we),c,d);await _b(i,p),i.du=i.du.remove(l),i.Au.delete(e),iy(i)}else await rg(i.localStore,e,!1).then((()=>og(i,e,t))).catch(Sa)}async function dV(s,e){const t=Ie(s),i=e.batch.batchId;try{const a=await EN(t.localStore,e);Eb(t,i,null),vb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await cc(t,a)}catch(a){await Sa(a)}}async function mV(s,e,t){const i=Ie(s);try{const a=await(function(c,d){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(de(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);Eb(i,e,t),vb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await cc(i,a)}catch(a){await Sa(a)}}function vb(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Eb(s,e,t){const i=Ie(s);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function og(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||Tb(s,i)}))}function Tb(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Xg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),iy(s))}function y0(s,e,t){for(const i of t)i instanceof pb?(s.Ru.addReference(i.key,e),pV(s,i)):i instanceof gb?(ie(ny,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||Tb(s,i.key)):fe(19791,{wu:i})}function pV(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ie(ny,"New document in limbo: "+t),s.Eu.add(i),iy(s))}function iy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ae(je.fromString(e)),i=s.fu.next();s.Au.set(i,new rV(t)),s.du=s.du.insert(t,i),ub(s.remoteStore,new Xi(Fn(Mg(t.path)),i,"TargetPurposeLimboResolution",qn.ce))}}async function cc(s,e,t){const i=Ie(s),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){a.push(g);const _=Qg.As(p.targetId,g);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(p,g){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(g,(b=>L.forEach(b.Es,(O=>_.persistence.referenceDelegate.addReference(T,b.targetId,O))).next((()=>L.forEach(b.ds,(O=>_.persistence.referenceDelegate.removeReference(T,b.targetId,O)))))))))}catch(T){if(!fs(T))throw T;ie(Yg,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const O=_.Ms.get(b),H=O.snapshotVersion,K=O.withLastLimboFreeSnapshotVersion(H);_.Ms=_.Ms.insert(b,K)}}})(i.localStore,l))}async function gV(s,e){const t=Ie(s);if(!t.currentUser.isEqual(e)){ie(ny,"User change. New user:",e.toKey());const i=await rb(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new se(Q.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cc(t,i.Ls)}}function yV(s,e){const t=Ie(s),i=t.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function Ab(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fV.bind(null,e),e.Pu.H_=WN.bind(null,e.eventManager),e.Pu.yu=eV.bind(null,e.eventManager),e}function Sb(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mV.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ib(this.persistence,new nb,e.initialUser,this.serializer)}Cu(e){return new Gg(ed.mi,this.serializer)}Du(e){return new ab}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class _V extends Yu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){de(this.persistence.referenceDelegate instanceof Rf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Gg((i=>Rf.mi(i,t)),this.serializer)}}class vV extends Yu{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Sb(this.xu.syncEngine),await uc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ib(this.persistence,new nb,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new ZS(i,e.asyncQueue,t)}Mu(e,t){const i=new TD(t,this.persistence);return new ED(e.asyncQueue,i)}Cu(e){const t=gN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Kg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,VN(),sf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ab}}class Df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>g0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gV.bind(null,this.syncEngine),await YN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $N})()}createDatastore(e){const t=td(e.databaseInfo.databaseId),i=(function(l){return new NN(l)})(e.databaseInfo);return(function(l,c,d,p){return new PN(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new LN(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>g0(this.syncEngine,t,0)),(function(){return c0.v()?new c0:new IN})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,_){const T=new sV(a,l,c,d,p,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ie(t);ie(Ea,"RemoteStore shutting down."),i.Ea.add(5),await lc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Df.provider={build:()=>new Df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ln("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class TV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Kt.UNAUTHENTICATED,this.clientId=Sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ie(hs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ie(hs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ey(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Rp(s,e){s.asyncQueue.verifyOperationInProgress(),ie(hs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await rb(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function _0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await AV(s);ie(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>f0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>f0(e.remoteStore,a))),s._onlineComponents=e}async function AV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ie(hs,"Using user provided OfflineComponentProvider");try{await Rp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;da("Error using user provided cache. Falling back to memory cache: "+t),await Rp(s,new Yu)}}else ie(hs,"Using default OfflineComponentProvider"),await Rp(s,new _V(void 0));return s._offlineComponents}async function bb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ie(hs,"Using user provided OnlineComponentProvider"),await _0(s,s._uninitializedComponentsProvider._online)):(ie(hs,"Using default OnlineComponentProvider"),await _0(s,new Df))),s._onlineComponents}function SV(s){return bb(s).then((e=>e.syncEngine))}async function bV(s){const e=await bb(s),t=e.eventManager;return t.onListen=aV.bind(null,e.syncEngine),t.onUnlisten=uV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cV.bind(null,e.syncEngine),t}function wV(s,e,t={}){const i=new Wi;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new EV({next:b=>{_.Nu(),c.enqueueAndForget((()=>JN(l,T))),b.fromCache&&p.source==="server"?g.reject(new se(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new tV(d,_,{includeMetadataChanges:!0,qa:!0});return ZN(l,T)})(await bV(s),s.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",E0=!0;class T0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=E0}else this.host=e.host,this.ssl=e.ssl??E0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W2)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new aD;switch(i.type){case"firstParty":return new cD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=v0.get(t);i&&(ie("ComponentProvider","Removing Datastore"),v0.delete(t),i.terminate())})(this),Promise.resolve()}}function IV(s,e,t,i={}){s=ma(s,id);const a=Wo(e),l=s._getSettings(),c={...l,emulatorOptions:s._getEmulatorOptions()},d=`${e}:${t}`;a&&(mA(`https://${d}`),pA("Firestore",!0)),l.host!==Ib&&l.host!==d&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!ca(p,c)&&(s._setSettings(p),i.mockUserToken)){let g,_;if(typeof i.mockUserToken=="string")g=i.mockUserToken,_=Kt.MOCK_USER;else{g=k1(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Kt(T)}s._authCredentials=new oD(new OA(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new rl(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(nc(t,xt._jsonSchema))return new xt(e,i||null,new ae(je.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:It("string",xt._jsonSchemaVersion),referencePath:It("string")};class os extends rl{constructor(e,t,i){super(e,t,Mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ae(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function lg(s,e,...t){if(s=cn(s),PA("collection","path",e),s instanceof id){const i=je.fromString(e,...t);return hT(i),new os(s,null,i)}{if(!(s instanceof xt||s instanceof os))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(je.fromString(e,...t));return hT(i),new os(s.firestore,null,i)}}function Rb(s,e,...t){if(s=cn(s),arguments.length===1&&(e=Sg.newId()),PA("doc","path",e),s instanceof id){const i=je.fromString(e,...t);return cT(i),new xt(s,null,new ae(i))}{if(!(s instanceof xt||s instanceof os))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(je.fromString(e,...t));return cT(i),new xt(s.firestore,s instanceof os?s.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="AsyncQueue";class S0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ob(this,"async_queue_retry"),this._c=()=>{const i=sf();i&&ie(A0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fs(e))throw e;ie(A0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ln("INTERNAL UNHANDLED ERROR: ",b0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Wg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&fe(47125,{Pc:b0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function b0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class hc extends id{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new S0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S0(e),this._firestoreClient=void 0,await e}}}function RV(s,e){const t=typeof s=="object"?s:SA(),i=typeof s=="string"?s:_f,a=Tg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=M1("firestore");l&&IV(a,...l)}return a}function Cb(s){if(s._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Db(s),s._firestoreClient}function Db(s){const e=s._freezeSettings(),t=(function(a,l,c,d){return new $D(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new TV(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function CV(s,e){da("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return DV(s,Df.provider,{build:i=>new vV(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function DV(s,e,t){if((s=ma(s,hc))._firestoreClient||s._terminated)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new se(Q.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},Db(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Rt.fromBase64String(e))}catch(t){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:It("string",zn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(nc(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:It("string",Ei._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new se(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:It("string",Ti._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=/^__.*__$/;class VV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}}class Nb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:s})}}class sy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Vb(this.Ac)&&NV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||td(e)}Cc(e,t,i,a=!1){return new sy({Ac:e,methodName:t,Dc:i,path:ht.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ay(s){const e=s._freezeSettings(),t=td(s._databaseId);return new xV(s._databaseId,!!e.ignoreUndefinedProperties,t)}function OV(s,e,t,i,a,l={}){const c=s.Cc(l.merge||l.mergeFields?2:0,e,t,a);oy("Data must be an object, but it was:",c,i);const d=xb(i,c);let p,g;if(l.merge)p=new pn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=ug(e,T,t);if(!c.contains(b))throw new se(Q.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Mb(_,b)||_.push(b)}p=new pn(_),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new VV(new en(d),p,g)}class sd extends ry{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sd}}function MV(s,e,t,i){const a=s.Cc(1,e,t);oy("Data must be an object, but it was:",a,i);const l=[],c=en.empty();ds(i,((p,g)=>{const _=ly(e,p,t);g=cn(g);const T=a.yc(_);if(g instanceof sd)l.push(_);else{const b=fc(g,T);b!=null&&(l.push(_),c.set(_,b))}}));const d=new pn(l);return new Nb(c,d,a.fieldTransforms)}function PV(s,e,t,i,a,l){const c=s.Cc(1,e,t),d=[ug(e,i,t)],p=[a];if(l.length%2!=0)throw new se(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(ug(e,l[b])),p.push(l[b+1]);const g=[],_=en.empty();for(let b=d.length-1;b>=0;--b)if(!Mb(g,d[b])){const O=d[b];let H=p[b];H=cn(H);const K=c.yc(O);if(H instanceof sd)g.push(O);else{const F=fc(H,K);F!=null&&(g.push(O),_.set(O,F))}}const T=new pn(g);return new Nb(_,T,c.fieldTransforms)}function kV(s,e,t,i=!1){return fc(t,s.Cc(i?4:3,e))}function fc(s,e){if(Ob(s=cn(s)))return oy("Unsupported field value:",e,s),xb(s,e);if(s instanceof ry)return(function(i,a){if(!Vb(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=fc(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(i,a){if((i=cn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return g2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Qe.fromDate(i);return{timestampValue:Yo(a.serializer,l)}}if(i instanceof Qe){const l=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yo(a.serializer,l)}}if(i instanceof Ei)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zn)return{bytesValue:VS(a.serializer,i._byteString)};if(i instanceof xt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ti)return(function(c,d){return{mapValue:{fields:{[Vg]:{stringValue:xg},[Fo]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Pg(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${zf(i)}`)})(s,e)}function xb(s,e){const t={};return ZA(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(s,((i,a)=>{const l=fc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Ob(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qe||s instanceof Ei||s instanceof zn||s instanceof xt||s instanceof ry||s instanceof Ti)}function oy(s,e,t){if(!Ob(t)||!kA(t)){const i=zf(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function ug(s,e,t){if((e=cn(e))instanceof rd)return e._internalPath;if(typeof e=="string")return ly(s,e);throw Nf("Field path arguments must be of type string or ",s,!1,void 0,t)}const LV=new RegExp("[~\\*/\\[\\]]");function ly(s,e,t){if(e.search(LV)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Nf(s,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new se(Q.INVALID_ARGUMENT,d+s+p)}function Mb(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UV extends Pb{data(){return super.data()}}function uy(s,e){return typeof e=="string"?ly(s,e):e instanceof rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cy{}class zV extends cy{}function qV(s,e,...t){let i=[];e instanceof cy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof hy)).length,d=l.filter((p=>p instanceof ad)).length;if(c>1||c>0&&d>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class ad extends zV{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ad(e,t,i)}_apply(e){const t=this._parse(e);return kb(e._query,t),new rl(e.firestore,e.converter,Xp(e._query,t))}_parse(e){const t=ay(e.firestore);return(function(l,c,d,p,g,_,T){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){I0(T,_);const H=[];for(const K of T)H.push(w0(p,l,K));b={arrayValue:{values:H}}}else b=w0(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||I0(T,_),b=kV(d,c,T,_==="in"||_==="not-in");return Le.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function FV(s,e,t){const i=e,a=uy("where",s);return ad._create(a,i,t)}class hy extends cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)kb(c,p),c=Xp(c,p)})(e._query,t),new rl(e.firestore,e.converter,Xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function w0(s,e,t){if(typeof(t=cn(t))=="string"){if(t==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mS(e)&&t.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(je.fromString(t));if(!ae.isDocumentKey(i))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Hu(s,new ae(i))}if(t instanceof xt)return Hu(s,t._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function I0(s,e){if(!Array.isArray(s)||s.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kb(s,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jV{convertValue(e,t="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ds(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Fo].arrayValue?.values?.map((i=>ot(i.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new Ei(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=nr(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=je.fromString(e);de(qS(i),9688,{name:e});const a=new pa(i.get(1),i.get(3)),l=new ae(i.popFirst(5));return a.isEqual(t)||ln(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class jh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends Pb{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=No._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}No._jsonSchemaVersion="firestore/documentSnapshot/1.0",No._jsonSchema={type:It("string",No._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class af extends No{data(e={}){return super.data(e)}}class Vo{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new jh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new af(this._firestore,this._userDataWriter,i.key,i,new jh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new af(a._firestore,a._userDataWriter,d.doc.key,d.doc,new jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new af(a._firestore,a._userDataWriter,d.doc.key,d.doc,new jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:GV(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:s})}}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:It("string",Vo._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class KV extends jV{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function Lb(s){s=ma(s,rl);const e=ma(s.firestore,hc),t=Cb(e),i=new KV(e);return BV(s._query),wV(t,s._query).then((a=>new Vo(e,i,s,a)))}function QV(s,e,t,...i){s=ma(s,xt);const a=ma(s.firestore,hc),l=ay(a);let c;return c=typeof(e=cn(e))=="string"||e instanceof rd?PV(l,"updateDoc",s._key,e,t,i):MV(l,"updateDoc",s._key,e),Ub(a,[c.toMutation(s._key,gn.exists(!0))])}function YV(s,e){const t=ma(s.firestore,hc),i=Rb(s),a=HV(s.converter,e);return Ub(t,[OV(ay(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,gn.exists(!1))]).then((()=>i))}function Ub(s,e){return(function(i,a){const l=new Wi;return i.asyncQueue.enqueueAndForget((async()=>hV(await SV(i),a,l))),l.promise})(Cb(s),e)}(function(e,t=!0){(function(a){tl=a})(el),ko(new ha("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new hc(new lD(i.getProvider("auth-internal")),new hD(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),rs(aT,oT,e),rs(aT,oT,"esm2020")})();var XV="firebase",$V="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(XV,$V,"app");function Bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZV=Bb,zb=new ec("auth","Firebase",Bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new vg("@firebase/auth");function JV(s,...e){Vf.logLevel<=ke.WARN&&Vf.warn(`Auth (${el}): ${s}`,...e)}function of(s,...e){Vf.logLevel<=ke.ERROR&&Vf.error(`Auth (${el}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(s,...e){throw fy(s,...e)}function Ai(s,...e){return fy(s,...e)}function qb(s,e,t){const i={...ZV(),[e]:t};return new ec("auth","Firebase",i).create(e,{appName:s.name})}function ua(s){return qb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fy(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return zb.create(s,...e)}function be(s,e,...t){if(!s)throw fy(e,...t)}function $i(s){const e="INTERNAL ASSERTION FAILED: "+s;throw of(e),new Error(e)}function sr(s,e){s||$i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){return typeof self<"u"&&self.location?.href||""}function WV(){return R0()==="http:"||R0()==="https:"}function R0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WV()||q1()||"connection"in navigator)?navigator.onLine:!0}function tx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.shortDelay=e,this.longDelay=t,sr(t>e,"Short delay should be less than long delay!"),this.isMobile=B1()||F1()}get(){return ex()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(s,e){sr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rx=new dc(3e4,6e4);function my(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function sl(s,e,t,i,a={}){return jb(s,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=tc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return z1()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(g.credentials="include"),Fb.fetch()(await Hb(s,s.config.apiHost,t,d),g)})}async function jb(s,e,t){s._canInitEmulator=!1;const i={...nx,...e};try{const a=new ax(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Hh(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Hh(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw Hh(s,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw qb(s,_,g);rr(s,_)}}catch(a){if(a instanceof ar)throw a;rr(s,"network-request-failed",{message:String(a)})}}async function sx(s,e,t,i,a={}){const l=await sl(s,e,t,i,a);return"mfaPendingCredential"in l&&rr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function Hb(s,e,t,i){const a=`${e}${t}?${i}`,l=s,c=l.config.emulator?dy(s.config,a):`${s.config.apiScheme}://${a}`;return ix.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class ax{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ai(this.auth,"network-request-failed")),rx.get())})}}function Hh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ai(s,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(s,e){return sl(s,"POST","/v1/accounts:delete",e)}async function xf(s,e){return sl(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lx(s,e=!1){const t=cn(s),i=await t.getIdToken(e),a=py(i);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Ou(Cp(a.auth_time)),issuedAtTime:Ou(Cp(a.iat)),expirationTime:Ou(Cp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Cp(s){return Number(s)*1e3}function py(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const a=uA(t);return a?JSON.parse(a):(of("Failed to decode base64 JWT payload"),null)}catch(a){return of("Caught error parsing JWT payload as JSON",a?.toString()),null}}function C0(s){const e=py(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ar&&ux(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function ux({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(s){const e=s.auth,t=await s.getIdToken(),i=await Xu(s,xf(e,{idToken:t}));be(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?Gb(a.providerUserInfo):[],c=fx(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!c?.length,g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,_)}async function hx(s){const e=cn(s);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fx(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Gb(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(s,e){const t=await jb(s,{},async()=>{const i=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await Hb(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(p.credentials="include"),Fb.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mx(s,e){return sl(s,"POST","/v2/accounts:revokeToken",my(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=C0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await dx(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new xo;return i&&(be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new cx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Xu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lx(this,e)}reload(){return hx(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await Xu(this,ox(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:O,providerData:H,stsTokenManager:K}=t;be(T&&K,e,"internal-error");const F=xo.fromJSON(this.name,K);be(typeof T=="string",e,"internal-error"),Xr(i,e.name),Xr(a,e.name),be(typeof b=="boolean",e,"internal-error"),be(typeof O=="boolean",e,"internal-error"),Xr(l,e.name),Xr(c,e.name),Xr(d,e.name),Xr(p,e.name),Xr(g,e.name),Xr(_,e.name);const te=new ti({uid:T,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:O,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:g,lastLoginAt:_});return H&&Array.isArray(H)&&(te.providerData=H.map(W=>({...W}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,t,i=!1){const a=new xo;a.updateFromServerResponse(t);const l=new ti({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Gb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new xo;d.updateFromIdToken(i);const p=new ti({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=new Map;function Zi(s){sr(s instanceof Function,"Expected a class definition");let e=D0.get(s);return e?(sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,D0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kb.type="NONE";const N0=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(s,e,t){return`firebase:${s}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=lf(this.userKey,a.apiKey,l),this.fullPersistenceKey=lf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(Zi(N0),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Zi(N0);const c=lf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const b=await xf(e,{idToken:_}).catch(()=>{});if(!b)break;T=await ti._fromGetAccountInfoResponse(e,b,_)}else T=ti._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Oo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Oo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Wb(e))return"Webos";if(Yb(e))return"Safari";if((e.includes("chrome/")||Xb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Qb(s=Ot()){return/firefox\//i.test(s)}function Yb(s=Ot()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(s=Ot()){return/crios\//i.test(s)}function $b(s=Ot()){return/iemobile/i.test(s)}function Zb(s=Ot()){return/android/i.test(s)}function Jb(s=Ot()){return/blackberry/i.test(s)}function Wb(s=Ot()){return/webos/i.test(s)}function gy(s=Ot()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function px(s=Ot()){return gy(s)&&!!window.navigator?.standalone}function gx(){return j1()&&document.documentMode===10}function ew(s=Ot()){return gy(s)||Zb(s)||Wb(s)||Jb(s)||/windows phone/i.test(s)||$b(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(s,e=[]){let t;switch(s){case"Browser":t=V0(Ot());break;case"Worker":t=`${V0(Ot())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${el}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(s,e={}){return sl(s,"GET","/v2/passwordPolicy",my(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=6;class Ex{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??vx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x0(this),this.idTokenSubscription=new x0(this),this.beforeStateQueue=new yx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(ua(this));const t=e?cn(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _x(this),t=new Ex(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await mx(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zi(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yy(s){return cn(s)}class x0{constructor(e){this.auth=e,this.observer=null,this.addObserver=X1(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ax(s){_y=s}function Sx(s){return _y.loadJS(s)}function bx(){return _y.gapiScript}function wx(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(s,e){const t=Tg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ca(l,e??{}))return a;rr(a,"already-initialized")}return t.initialize({options:e})}function Rx(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Zi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function Cx(s,e,t){const i=yy(s);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=nw(e),{host:c,port:d}=Dx(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(ca(g,i.config.emulator)&&ca(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Wo(c)?(mA(`${l}//${c}${p}`),pA("Auth",!0)):Nx()}function nw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Dx(s){const e=nw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:O0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:O0(c)}}}function O0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Nx(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,t){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(s,e){return sx(s,"POST","/v1/accounts:signInWithIdp",my(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="http://localhost";class Ta extends iw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Ta(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Mo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:Vx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends mc{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ta._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Jr.credential(t,i)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends mc{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends mc{constructor(){super("twitter.com")}static credential(e,t){return Ta._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return es.credential(t,i)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await ti._fromIdTokenResponse(e,i,a),c=M0(i);return new $o({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=M0(i);return new $o({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function M0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends ar{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Mf(e,t,i,a)}}function sw(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(s,l,e,i):l})}async function xx(s,e,t=!1){const i=await Xu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return $o._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(s,e,t=!1){const{auth:i}=s;if(yi(i.app))return Promise.reject(ua(i));const a="reauthenticate";try{const l=await Xu(s,sw(i,a,e,s),t);be(l.idToken,i,"internal-error");const c=py(l.idToken);be(c,i,"internal-error");const{sub:d}=c;return be(s.uid===d,i,"user-mismatch"),$o._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(s,e,t=!1){if(yi(s.app))return Promise.reject(ua(s));const i="signIn",a=await sw(s,i,e),l=await $o._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(l.user),l}function Px(s,e,t,i){return cn(s).onIdTokenChanged(e,t,i)}function kx(s,e,t){return cn(s).beforeAuthStateChanged(e,t)}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=1e3,Ux=10;class ow extends aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);gx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ux):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const Bx=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lw.type="SESSION";const uw=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new od(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await zx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=vy("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const b=T;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function Fx(s){Si().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function jx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hx(){return navigator?.serviceWorker?.controller||null}function Gx(){return cw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firebaseLocalStorageDb",Kx=1,kf="firebaseLocalStorage",fw="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ld(s,e){return s.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function Qx(){const s=indexedDB.deleteDatabase(hw);return new pc(s).toPromise()}function fg(){const s=indexedDB.open(hw,Kx);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(kf,{keyPath:fw})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(kf)?e(i):(i.close(),await Qx(),e(await fg()))})})}async function P0(s,e,t){const i=ld(s,!0).put({[fw]:e,value:t});return new pc(i).toPromise()}async function Yx(s,e){const t=ld(s,!1).get(e),i=await new pc(t).toPromise();return i===void 0?null:i.value}function k0(s,e){const t=ld(s,!0).delete(e);return new pc(t).toPromise()}const Xx=800,$x=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>$x)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(Gx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jx(),!this.activeServiceWorker)return;this.sender=new qx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await P0(e,Pf,"1"),await k0(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>P0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Yx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>k0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new pc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const Zx=dw;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(s,e){return e?Zi(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey extends iw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Wx(s){return Mx(s.auth,new Ey(s),s.bypassAuthState)}function eO(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),Ox(t,new Ey(s),s.bypassAuthState)}async function tO(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),xx(t,new Ey(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wx;case"linkViaPopup":case"linkViaRedirect":return tO;case"reauthViaPopup":case"reauthViaRedirect":return eO;default:rr(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new dc(2e3,1e4);class Co extends mw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nO.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="pendingRedirect",uf=new Map;class rO extends mw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const i=await sO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sO(s,e){const t=lO(e),i=oO(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function aO(s,e){uf.set(s._key(),e)}function oO(s){return Zi(s._redirectPersistence)}function lO(s){return lf(iO,s.config.apiKey,s.name)}async function uO(s,e,t=!1){if(yi(s.app))return Promise.reject(ua(s));const i=yy(s),a=Jx(i,e),c=await new rO(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=600*1e3;class hO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ai(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cO&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}}function L0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function pw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function fO(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(s,e={}){return sl(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pO=/^https?/;async function gO(s){if(s.config.emulator)return;const{authorizedDomains:e}=await dO(s);for(const t of e)try{if(yO(t))return}catch{}rr(s,"unauthorized-domain")}function yO(s){const e=cg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!pO.test(t))return!1;if(mO.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new dc(3e4,6e4);function U0(){const s=Si().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function vO(s){return new Promise((e,t)=>{function i(){U0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U0(),t(Ai(s,"network-request-failed"))},timeout:_O.get()})}if(Si().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Si().gapi?.load)i();else{const a=wx("iframefcb");return Si()[a]=()=>{gapi.load?i():t(Ai(s,"network-request-failed"))},Sx(`${bx()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw cf=null,e})}let cf=null;function EO(s){return cf=cf||vO(s),cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new dc(5e3,15e3),AO="__/auth/iframe",SO="emulator/auth/iframe",bO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IO(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?dy(e,SO):`https://${s.config.authDomain}/${AO}`,i={apiKey:e.apiKey,appName:s.name,v:el},a=wO.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${tc(i).slice(1)}`}async function RO(s){const e=await EO(s),t=Si().gapi;return be(t,s,"internal-error"),e.open({where:document.body,url:IO(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bO,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ai(s,"network-request-failed"),d=Si().setTimeout(()=>{l(c)},TO.get());function p(){Si().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DO=500,NO=600,VO="_blank",xO="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OO(s,e,t,i=DO,a=NO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...CO,width:i.toString(),height:a.toString(),top:l,left:c},g=Ot().toLowerCase();t&&(d=Xb(g)?VO:t),Qb(g)&&(e=e||xO,p.scrollbars="yes");const _=Object.entries(p).reduce((b,[O,H])=>`${b}${O}=${H},`,"");if(px(g)&&d!=="_self")return MO(e||"",d),new B0(null);const T=window.open(e||"",d,_);be(T,s,"popup-blocked");try{T.focus()}catch{}return new B0(T)}function MO(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="__/auth/handler",kO="emulator/auth/handler",LO=encodeURIComponent("fac");async function z0(s,e,t,i,a,l){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:el,eventId:a};if(e instanceof rw){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",Y1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof mc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await s._getAppCheckToken(),g=p?`#${LO}=${encodeURIComponent(p)}`:"";return`${UO(s)}?${tc(d).slice(1)}${g}`}function UO({config:s}){return s.emulator?dy(s,kO):`https://${s.authDomain}/${PO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="webStorageSupport";class BO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uw,this._completeRedirectFn=uO,this._overrideRedirectResult=aO}async _openPopup(e,t,i,a){sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await z0(e,t,i,cg(),a);return OO(e,l,vy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await z0(e,t,i,cg(),a);return Fx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(sr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RO(e),i=new hO(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dp,{type:Dp},a=>{const l=a?.[0]?.[Dp];l!==void 0&&t(!!l),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ew()||Yb()||gy()}}const zO=BO;var q0="@firebase/auth",F0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jO(s){ko(new ha("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(s)},g=new Tx(i,a,l,p);return Rx(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ko(new ha("auth-internal",e=>{const t=yy(e.getProvider("auth").getImmediate());return(i=>new qO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(q0,F0,FO(s)),rs(q0,F0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=300,GO=dA("authIdTokenMaxAge")||HO;let j0=null;const KO=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>GO)return;const a=t?.token;j0!==a&&(j0=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function QO(s=SA()){const e=Tg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=Ix(s,{popupRedirectResolver:zO,persistence:[Zx,Bx,uw]}),i=dA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=KO(l.toString());kx(t,c,()=>c(t.currentUser)),Px(t,d=>c(d))}}const a=hA("auth");return a&&Cx(t,`http://${a}`),t}function YO(){return document.getElementsByTagName("head")?.[0]??document}Ax({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const l=Ai("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",YO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jO("Browser");const XO={apiKey:"AIzaSyBin8q9AYENaq5Up3v90jKQbrtV2zIwQwU",authDomain:"space-repetition-7a29e.firebaseapp.com",projectId:"space-repetition-7a29e",storageBucket:"space-repetition-7a29e.firebasestorage.app",messagingSenderId:"40672936283",appId:"1:40672936283:web:c19512816f040c41771a7e",measurementId:"G-37HBQBJ1LZ"},gw=AA(XO);QO(gw);const $u=RV(gw);CV($u).catch(s=>{console.warn("IndexedDb persistence failed:",s)});function $O(){const[s,e]=$.useState([]),[t,i]=$.useState(""),a=async()=>{const c=await Lb(lg($u,"decks"));e(c.docs.map(d=>({id:d.id,...d.data()})))},l=async()=>{t&&(await YV(lg($u,"decks"),{name:t}),i(""),a())};return $.useEffect(()=>{a()},[]),Pe.jsxs("div",{className:"p-4",children:[Pe.jsx("h1",{className:"text-xl font-bold mb-4",children:"Decks"}),Pe.jsx("input",{type:"text",placeholder:"New deck name",value:t,onChange:c=>i(c.target.value),className:"border p-2 mr-2"}),Pe.jsx("button",{onClick:l,className:"bg-blue-500 text-white p-2",children:"Add Deck"}),Pe.jsx("ul",{className:"mt-4 space-y-2",children:s.map(c=>Pe.jsx("li",{children:Pe.jsx(Po,{to:`/review/${c.id}`,className:"text-blue-500 underline",children:c.name})},c.id))})]})}function ZO(){const{deckId:s}=xR(),[e,t]=$.useState([]),[i,a]=$.useState(0),[l,c]=$.useState(!1),d=async()=>{const _=qV(lg($u,"cards"),FV("deckId","==",s)),T=await Lb(_);t(T.docs.map(b=>({id:b.id,...b.data()})))},p=async _=>{const T=e[i];let b=T.interval||1,O=T.ease||2.5;_==="hard"?b=1:b=Math.round(b*O);const H=new Date;H.setDate(H.getDate()+b),await QV(Rb($u,"cards",T.id),{interval:b,due:H.toISOString()}),c(!1),a(i+1)};if($.useEffect(()=>{d()},[]),!e.length)return Pe.jsx("p",{className:"p-4",children:"No cards to review!"});if(i>=e.length)return Pe.jsx("p",{className:"p-4",children:"Review complete!"});const g=e[i];return Pe.jsxs("div",{className:"p-4",children:[Pe.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Review Card ",i+1,"/",e.length]}),Pe.jsxs("div",{className:"border p-4 mb-4",children:[Pe.jsx("p",{className:"text-lg",children:g.question}),l&&Pe.jsx("p",{className:"mt-2 text-green-600",children:g.answer})]}),!l&&Pe.jsx("button",{onClick:()=>c(!0),className:"bg-blue-500 text-white p-2",children:"Show Answer"}),l&&Pe.jsxs("div",{className:"flex gap-2 mt-2",children:[Pe.jsx("button",{onClick:()=>p("easy"),className:"bg-green-500 text-white p-2",children:"Easy"}),Pe.jsx("button",{onClick:()=>p("medium"),className:"bg-yellow-500 text-white p-2",children:"Medium"}),Pe.jsx("button",{onClick:()=>p("hard"),className:"bg-red-500 text-white p-2",children:"Hard"})]})]})}function JO(){return Pe.jsxs("nav",{className:"p-4 bg-blue-500 text-white flex gap-4",children:[Pe.jsx(Po,{to:"/",children:"Home"}),Pe.jsx(Po,{to:"/decks",children:"Decks"})]})}function WO(){return Pe.jsxs(g1,{children:[Pe.jsx(JO,{}),Pe.jsxs(QR,{children:[Pe.jsx(Gh,{path:"/",element:Pe.jsx(I1,{})}),Pe.jsx(Gh,{path:"/decks",element:Pe.jsx($O,{})}),Pe.jsx(Gh,{path:"/review/:deckId",element:Pe.jsx(ZO,{})})]})]})}tR.createRoot(document.getElementById("root")).render(Pe.jsx(QI.StrictMode,{children:Pe.jsx(WO,{})}));
