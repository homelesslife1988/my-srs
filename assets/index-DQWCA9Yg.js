(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function X0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var hp={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function YI(){if(LE)return du;LE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var UE;function XI(){return UE||(UE=1,hp.exports=YI()),hp.exports}var _e=XI(),fp={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function $I(){if(BE)return De;BE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,K={};function q(N,ee,he){this.props=N,this.context=ee,this.refs=K,this.updater=he||O}q.prototype.isReactComponent={},q.prototype.setState=function(N,ee){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ee,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function te(){}te.prototype=q.prototype;function W(N,ee,he){this.props=N,this.context=ee,this.refs=K,this.updater=he||O}var ne=W.prototype=new te;ne.constructor=W,H(ne,q.prototype),ne.isPureReactComponent=!0;var ge=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function D(N,ee,he,ue,ye,Pe){return he=Pe.ref,{$$typeof:s,type:N,key:ee,ref:he!==void 0?he:null,props:Pe}}function w(N,ee){return D(N.type,ee,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function M(N){var ee={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return ee[he]})}var x=/\/+/g;function k(N,ee){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):ee.toString(36)}function C(){}function dt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(ee){N.status==="pending"&&(N.status="fulfilled",N.value=ee)},function(ee){N.status==="pending"&&(N.status="rejected",N.reason=ee)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function st(N,ee,he,ue,ye){var Pe=typeof N;(Pe==="undefined"||Pe==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(Pe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case s:case e:be=!0;break;case _:return be=N._init,st(be(N._payload),ee,he,ue,ye)}}if(be)return ye=ye(N),be=ue===""?"."+k(N,0):ue,ge(ye)?(he="",be!=null&&(he=be.replace(x,"$&/")+"/"),st(ye,ee,he,"",function(jn){return jn})):ye!=null&&(I(ye)&&(ye=w(ye,he+(ye.key==null||N&&N.key===ye.key?"":(""+ye.key).replace(x,"$&/")+"/")+be)),ee.push(ye)),1;be=0;var qt=ue===""?".":ue+":";if(ge(N))for(var $e=0;$e<N.length;$e++)ue=N[$e],Pe=qt+k(ue,$e),be+=st(ue,ee,he,Pe,ye);else if($e=S(N),typeof $e=="function")for(N=$e.call(N),$e=0;!(ue=N.next()).done;)ue=ue.value,Pe=qt+k(ue,$e++),be+=st(ue,ee,he,Pe,ye);else if(Pe==="object"){if(typeof N.then=="function")return st(dt(N),ee,he,ue,ye);throw ee=String(N),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return be}function Y(N,ee,he){if(N==null)return N;var ue=[],ye=0;return st(N,ue,"","",function(Pe){return ee.call(he,Pe,ye++)}),ue}function ce(N){if(N._status===-1){var ee=N._result;ee=ee(),ee.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=ee)}if(N._status===1)return N._result.default;throw N._result}var ve=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function ze(){}return De.Children={map:Y,forEach:function(N,ee,he){Y(N,function(){ee.apply(this,arguments)},he)},count:function(N){var ee=0;return Y(N,function(){ee++}),ee},toArray:function(N){return Y(N,function(ee){return ee})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},De.Component=q,De.Fragment=t,De.Profiler=a,De.PureComponent=W,De.StrictMode=i,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,De.__COMPILER_RUNTIME={__proto__:null,c:function(N){return oe.H.useMemoCache(N)}},De.cache=function(N){return function(){return N.apply(null,arguments)}},De.cloneElement=function(N,ee,he){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ue=H({},N.props),ye=N.key,Pe=void 0;if(ee!=null)for(be in ee.ref!==void 0&&(Pe=void 0),ee.key!==void 0&&(ye=""+ee.key),ee)!re.call(ee,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ee.ref===void 0||(ue[be]=ee[be]);var be=arguments.length-2;if(be===1)ue.children=he;else if(1<be){for(var qt=Array(be),$e=0;$e<be;$e++)qt[$e]=arguments[$e+2];ue.children=qt}return D(N.type,ye,void 0,void 0,Pe,ue)},De.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},De.createElement=function(N,ee,he){var ue,ye={},Pe=null;if(ee!=null)for(ue in ee.key!==void 0&&(Pe=""+ee.key),ee)re.call(ee,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=ee[ue]);var be=arguments.length-2;if(be===1)ye.children=he;else if(1<be){for(var qt=Array(be),$e=0;$e<be;$e++)qt[$e]=arguments[$e+2];ye.children=qt}if(N&&N.defaultProps)for(ue in be=N.defaultProps,be)ye[ue]===void 0&&(ye[ue]=be[ue]);return D(N,Pe,void 0,void 0,null,ye)},De.createRef=function(){return{current:null}},De.forwardRef=function(N){return{$$typeof:d,render:N}},De.isValidElement=I,De.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ce}},De.memo=function(N,ee){return{$$typeof:g,type:N,compare:ee===void 0?null:ee}},De.startTransition=function(N){var ee=oe.T,he={};oe.T=he;try{var ue=N(),ye=oe.S;ye!==null&&ye(he,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ze,ve)}catch(Pe){ve(Pe)}finally{oe.T=ee}},De.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},De.use=function(N){return oe.H.use(N)},De.useActionState=function(N,ee,he){return oe.H.useActionState(N,ee,he)},De.useCallback=function(N,ee){return oe.H.useCallback(N,ee)},De.useContext=function(N){return oe.H.useContext(N)},De.useDebugValue=function(){},De.useDeferredValue=function(N,ee){return oe.H.useDeferredValue(N,ee)},De.useEffect=function(N,ee,he){var ue=oe.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(N,ee)},De.useId=function(){return oe.H.useId()},De.useImperativeHandle=function(N,ee,he){return oe.H.useImperativeHandle(N,ee,he)},De.useInsertionEffect=function(N,ee){return oe.H.useInsertionEffect(N,ee)},De.useLayoutEffect=function(N,ee){return oe.H.useLayoutEffect(N,ee)},De.useMemo=function(N,ee){return oe.H.useMemo(N,ee)},De.useOptimistic=function(N,ee){return oe.H.useOptimistic(N,ee)},De.useReducer=function(N,ee,he){return oe.H.useReducer(N,ee,he)},De.useRef=function(N){return oe.H.useRef(N)},De.useState=function(N){return oe.H.useState(N)},De.useSyncExternalStore=function(N,ee,he){return oe.H.useSyncExternalStore(N,ee,he)},De.useTransition=function(){return oe.H.useTransition()},De.version="19.1.1",De}var zE;function yg(){return zE||(zE=1,fp.exports=$I()),fp.exports}var $=yg();const ZI=X0($);var dp={exports:{}},mu={},mp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function JI(){return qE||(qE=1,(function(s){function e(Y,ce){var ve=Y.length;Y.push(ce);e:for(;0<ve;){var ze=ve-1>>>1,N=Y[ze];if(0<a(N,ce))Y[ze]=ce,Y[ve]=N,ve=ze;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ce=Y[0],ve=Y.pop();if(ve!==ce){Y[0]=ve;e:for(var ze=0,N=Y.length,ee=N>>>1;ze<ee;){var he=2*(ze+1)-1,ue=Y[he],ye=he+1,Pe=Y[ye];if(0>a(ue,ve))ye<N&&0>a(Pe,ue)?(Y[ze]=Pe,Y[ye]=ve,ze=ye):(Y[ze]=ue,Y[he]=ve,ze=he);else if(ye<N&&0>a(Pe,ve))Y[ze]=Pe,Y[ye]=ve,ze=ye;else break e}}return ce}function a(Y,ce){var ve=Y.sortIndex-ce.sortIndex;return ve!==0?ve:Y.id-ce.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,T=null,S=3,O=!1,H=!1,K=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ge(Y){for(var ce=t(g);ce!==null;){if(ce.callback===null)i(g);else if(ce.startTime<=Y)i(g),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(g)}}function oe(Y){if(K=!1,ge(Y),!H)if(t(p)!==null)H=!0,re||(re=!0,k());else{var ce=t(g);ce!==null&&st(oe,ce.startTime-Y)}}var re=!1,D=-1,w=5,I=-1;function M(){return q?!0:!(s.unstable_now()-I<w)}function x(){if(q=!1,re){var Y=s.unstable_now();I=Y;var ce=!0;try{e:{H=!1,K&&(K=!1,W(D),D=-1),O=!0;var ve=S;try{t:{for(ge(Y),T=t(p);T!==null&&!(T.expirationTime>Y&&M());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,S=T.priorityLevel;var N=ze(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof N=="function"){T.callback=N,ge(Y),ce=!0;break t}T===t(p)&&i(p),ge(Y)}else i(p);T=t(p)}if(T!==null)ce=!0;else{var ee=t(g);ee!==null&&st(oe,ee.startTime-Y),ce=!1}}break e}finally{T=null,S=ve,O=!1}ce=void 0}}finally{ce?k():re=!1}}}var k;if(typeof ne=="function")k=function(){ne(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,dt=C.port2;C.port1.onmessage=x,k=function(){dt.postMessage(null)}}else k=function(){te(x,0)};function st(Y,ce){D=te(function(){Y(s.unstable_now())},ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var ve=S;S=ce;try{return Y()}finally{S=ve}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ve=S;S=Y;try{return ce()}finally{S=ve}},s.unstable_scheduleCallback=function(Y,ce,ve){var ze=s.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,Y){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ve+N,Y={id:_++,callback:ce,priorityLevel:Y,startTime:ve,expirationTime:N,sortIndex:-1},ve>ze?(Y.sortIndex=ve,e(g,Y),t(p)===null&&Y===t(g)&&(K?(W(D),D=-1):K=!0,st(oe,ve-ze))):(Y.sortIndex=N,e(p,Y),H||O||(H=!0,re||(re=!0,k()))),Y},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(Y){var ce=S;return function(){var ve=S;S=ce;try{return Y.apply(this,arguments)}finally{S=ve}}}})(pp)),pp}var FE;function WI(){return FE||(FE=1,mp.exports=JI()),mp.exports}var gp={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function eR(){if(jE)return Zt;jE=1;var s=yg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Zt.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},Zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},Zt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:O}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},Zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},Zt.requestFormReset=function(p){i.d.r(p)},Zt.unstable_batchedUpdates=function(p,g){return p(g)},Zt.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.1.1",Zt}var HE;function tR(){if(HE)return gp.exports;HE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gp.exports=eR(),gp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function nR(){if(GE)return mu;GE=1;var s=WI(),e=yg(),t=tR();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),n;if(m===u)return d(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=m;break}if(A===u){E=!0,u=f,o=m;break}A=A.sibling}if(!E){for(A=m.child;A;){if(A===o){E=!0,o=m,u=f;break}if(A===u){E=!0,u=m,o=f;break}A=A.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function g(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=g(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function dt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case q:return"Profiler";case K:return"StrictMode";case oe:return"Suspense";case re:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case ne:return(n.displayName||"Context")+".Provider";case W:return(n._context.displayName||"Context")+".Consumer";case ge:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:dt(n.type)||"Memo";case w:r=n._payload,n=n._init;try{return dt(n(r))}catch{}}return null}var st=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ze=[],N=-1;function ee(n){return{current:n}}function he(n){0>N||(n.current=ze[N],ze[N]=null,N--)}function ue(n,r){N++,ze[N]=n.current,n.current=r}var ye=ee(null),Pe=ee(null),be=ee(null),qt=ee(null);function $e(n,r){switch(ue(be,r),ue(Pe,n),ue(ye,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?hE(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=hE(r),n=fE(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(ye),ue(ye,n)}function jn(){he(ye),he(Pe),he(be)}function ol(n){n.memoizedState!==null&&ue(qt,n);var r=ye.current,o=fE(r,n.type);r!==o&&(ue(Pe,n),ue(ye,o))}function Ia(n){Pe.current===n&&(he(ye),he(Pe)),qt.current===n&&(he(qt),lu._currentValue=ve)}var Ra=Object.prototype.hasOwnProperty,gs=s.unstable_scheduleCallback,Ca=s.unstable_cancelCallback,fd=s.unstable_shouldYield,ll=s.unstable_requestPaint,fn=s.unstable_now,_c=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,Pt=s.unstable_UserBlockingPriority,Di=s.unstable_NormalPriority,dd=s.unstable_LowPriority,ul=s.unstable_IdlePriority,md=s.log,ys=s.unstable_setDisableYieldValue,cr=null,Yt=null;function Cn(n){if(typeof md=="function"&&ys(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(cr,n)}catch{}}var nn=Math.clz32?Math.clz32:Ec,pd=Math.log,vc=Math.LN2;function Ec(n){return n>>>=0,n===0?32:31-(pd(n)/vc|0)|0}var ni=256,hr=4194304;function Hn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Dn(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=Hn(u):(E&=A,E!==0?f=Hn(E):o||(o=A&~n,o!==0&&(f=Hn(o))))):(A=u&~m,A!==0?f=Hn(A):E!==0?f=Hn(E):o||(o=u&~n,o!==0&&(f=Hn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function fr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Da(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var n=ni;return ni<<=1,(ni&4194048)===0&&(ni=256),n}function dr(){var n=hr;return hr<<=1,(hr&62914560)===0&&(hr=4194304),n}function Na(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function yt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Tc(n,r,o,u,f,m){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,R=n.expirationTimes,z=n.hiddenUpdates;for(o=E&~o;0<o;){var X=31-nn(o),J=1<<X;A[X]=0,R[X]=-1;var F=z[X];if(F!==null)for(z[X]=null,X=0;X<F.length;X++){var j=F[X];j!==null&&(j.lane&=-536870913)}o&=~J}u!==0&&mr(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~r))}function mr(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-nn(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function pr(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-nn(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function hl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ni(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:xE(n.type))}function gd(n,r){var o=ce.p;try{return ce.p=n,r()}finally{ce.p=o}}var ii=Math.random().toString(36).slice(2),_t="__reactFiber$"+ii,Ft="__reactProps$"+ii,xi="__reactContainer$"+ii,_s="__reactEvents$"+ii,vs="__reactListeners$"+ii,yd="__reactHandles$"+ii,Gn="__reactResources$"+ii,gr="__reactMarker$"+ii;function xa(n){delete n[_t],delete n[Ft],delete n[_s],delete n[vs],delete n[yd]}function ri(n){var r=n[_t];if(r)return r;for(var o=n.parentNode;o;){if(r=o[xi]||o[_t]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=gE(n);n!==null;){if(o=n[_t])return o;n=gE(n)}return r}n=o,o=n.parentNode}return null}function si(n){if(n=n[_t]||n[xi]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function yr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function _r(n){var r=n[Gn];return r||(r=n[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(n){n[gr]=!0}var Ac=new Set,Es={};function ai(n,r){oi(n,r),oi(n+"Capture",r)}function oi(n,r){for(Es[n]=r,n=0;n<r.length;n++)Ac.add(r[n])}var Ts=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),li={},Va={};function _d(n){return Ra.call(Va,n)?!0:Ra.call(li,n)?!1:Ts.test(n)?Va[n]=!0:(li[n]=!0,!1)}function As(n,r,o){if(_d(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function bs(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Nn(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var Ss,Oa;function Vi(n){if(Ss===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ss=r&&r[1]||"",Oa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ss+n+Oa}var Ma=!1;function Pa(n,r){if(!n||Ma)return"";Ma=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(j){var F=j}Reflect.construct(n,[],J)}else{try{J.call()}catch(j){F=j}n.call(J.prototype)}}else{try{throw Error()}catch(j){F=j}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(j){if(j&&F&&typeof j.stack=="string")return[j.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],A=m[1];if(E&&A){var R=E.split(`
`),z=A.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===z.length)for(u=R.length-1,f=z.length-1;1<=u&&0<=f&&R[u]!==z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==z[f]){var X=`
`+R[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{Ma=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Vi(o):""}function vd(n){switch(n.tag){case 26:case 27:case 5:return Vi(n.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 15:return Pa(n.type,!1);case 11:return Pa(n.type.render,!1);case 1:return Pa(n.type,!0);case 31:return Vi("Activity");default:return""}}function Kn(n){try{var r="";do r+=vd(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ut(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ws(n){var r=vr(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Er(n){n._valueTracker||(n._valueTracker=ws(n))}function Ze(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=vr(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Oi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Is=/[\n"\\]/g;function kt(n){return n.replace(Is,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function dl(n,r,o,u,f,m,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ut(r)):n.value!==""+ut(r)&&(n.value=""+ut(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?pl(n,E,ut(r)):o!=null?pl(n,E,ut(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+ut(A):n.removeAttribute("name")}function ml(n,r,o,u,f,m,E,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+ut(o):"",r=r!=null?""+ut(r):o,A||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function pl(n,r,o){r==="number"&&Oi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Tr(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ut(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function bc(n,r,o){if(r!=null&&(r=""+ut(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+ut(o):""}function Sc(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(st(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=ut(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function xn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Mi.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function yl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&gl(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&gl(n,m,r[m])}function ka(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qn(n){return Ic.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var _l=null;function vl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,rn=null;function Rc(n){var r=si(n);if(r&&(n=r.stateNode)){var o=n[Ft]||null;e:switch(n=r.stateNode,r.type){case"input":if(dl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+kt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Ft]||null;if(!f)throw Error(i(90));dl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Ze(u)}break e;case"textarea":bc(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Tr(n,!!o.multiple,r,!1)}}}var Rs=!1;function Cs(n,r,o){if(Rs)return n(r,o);Rs=!0;try{var u=n(r);return u}finally{if(Rs=!1,(Ar!==null||rn!==null)&&(gh(),Ar&&(r=Ar,n=rn,rn=Ar=null,Rc(r),n)))for(r=0;r<n.length;r++)Rc(n[r])}}function br(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Ft]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(sn)try{var Sr={};Object.defineProperty(Sr,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Sr,Sr),window.removeEventListener("test",Sr,Sr)}catch{Pi=!1}var Vn=null,nt=null,La=null;function Cc(){if(La)return La;var n,r=nt,o=r.length,u,f="value"in Vn?Vn.value:Vn.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&r[o-u]===f[m-u];u++);return La=f.slice(n,1<u?1-u:void 0)}function Ds(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ns(){return!0}function El(){return!1}function Dt(n){function r(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ns:El,this.isPropagationStopped=El,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),r}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Dt(Xt),Vs=_({},Xt,{view:0,detail:0}),Os=Dt(Vs),Ua,Ms,ui,Ps=_({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(Ua=n.screenX-ui.screenX,Ms=n.screenY-ui.screenY):Ms=Ua=0,ui=n),Ua)},movementY:function(n){return"movementY"in n?n.movementY:Ms}}),ks=Dt(Ps),Ed=_({},Ps,{dataTransfer:0}),Dc=Dt(Ed),Ls=_({},Vs,{relatedTarget:0}),Ba=Dt(Ls),Nc=_({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),Tl=Dt(Nc),Al=_({},Xt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xc=Dt(Al),za=_({},Xt,{data:0}),bl=Dt(za),Vc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ki={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Oc[n])?!!r[n]:!1}function qa(){return Mc}var Pc=_({},Vs,{key:function(n){if(n.key){var r=Vc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ds(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ki[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(n){return n.type==="keypress"?Ds(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ds(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fa=Dt(Pc),an=_({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Dt(an),kc=_({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),wr=Dt(kc),h=_({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Dt(h),v=_({},Ps,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),b=Dt(v),B=_({},Xt,{newState:0,oldState:0}),G=Dt(B),se=[9,13,27,32],Ce=sn&&"CompositionEvent"in window,rt=null;sn&&"documentMode"in document&&(rt=document.documentMode);var He=sn&&"TextEvent"in window&&!rt,Et=sn&&(!Ce||rt&&8<rt&&11>=rt),yn=" ",ci=!1;function Yn(n,r){switch(n){case"keyup":return se.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xn(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $n=!1;function wl(n,r){switch(n){case"compositionend":return Xn(r);case"keypress":return r.which!==32?null:(ci=!0,yn);case"textInput":return n=r.data,n===yn&&ci?null:n;default:return null}}function Tw(n,r){if($n)return n==="compositionend"||!Ce&&Yn(n,r)?(n=Cc(),La=nt=Vn=null,$n=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Et&&r.locale!=="ko"?null:r.data;default:return null}}var Aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Aw[n.type]:r==="textarea"}function Iy(n,r,o,u){Ar?rn?rn.push(u):rn=[u]:Ar=u,r=Ah(r,"onChange"),0<r.length&&(o=new xs("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Il=null,Rl=null;function bw(n){aE(n,0)}function Lc(n){var r=yr(n);if(Ze(r))return n}function Ry(n,r){if(n==="change")return r}var Cy=!1;if(sn){var Td;if(sn){var Ad="oninput"in document;if(!Ad){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),Ad=typeof Dy.oninput=="function"}Td=Ad}else Td=!1;Cy=Td&&(!document.documentMode||9<document.documentMode)}function Ny(){Il&&(Il.detachEvent("onpropertychange",xy),Rl=Il=null)}function xy(n){if(n.propertyName==="value"&&Lc(Rl)){var r=[];Iy(r,Rl,n,vl(n)),Cs(bw,r)}}function Sw(n,r,o){n==="focusin"?(Ny(),Il=r,Rl=o,Il.attachEvent("onpropertychange",xy)):n==="focusout"&&Ny()}function ww(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lc(Rl)}function Iw(n,r){if(n==="click")return Lc(r)}function Rw(n,r){if(n==="input"||n==="change")return Lc(r)}function Cw(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var _n=typeof Object.is=="function"?Object.is:Cw;function Cl(n,r){if(_n(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ra.call(r,f)||!_n(n[f],r[f]))return!1}return!0}function Vy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Oy(n,r){var o=Vy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vy(o)}}function My(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?My(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Py(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Oi(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Oi(n.document)}return r}function bd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Dw=sn&&"documentMode"in document&&11>=document.documentMode,ja=null,Sd=null,Dl=null,wd=!1;function ky(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;wd||ja==null||ja!==Oi(u)||(u=ja,"selectionStart"in u&&bd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Dl&&Cl(Dl,u)||(Dl=u,u=Ah(Sd,"onSelect"),0<u.length&&(r=new xs("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=ja)))}function Us(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Ha={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},Id={},Ly={};sn&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function Bs(n){if(Id[n])return Id[n];if(!Ha[n])return n;var r=Ha[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Ly)return Id[n]=r[o];return n}var Uy=Bs("animationend"),By=Bs("animationiteration"),zy=Bs("animationstart"),Nw=Bs("transitionrun"),xw=Bs("transitionstart"),Vw=Bs("transitioncancel"),qy=Bs("transitionend"),Fy=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function Zn(n,r){Fy.set(n,r),ai(r,[n])}var jy=new WeakMap;function On(n,r){if(typeof n=="object"&&n!==null){var o=jy.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Kn(r)},jy.set(n,r),r)}return{value:n,source:r,stack:Kn(r)}}var Mn=[],Ga=0,Cd=0;function Uc(){for(var n=Ga,r=Cd=Ga=0;r<n;){var o=Mn[r];Mn[r++]=null;var u=Mn[r];Mn[r++]=null;var f=Mn[r];Mn[r++]=null;var m=Mn[r];if(Mn[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&Hy(o,f,m)}}function Bc(n,r,o,u){Mn[Ga++]=n,Mn[Ga++]=r,Mn[Ga++]=o,Mn[Ga++]=u,Cd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Dd(n,r,o,u){return Bc(n,r,o,u),zc(n)}function Ka(n,r){return Bc(n,null,null,r),zc(n)}function Hy(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-nn(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function zc(n){if(50<eu)throw eu=0,Pm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Qa={};function Ow(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,r,o,u){return new Ow(n,r,o,u)}function Nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Li(n,r){var o=n.alternate;return o===null?(o=vn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Gy(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function qc(n,r,o,u,f,m){var E=0;if(u=n,typeof n=="function")Nd(n)&&(E=1);else if(typeof n=="string")E=PI(n,o,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=vn(31,o,r,f),n.elementType=I,n.lanes=m,n;case H:return zs(o.children,f,m,r);case K:E=8,f|=24;break;case q:return n=vn(12,o,r,f|2),n.elementType=q,n.lanes=m,n;case oe:return n=vn(13,o,r,f),n.elementType=oe,n.lanes=m,n;case re:return n=vn(19,o,r,f),n.elementType=re,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:case ne:E=10;break e;case W:E=9;break e;case ge:E=11;break e;case D:E=14;break e;case w:E=16,u=null;break e}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=vn(E,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function zs(n,r,o,u){return n=vn(7,n,u,r),n.lanes=o,n}function xd(n,r,o){return n=vn(6,n,null,r),n.lanes=o,n}function Vd(n,r,o){return r=vn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ya=[],Xa=0,Fc=null,jc=0,Pn=[],kn=0,qs=null,Ui=1,Bi="";function Fs(n,r){Ya[Xa++]=jc,Ya[Xa++]=Fc,Fc=n,jc=r}function Ky(n,r,o){Pn[kn++]=Ui,Pn[kn++]=Bi,Pn[kn++]=qs,qs=n;var u=Ui;n=Bi;var f=32-nn(u)-1;u&=~(1<<f),o+=1;var m=32-nn(r)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Ui=1<<32-nn(r)+f|o<<f|u,Bi=m+n}else Ui=1<<m|o<<f|u,Bi=n}function Od(n){n.return!==null&&(Fs(n,1),Ky(n,1,0))}function Md(n){for(;n===Fc;)Fc=Ya[--Xa],Ya[Xa]=null,jc=Ya[--Xa],Ya[Xa]=null;for(;n===qs;)qs=Pn[--kn],Pn[kn]=null,Bi=Pn[--kn],Pn[kn]=null,Ui=Pn[--kn],Pn[kn]=null}var on=null,mt=null,Fe=!1,js=null,hi=!1,Pd=Error(i(519));function Hs(n){var r=Error(i(418,""));throw Vl(On(r,n)),Pd}function Qy(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[_t]=n,r[Ft]=u,o){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(o=0;o<nu.length;o++)Me(nu[o],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),ml(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Er(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Sc(r,u.value,u.defaultValue,u.children),Er(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||cE(r.textContent,o)?(u.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),u.onScroll!=null&&Me("scroll",r),u.onScrollEnd!=null&&Me("scrollend",r),u.onClick!=null&&(r.onclick=bh),r=!0):r=!1,r||Hs(n)}function Yy(n){for(on=n.return;on;)switch(on.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:on=on.return}}function Nl(n){if(n!==on)return!1;if(!Fe)return Yy(n),Fe=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Zm(n.type,n.memoizedProps)),o=!o),o&&mt&&Hs(n),Yy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){mt=Wn(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}mt=null}}else r===27?(r=mt,qr(n.type)?(n=tp,tp=null,mt=n):mt=r):mt=on?Wn(n.stateNode.nextSibling):null;return!0}function xl(){mt=on=null,Fe=!1}function Xy(){var n=js;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),js=null),n}function Vl(n){js===null?js=[n]:js.push(n)}var kd=ee(null),Gs=null,zi=null;function Ir(n,r,o){ue(kd,r._currentValue),r._currentValue=o}function qi(n){n._currentValue=kd.current,he(kd)}function Ld(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Ud(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var R=0;R<r.length;R++)if(A.context===r[R]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),Ld(m.return,o,n),u||(E=null);break e}m=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),Ld(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Ol(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var A=f.type;_n(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===qt.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(lu):n=[lu])}f=f.return}n!==null&&Ud(r,n,o,u),r.flags|=262144}function Hc(n){for(n=n.firstContext;n!==null;){if(!_n(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ks(n){Gs=n,zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $t(n){return $y(Gs,n)}function Gc(n,r){return Gs===null&&Ks(n),$y(n,r)}function $y(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},zi===null){if(n===null)throw Error(i(308));zi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else zi=zi.next=r;return o}var Mw=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},Pw=s.unstable_scheduleCallback,kw=s.unstable_NormalPriority,Nt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new Mw,data:new Map,refCount:0}}function Ml(n){n.refCount--,n.refCount===0&&Pw(kw,function(){n.controller.abort()})}var Pl=null,zd=0,$a=0,Za=null;function Lw(n,r){if(Pl===null){var o=Pl=[];zd=0,$a=Fm(),Za={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zd++,r.then(Zy,Zy),r}function Zy(){if(--zd===0&&Pl!==null){Za!==null&&(Za.status="fulfilled");var n=Pl;Pl=null,$a=0,Za=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Uw(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Jy=Y.S;Y.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Lw(n,r),Jy!==null&&Jy(n,r)};var Qs=ee(null);function qd(){var n=Qs.current;return n!==null?n:it.pooledCache}function Kc(n,r){r===null?ue(Qs,Qs.current):ue(Qs,r.pool)}function Wy(){var n=qd();return n===null?null:{parent:Nt._currentValue,pool:n}}var kl=Error(i(460)),e_=Error(i(474)),Qc=Error(i(542)),Fd={then:function(){}};function t_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Yc(){}function n_(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Yc,Yc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,r_(n),n;default:if(typeof r.status=="string")r.then(Yc,Yc);else{if(n=it,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,r_(n),n}throw Ll=r,kl}}var Ll=null;function i_(){if(Ll===null)throw Error(i(459));var n=Ll;return Ll=null,n}function r_(n){if(n===kl||n===Qc)throw Error(i(483))}var Rr=!1;function jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Cr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Dr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=zc(n),Hy(n,null,o),r}return Bc(n,u,r,o),zc(n)}function Ul(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,pr(n,o)}}function Gd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Kd=!1;function Bl(){if(Kd){var n=Za;if(n!==null)throw n}}function zl(n,r,o,u){Kd=!1;var f=n.updateQueue;Rr=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var R=A,z=R.next;R.next=null,E===null?m=z:E.next=z,E=R;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==E&&(A===null?X.firstBaseUpdate=z:A.next=z,X.lastBaseUpdate=R))}if(m!==null){var J=f.baseState;E=0,X=z=R=null,A=m;do{var F=A.lane&-536870913,j=F!==A.lane;if(j?(Ue&F)===F:(u&F)===F){F!==0&&F===$a&&(Kd=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=n,Te=A;F=r;var et=o;switch(Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){J=Se.call(et,J,F);break e}J=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,F=typeof Se=="function"?Se.call(et,J,F):Se,F==null)break e;J=_({},J,F);break e;case 2:Rr=!0}}F=A.callback,F!==null&&(n.flags|=64,j&&(n.flags|=8192),j=f.callbacks,j===null?f.callbacks=[F]:j.push(F))}else j={lane:F,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(z=X=j,R=J):X=X.next=j,E|=F;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;j=A,A=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);X===null&&(R=J),f.baseState=R,f.firstBaseUpdate=z,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Lr|=E,n.lanes=E,n.memoizedState=J}}function s_(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function a_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)s_(o[n],r)}var Ja=ee(null),Xc=ee(0);function o_(n,r){n=Yi,ue(Xc,n),ue(Ja,r),Yi=n|r.baseLanes}function Qd(){ue(Xc,Yi),ue(Ja,Ja.current)}function Yd(){Yi=Xc.current,he(Ja),he(Xc)}var Nr=0,Ne=null,Je=null,bt=null,$c=!1,Wa=!1,Ys=!1,Zc=0,ql=0,eo=null,Bw=0;function Tt(){throw Error(i(321))}function Xd(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!_n(n[o],r[o]))return!1;return!0}function $d(n,r,o,u,f,m){return Nr=m,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=n===null||n.memoizedState===null?H_:G_,Ys=!1,m=o(u,f),Ys=!1,Wa&&(m=u_(r,o,u,f)),l_(n),m}function l_(n){Y.H=ih;var r=Je!==null&&Je.next!==null;if(Nr=0,bt=Je=Ne=null,$c=!1,ql=0,eo=null,r)throw Error(i(300));n===null||Lt||(n=n.dependencies,n!==null&&Hc(n)&&(Lt=!0))}function u_(n,r,o,u){Ne=n;var f=0;do{if(Wa&&(eo=null),ql=0,Wa=!1,25<=f)throw Error(i(301));if(f+=1,bt=Je=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Kw,m=r(o,u)}while(Wa);return m}function zw(){var n=Y.H,r=n.useState()[0];return r=typeof r.then=="function"?Fl(r):r,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Ne.flags|=1024),r}function Zd(){var n=Zc!==0;return Zc=0,n}function Jd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Wd(n){if($c){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}$c=!1}Nr=0,bt=Je=Ne=null,Wa=!1,ql=Zc=0,eo=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ne.memoizedState=bt=n:bt=bt.next=n,bt}function St(){if(Je===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=bt===null?Ne.memoizedState:bt.next;if(r!==null)bt=r,Je=n;else{if(n===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},bt===null?Ne.memoizedState=bt=n:bt=bt.next=n}return bt}function em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(n){var r=ql;return ql+=1,eo===null&&(eo=[]),n=n_(eo,n,r),r=Ne,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?H_:G_),n}function Jc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fl(n);if(n.$$typeof===ne)return $t(n)}throw Error(i(438,String(n)))}function tm(n){var r=null,o=Ne.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=em(),Ne.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=M;return r.index++,o}function Fi(n,r){return typeof r=="function"?r(n):r}function Wc(n){var r=St();return nm(r,Je,n)}function nm(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var A=E=null,R=null,z=r,X=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(Ue&J)===J:(Nr&J)===J){var F=z.revertLane;if(F===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===$a&&(X=!0);else if((Nr&F)===F){z=z.next,F===$a&&(X=!0);continue}else J={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=J,E=m):R=R.next=J,Ne.lanes|=F,Lr|=F;J=z.action,Ys&&o(m,J),m=z.hasEagerState?z.eagerState:o(m,J)}else F={lane:J,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=F,E=m):R=R.next=F,Ne.lanes|=J,Lr|=J;z=z.next}while(z!==null&&z!==r);if(R===null?E=m:R.next=A,!_n(m,n.memoizedState)&&(Lt=!0,X&&(o=Za,o!==null)))throw o;n.memoizedState=m,n.baseState=E,n.baseQueue=R,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function im(n){var r=St(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);_n(m,r.memoizedState)||(Lt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function c_(n,r,o){var u=Ne,f=St(),m=Fe;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var E=!_n((Je||f).memoizedState,o);E&&(f.memoizedState=o,Lt=!0),f=f.queue;var A=d_.bind(null,u,f,n);if(jl(2048,8,A,[n]),f.getSnapshot!==r||E||bt!==null&&bt.memoizedState.tag&1){if(u.flags|=2048,to(9,eh(),f_.bind(null,u,f,o,r),null),it===null)throw Error(i(349));m||(Nr&124)!==0||h_(u,r,o)}return o}function h_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ne.updateQueue,r===null?(r=em(),Ne.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function f_(n,r,o,u){r.value=o,r.getSnapshot=u,m_(r)&&p_(n)}function d_(n,r,o){return o(function(){m_(r)&&p_(n)})}function m_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!_n(n,o)}catch{return!0}}function p_(n){var r=Ka(n,2);r!==null&&Sn(r,n,2)}function rm(n){var r=dn();if(typeof n=="function"){var o=n;if(n=o(),Ys){Cn(!0);try{o()}finally{Cn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:n},r}function g_(n,r,o,u){return n.baseState=o,nm(n,Je,typeof u=="function"?u:Fi)}function qw(n,r,o,u,f){if(nh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,y_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function y_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=Y.T,E={};Y.T=E;try{var A=o(f,u),R=Y.S;R!==null&&R(E,A),__(n,r,A)}catch(z){sm(n,r,z)}finally{Y.T=m}}else try{m=o(f,u),__(n,r,m)}catch(z){sm(n,r,z)}}function __(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){v_(n,r,u)},function(u){return sm(n,r,u)}):v_(n,r,o)}function v_(n,r,o){r.status="fulfilled",r.value=o,E_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,y_(n,o)))}function sm(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,E_(r),r=r.next;while(r!==u)}n.action=null}function E_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function T_(n,r){return r}function A_(n,r){if(Fe){var o=it.formState;if(o!==null){e:{var u=Ne;if(Fe){if(mt){t:{for(var f=mt,m=hi;f.nodeType!==8;){if(!m){f=null;break t}if(f=Wn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){mt=Wn(f.nextSibling),u=f.data==="F!";break e}}Hs(u)}u=!1}u&&(r=o[0])}}return o=dn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T_,lastRenderedState:r},o.queue=u,o=q_.bind(null,Ne,u),u.dispatch=o,u=rm(!1),m=cm.bind(null,Ne,!1,u.queue),u=dn(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=qw.bind(null,Ne,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function b_(n){var r=St();return S_(r,Je,n)}function S_(n,r,o){if(r=nm(n,r,T_)[0],n=Wc(Fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Fl(r)}catch(E){throw E===kl?Qc:E}else u=r;r=St();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Ne.flags|=2048,to(9,eh(),Fw.bind(null,f,o),null)),[u,m,n]}function Fw(n,r){n.action=r}function w_(n){var r=St(),o=Je;if(o!==null)return S_(r,o,n);St(),r=r.memoizedState,o=St();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function to(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=em(),Ne.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function eh(){return{destroy:void 0,resource:void 0}}function I_(){return St().memoizedState}function th(n,r,o,u){var f=dn();u=u===void 0?null:u,Ne.flags|=n,f.memoizedState=to(1|r,eh(),o,u)}function jl(n,r,o,u){var f=St();u=u===void 0?null:u;var m=f.memoizedState.inst;Je!==null&&u!==null&&Xd(u,Je.memoizedState.deps)?f.memoizedState=to(r,m,o,u):(Ne.flags|=n,f.memoizedState=to(1|r,m,o,u))}function R_(n,r){th(8390656,8,n,r)}function C_(n,r){jl(2048,8,n,r)}function D_(n,r){return jl(4,2,n,r)}function N_(n,r){return jl(4,4,n,r)}function x_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function V_(n,r,o){o=o!=null?o.concat([n]):null,jl(4,4,x_.bind(null,r,n),o)}function am(){}function O_(n,r){var o=St();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Xd(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function M_(n,r){var o=St();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Xd(r,u[1]))return u[0];if(u=n(),Ys){Cn(!0);try{n()}finally{Cn(!1)}}return o.memoizedState=[u,r],u}function om(n,r,o){return o===void 0||(Nr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=Lv(),Ne.lanes|=n,Lr|=n,o)}function P_(n,r,o,u){return _n(o,r)?o:Ja.current!==null?(n=om(n,o,u),_n(n,r)||(Lt=!0),n):(Nr&42)===0?(Lt=!0,n.memoizedState=o):(n=Lv(),Ne.lanes|=n,Lr|=n,r)}function k_(n,r,o,u,f){var m=ce.p;ce.p=m!==0&&8>m?m:8;var E=Y.T,A={};Y.T=A,cm(n,!1,r,o);try{var R=f(),z=Y.S;if(z!==null&&z(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=Uw(R,u);Hl(n,r,X,bn(n))}else Hl(n,r,u,bn(n))}catch(J){Hl(n,r,{then:function(){},status:"rejected",reason:J},bn())}finally{ce.p=m,Y.T=E}}function jw(){}function lm(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=L_(n).queue;k_(n,f,r,ve,o===null?jw:function(){return U_(n),o(u)})}function L_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ve},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function U_(n){var r=L_(n).next.queue;Hl(n,r,{},bn())}function um(){return $t(lu)}function B_(){return St().memoizedState}function z_(){return St().memoizedState}function Hw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=bn();n=Cr(o);var u=Dr(r,n,o);u!==null&&(Sn(u,r,o),Ul(u,r,o)),r={cache:Bd()},n.payload=r;return}r=r.return}}function Gw(n,r,o){var u=bn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},nh(n)?F_(r,o):(o=Dd(n,r,o,u),o!==null&&(Sn(o,n,u),j_(o,r,u)))}function q_(n,r,o){var u=bn();Hl(n,r,o,u)}function Hl(n,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(nh(n))F_(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,A=m(E,o);if(f.hasEagerState=!0,f.eagerState=A,_n(A,E))return Bc(n,r,f,0),it===null&&Uc(),!1}catch{}finally{}if(o=Dd(n,r,f,u),o!==null)return Sn(o,n,u),j_(o,r,u),!0}return!1}function cm(n,r,o,u){if(u={lane:2,revertLane:Fm(),action:u,hasEagerState:!1,eagerState:null,next:null},nh(n)){if(r)throw Error(i(479))}else r=Dd(n,o,u,2),r!==null&&Sn(r,n,2)}function nh(n){var r=n.alternate;return n===Ne||r!==null&&r===Ne}function F_(n,r){Wa=$c=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function j_(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,pr(n,o)}}var ih={readContext:$t,use:Jc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},H_={readContext:$t,use:Jc,useCallback:function(n,r){return dn().memoizedState=[n,r===void 0?null:r],n},useContext:$t,useEffect:R_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,th(4194308,4,x_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return th(4194308,4,n,r)},useInsertionEffect:function(n,r){th(4,2,n,r)},useMemo:function(n,r){var o=dn();r=r===void 0?null:r;var u=n();if(Ys){Cn(!0);try{n()}finally{Cn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=dn();if(o!==void 0){var f=o(r);if(Ys){Cn(!0);try{o(r)}finally{Cn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Gw.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var r=dn();return n={current:n},r.memoizedState=n},useState:function(n){n=rm(n);var r=n.queue,o=q_.bind(null,Ne,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:am,useDeferredValue:function(n,r){var o=dn();return om(o,n,r)},useTransition:function(){var n=rm(!1);return n=k_.bind(null,Ne,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Ne,f=dn();if(Fe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),it===null)throw Error(i(349));(Ue&124)!==0||h_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,R_(d_.bind(null,u,m,n),[n]),u.flags|=2048,to(9,eh(),f_.bind(null,u,m,o,r),null),o},useId:function(){var n=dn(),r=it.identifierPrefix;if(Fe){var o=Bi,u=Ui;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,r=""+r+"R"+o,o=Zc++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=Bw++,r=""+r+"r"+o.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:um,useFormState:A_,useActionState:A_,useOptimistic:function(n){var r=dn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=cm.bind(null,Ne,!0,o),o.dispatch=r,[n,r]},useMemoCache:tm,useCacheRefresh:function(){return dn().memoizedState=Hw.bind(null,Ne)}},G_={readContext:$t,use:Jc,useCallback:O_,useContext:$t,useEffect:C_,useImperativeHandle:V_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:M_,useReducer:Wc,useRef:I_,useState:function(){return Wc(Fi)},useDebugValue:am,useDeferredValue:function(n,r){var o=St();return P_(o,Je.memoizedState,n,r)},useTransition:function(){var n=Wc(Fi)[0],r=St().memoizedState;return[typeof n=="boolean"?n:Fl(n),r]},useSyncExternalStore:c_,useId:B_,useHostTransitionStatus:um,useFormState:b_,useActionState:b_,useOptimistic:function(n,r){var o=St();return g_(o,Je,n,r)},useMemoCache:tm,useCacheRefresh:z_},Kw={readContext:$t,use:Jc,useCallback:O_,useContext:$t,useEffect:C_,useImperativeHandle:V_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:M_,useReducer:im,useRef:I_,useState:function(){return im(Fi)},useDebugValue:am,useDeferredValue:function(n,r){var o=St();return Je===null?om(o,n,r):P_(o,Je.memoizedState,n,r)},useTransition:function(){var n=im(Fi)[0],r=St().memoizedState;return[typeof n=="boolean"?n:Fl(n),r]},useSyncExternalStore:c_,useId:B_,useHostTransitionStatus:um,useFormState:w_,useActionState:w_,useOptimistic:function(n,r){var o=St();return Je!==null?g_(o,Je,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:tm,useCacheRefresh:z_},no=null,Gl=0;function rh(n){var r=Gl;return Gl+=1,no===null&&(no=[]),n_(no,n,r)}function Kl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function sh(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function K_(n){var r=n._init;return r(n._payload)}function Q_(n){function r(P,V){if(n){var U=P.deletions;U===null?(P.deletions=[V],P.flags|=16):U.push(V)}}function o(P,V){if(!n)return null;for(;V!==null;)r(P,V),V=V.sibling;return null}function u(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=Li(P,V),P.index=0,P.sibling=null,P}function m(P,V,U){return P.index=U,n?(U=P.alternate,U!==null?(U=U.index,U<V?(P.flags|=67108866,V):U):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function E(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function A(P,V,U,Z){return V===null||V.tag!==6?(V=xd(U,P.mode,Z),V.return=P,V):(V=f(V,U),V.return=P,V)}function R(P,V,U,Z){var fe=U.type;return fe===H?X(P,V,U.props.children,Z,U.key):V!==null&&(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===w&&K_(fe)===V.type)?(V=f(V,U.props),Kl(V,U),V.return=P,V):(V=qc(U.type,U.key,U.props,null,P.mode,Z),Kl(V,U),V.return=P,V)}function z(P,V,U,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=Vd(U,P.mode,Z),V.return=P,V):(V=f(V,U.children||[]),V.return=P,V)}function X(P,V,U,Z,fe){return V===null||V.tag!==7?(V=zs(U,P.mode,Z,fe),V.return=P,V):(V=f(V,U),V.return=P,V)}function J(P,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=xd(""+V,P.mode,U),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return U=qc(V.type,V.key,V.props,null,P.mode,U),Kl(U,V),U.return=P,U;case O:return V=Vd(V,P.mode,U),V.return=P,V;case w:var Z=V._init;return V=Z(V._payload),J(P,V,U)}if(st(V)||k(V))return V=zs(V,P.mode,U,null),V.return=P,V;if(typeof V.then=="function")return J(P,rh(V),U);if(V.$$typeof===ne)return J(P,Gc(P,V),U);sh(P,V)}return null}function F(P,V,U,Z){var fe=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:A(P,V,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return U.key===fe?R(P,V,U,Z):null;case O:return U.key===fe?z(P,V,U,Z):null;case w:return fe=U._init,U=fe(U._payload),F(P,V,U,Z)}if(st(U)||k(U))return fe!==null?null:X(P,V,U,Z,null);if(typeof U.then=="function")return F(P,V,rh(U),Z);if(U.$$typeof===ne)return F(P,V,Gc(P,U),Z);sh(P,U)}return null}function j(P,V,U,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return P=P.get(U)||null,A(V,P,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return P=P.get(Z.key===null?U:Z.key)||null,R(V,P,Z,fe);case O:return P=P.get(Z.key===null?U:Z.key)||null,z(V,P,Z,fe);case w:var Ve=Z._init;return Z=Ve(Z._payload),j(P,V,U,Z,fe)}if(st(Z)||k(Z))return P=P.get(U)||null,X(V,P,Z,fe,null);if(typeof Z.then=="function")return j(P,V,U,rh(Z),fe);if(Z.$$typeof===ne)return j(P,V,U,Gc(V,Z),fe);sh(V,Z)}return null}function Se(P,V,U,Z){for(var fe=null,Ve=null,pe=V,Ae=V=0,Bt=null;pe!==null&&Ae<U.length;Ae++){pe.index>Ae?(Bt=pe,pe=null):Bt=pe.sibling;var qe=F(P,pe,U[Ae],Z);if(qe===null){pe===null&&(pe=Bt);break}n&&pe&&qe.alternate===null&&r(P,pe),V=m(qe,V,Ae),Ve===null?fe=qe:Ve.sibling=qe,Ve=qe,pe=Bt}if(Ae===U.length)return o(P,pe),Fe&&Fs(P,Ae),fe;if(pe===null){for(;Ae<U.length;Ae++)pe=J(P,U[Ae],Z),pe!==null&&(V=m(pe,V,Ae),Ve===null?fe=pe:Ve.sibling=pe,Ve=pe);return Fe&&Fs(P,Ae),fe}for(pe=u(pe);Ae<U.length;Ae++)Bt=j(pe,P,Ae,U[Ae],Z),Bt!==null&&(n&&Bt.alternate!==null&&pe.delete(Bt.key===null?Ae:Bt.key),V=m(Bt,V,Ae),Ve===null?fe=Bt:Ve.sibling=Bt,Ve=Bt);return n&&pe.forEach(function(Kr){return r(P,Kr)}),Fe&&Fs(P,Ae),fe}function Te(P,V,U,Z){if(U==null)throw Error(i(151));for(var fe=null,Ve=null,pe=V,Ae=V=0,Bt=null,qe=U.next();pe!==null&&!qe.done;Ae++,qe=U.next()){pe.index>Ae?(Bt=pe,pe=null):Bt=pe.sibling;var Kr=F(P,pe,qe.value,Z);if(Kr===null){pe===null&&(pe=Bt);break}n&&pe&&Kr.alternate===null&&r(P,pe),V=m(Kr,V,Ae),Ve===null?fe=Kr:Ve.sibling=Kr,Ve=Kr,pe=Bt}if(qe.done)return o(P,pe),Fe&&Fs(P,Ae),fe;if(pe===null){for(;!qe.done;Ae++,qe=U.next())qe=J(P,qe.value,Z),qe!==null&&(V=m(qe,V,Ae),Ve===null?fe=qe:Ve.sibling=qe,Ve=qe);return Fe&&Fs(P,Ae),fe}for(pe=u(pe);!qe.done;Ae++,qe=U.next())qe=j(pe,P,Ae,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&pe.delete(qe.key===null?Ae:qe.key),V=m(qe,V,Ae),Ve===null?fe=qe:Ve.sibling=qe,Ve=qe);return n&&pe.forEach(function(QI){return r(P,QI)}),Fe&&Fs(P,Ae),fe}function et(P,V,U,Z){if(typeof U=="object"&&U!==null&&U.type===H&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case S:e:{for(var fe=U.key;V!==null;){if(V.key===fe){if(fe=U.type,fe===H){if(V.tag===7){o(P,V.sibling),Z=f(V,U.props.children),Z.return=P,P=Z;break e}}else if(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===w&&K_(fe)===V.type){o(P,V.sibling),Z=f(V,U.props),Kl(Z,U),Z.return=P,P=Z;break e}o(P,V);break}else r(P,V);V=V.sibling}U.type===H?(Z=zs(U.props.children,P.mode,Z,U.key),Z.return=P,P=Z):(Z=qc(U.type,U.key,U.props,null,P.mode,Z),Kl(Z,U),Z.return=P,P=Z)}return E(P);case O:e:{for(fe=U.key;V!==null;){if(V.key===fe)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){o(P,V.sibling),Z=f(V,U.children||[]),Z.return=P,P=Z;break e}else{o(P,V);break}else r(P,V);V=V.sibling}Z=Vd(U,P.mode,Z),Z.return=P,P=Z}return E(P);case w:return fe=U._init,U=fe(U._payload),et(P,V,U,Z)}if(st(U))return Se(P,V,U,Z);if(k(U)){if(fe=k(U),typeof fe!="function")throw Error(i(150));return U=fe.call(U),Te(P,V,U,Z)}if(typeof U.then=="function")return et(P,V,rh(U),Z);if(U.$$typeof===ne)return et(P,V,Gc(P,U),Z);sh(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(o(P,V.sibling),Z=f(V,U),Z.return=P,P=Z):(o(P,V),Z=xd(U,P.mode,Z),Z.return=P,P=Z),E(P)):o(P,V)}return function(P,V,U,Z){try{Gl=0;var fe=et(P,V,U,Z);return no=null,fe}catch(pe){if(pe===kl||pe===Qc)throw pe;var Ve=vn(29,pe,null,P.mode);return Ve.lanes=Z,Ve.return=P,Ve}finally{}}}var io=Q_(!0),Y_=Q_(!1),Ln=ee(null),fi=null;function xr(n){var r=n.alternate;ue(xt,xt.current&1),ue(Ln,n),fi===null&&(r===null||Ja.current!==null||r.memoizedState!==null)&&(fi=n)}function X_(n){if(n.tag===22){if(ue(xt,xt.current),ue(Ln,n),fi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(fi=n)}}else Vr()}function Vr(){ue(xt,xt.current),ue(Ln,Ln.current)}function ji(n){he(Ln),fi===n&&(fi=null),he(xt)}var xt=ee(0);function ah(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ep(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function hm(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:_({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var fm={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=bn(),f=Cr(u);f.payload=r,o!=null&&(f.callback=o),r=Dr(n,f,u),r!==null&&(Sn(r,n,u),Ul(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=bn(),f=Cr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Dr(n,f,u),r!==null&&(Sn(r,n,u),Ul(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=bn(),u=Cr(o);u.tag=2,r!=null&&(u.callback=r),r=Dr(n,u,o),r!==null&&(Sn(r,n,o),Ul(r,n,o))}};function $_(n,r,o,u,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!Cl(o,u)||!Cl(f,m):!0}function Z_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&fm.enqueueReplaceState(r,r.state,null)}function Xs(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var oh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function J_(n){oh(n)}function W_(n){console.error(n)}function ev(n){oh(n)}function lh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function tv(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dm(n,r,o){return o=Cr(o),o.tag=3,o.payload={element:null},o.callback=function(){lh(n,r)},o}function nv(n){return n=Cr(n),n.tag=3,n}function iv(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){tv(r,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){tv(r,o,u),typeof f!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function Qw(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Ol(r,o,f,!0),o=Ln.current,o!==null){switch(o.tag){case 13:return fi===null?Lm():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Fd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Bm(n,u,f)),!1;case 22:return o.flags|=65536,u===Fd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Bm(n,u,f)),!1}throw Error(i(435,o.tag))}return Bm(n,u,f),Lm(),!1}if(Fe)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Pd&&(n=Error(i(422),{cause:u}),Vl(On(n,o)))):(u!==Pd&&(r=Error(i(423),{cause:u}),Vl(On(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=On(u,o),f=dm(n.stateNode,u,f),Gd(n,f),pt!==4&&(pt=2)),!1;var m=Error(i(520),{cause:u});if(m=On(m,o),Wl===null?Wl=[m]:Wl.push(m),pt!==4&&(pt=2),r===null)return!0;u=On(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=dm(o.stateNode,u,n),Gd(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ur===null||!Ur.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=nv(f),iv(f,n,o,u),Gd(o,f),!1}o=o.return}while(o!==null);return!1}var rv=Error(i(461)),Lt=!1;function jt(n,r,o,u){r.child=n===null?Y_(r,null,o,u):io(r,n.child,o,u)}function sv(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return Ks(r),u=$d(n,r,o,E,m,f),A=Zd(),n!==null&&!Lt?(Jd(n,r,f),Hi(n,r,f)):(Fe&&A&&Od(r),r.flags|=1,jt(n,r,u,f),r.child)}function av(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Nd(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,ov(n,r,m,u,f)):(n=qc(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Tm(n,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:Cl,o(E,u)&&n.ref===r.ref)return Hi(n,r,f)}return r.flags|=1,n=Li(m,u),n.ref=r.ref,n.return=r,r.child=n}function ov(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(Cl(m,u)&&n.ref===r.ref)if(Lt=!1,r.pendingProps=u=m,Tm(n,f))(n.flags&131072)!==0&&(Lt=!0);else return r.lanes=n.lanes,Hi(n,r,f)}return mm(n,r,o,u,f)}function lv(n,r,o){var u=r.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return uv(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kc(r,m!==null?m.cachePool:null),m!==null?o_(r,m):Qd(),X_(r);else return r.lanes=r.childLanes=536870912,uv(n,r,m!==null?m.baseLanes|o:o,o)}else m!==null?(Kc(r,m.cachePool),o_(r,m),Vr(),r.memoizedState=null):(n!==null&&Kc(r,null),Qd(),Vr());return jt(n,r,f,o),r.child}function uv(n,r,o,u){var f=qd();return f=f===null?null:{parent:Nt._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},n!==null&&Kc(r,null),Qd(),X_(r),n!==null&&Ol(n,r,u,!0),null}function uh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function mm(n,r,o,u,f){return Ks(r),o=$d(n,r,o,u,void 0,f),u=Zd(),n!==null&&!Lt?(Jd(n,r,f),Hi(n,r,f)):(Fe&&u&&Od(r),r.flags|=1,jt(n,r,o,f),r.child)}function cv(n,r,o,u,f,m){return Ks(r),r.updateQueue=null,o=u_(r,u,o,f),l_(n),u=Zd(),n!==null&&!Lt?(Jd(n,r,m),Hi(n,r,m)):(Fe&&u&&Od(r),r.flags|=1,jt(n,r,o,m),r.child)}function hv(n,r,o,u,f){if(Ks(r),r.stateNode===null){var m=Qa,E=o.contextType;typeof E=="object"&&E!==null&&(m=$t(E)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=fm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},jd(r),E=o.contextType,m.context=typeof E=="object"&&E!==null?$t(E):Qa,m.state=r.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(hm(r,o,E,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&fm.enqueueReplaceState(m,m.state,null),zl(r,u,m,f),Bl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var A=r.memoizedProps,R=Xs(o,A);m.props=R;var z=m.context,X=o.contextType;E=Qa,typeof X=="object"&&X!==null&&(E=$t(X));var J=o.getDerivedStateFromProps;X=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||z!==E)&&Z_(r,m,u,E),Rr=!1;var F=r.memoizedState;m.state=F,zl(r,u,m,f),Bl(),z=r.memoizedState,A||F!==z||Rr?(typeof J=="function"&&(hm(r,o,J,u),z=r.memoizedState),(R=Rr||$_(r,o,R,u,F,z,E))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=z),m.props=u,m.state=z,m.context=E,u=R):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Hd(n,r),E=r.memoizedProps,X=Xs(o,E),m.props=X,J=r.pendingProps,F=m.context,z=o.contextType,R=Qa,typeof z=="object"&&z!==null&&(R=$t(z)),A=o.getDerivedStateFromProps,(z=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==J||F!==R)&&Z_(r,m,u,R),Rr=!1,F=r.memoizedState,m.state=F,zl(r,u,m,f),Bl();var j=r.memoizedState;E!==J||F!==j||Rr||n!==null&&n.dependencies!==null&&Hc(n.dependencies)?(typeof A=="function"&&(hm(r,o,A,u),j=r.memoizedState),(X=Rr||$_(r,o,X,u,F,j,R)||n!==null&&n.dependencies!==null&&Hc(n.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,j,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,j,R)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=j),m.props=u,m.state=j,m.context=R,u=X):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,uh(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=io(r,n.child,null,f),r.child=io(r,null,o,f)):jt(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Hi(n,r,f),n}function fv(n,r,o,u){return xl(),r.flags|=256,jt(n,r,o,u),r.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(n){return{baseLanes:n,cachePool:Wy()}}function ym(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Un),n}function dv(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(xt.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(Fe){if(f?xr(r):Vr(),Fe){var A=mt,R;if(R=A){e:{for(R=A,A=hi;R.nodeType!==8;){if(!A){A=null;break e}if(R=Wn(R.nextSibling),R===null){A=null;break e}}A=R}A!==null?(r.memoizedState={dehydrated:A,treeContext:qs!==null?{id:Ui,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},R=vn(18,null,null,0),R.stateNode=A,R.return=r,r.child=R,on=r,mt=null,R=!0):R=!1}R||Hs(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return ep(A)?r.lanes=32:r.lanes=536870912,null;ji(r)}return A=u.children,u=u.fallback,f?(Vr(),f=r.mode,A=ch({mode:"hidden",children:A},f),u=zs(u,f,o,null),A.return=r,u.return=r,A.sibling=u,r.child=A,f=r.child,f.memoizedState=gm(o),f.childLanes=ym(n,E,o),r.memoizedState=pm,u):(xr(r),_m(r,A))}if(R=n.memoizedState,R!==null&&(A=R.dehydrated,A!==null)){if(m)r.flags&256?(xr(r),r.flags&=-257,r=vm(n,r,o)):r.memoizedState!==null?(Vr(),r.child=n.child,r.flags|=128,r=null):(Vr(),f=u.fallback,A=r.mode,u=ch({mode:"visible",children:u.children},A),f=zs(f,A,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,io(r,n.child,null,o),u=r.child,u.memoizedState=gm(o),u.childLanes=ym(n,E,o),r.memoizedState=pm,r=f);else if(xr(r),ep(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(i(419)),u.stack="",u.digest=E,Vl({value:u,source:null,stack:null}),r=vm(n,r,o)}else if(Lt||Ol(n,r,o,!1),E=(o&n.childLanes)!==0,Lt||E){if(E=it,E!==null&&(u=o&-o,u=(u&42)!==0?1:hl(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,Ka(n,u),Sn(E,n,u),rv;A.data==="$?"||Lm(),r=vm(n,r,o)}else A.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=R.treeContext,mt=Wn(A.nextSibling),on=r,Fe=!0,js=null,hi=!1,n!==null&&(Pn[kn++]=Ui,Pn[kn++]=Bi,Pn[kn++]=qs,Ui=n.id,Bi=n.overflow,qs=r),r=_m(r,u.children),r.flags|=4096);return r}return f?(Vr(),f=u.fallback,A=r.mode,R=n.child,z=R.sibling,u=Li(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,z!==null?f=Li(z,f):(f=zs(f,A,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,A=n.child.memoizedState,A===null?A=gm(o):(R=A.cachePool,R!==null?(z=Nt._currentValue,R=R.parent!==z?{parent:z,pool:z}:R):R=Wy(),A={baseLanes:A.baseLanes|o,cachePool:R}),f.memoizedState=A,f.childLanes=ym(n,E,o),r.memoizedState=pm,u):(xr(r),o=n.child,n=o.sibling,o=Li(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=o,r.memoizedState=null,o)}function _m(n,r){return r=ch({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function ch(n,r){return n=vn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function vm(n,r,o){return io(r,n.child,null,o),n=_m(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function mv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Ld(n.return,r,o)}function Em(n,r,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function pv(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;if(jt(n,r,u.children,o),u=xt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mv(n,o,r);else if(n.tag===19)mv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ue(xt,u),f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&ah(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Em(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&ah(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Em(r,!0,o,null,m);break;case"together":Em(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Hi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Lr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(Ol(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Li(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Li(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Tm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Hc(n)))}function Yw(n,r,o){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Ir(r,Nt,n.memoizedState.cache),xl();break;case 27:case 5:ol(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Ir(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(xr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?dv(n,r,o):(xr(r),n=Hi(n,r,o),n!==null?n.sibling:null);xr(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Ol(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return pv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(xt,xt.current),u)break;return null;case 22:case 23:return r.lanes=0,lv(n,r,o);case 24:Ir(r,Nt,n.memoizedState.cache)}return Hi(n,r,o)}function gv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Lt=!0;else{if(!Tm(n,o)&&(r.flags&128)===0)return Lt=!1,Yw(n,r,o);Lt=(n.flags&131072)!==0}else Lt=!1,Fe&&(r.flags&1048576)!==0&&Ky(r,jc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Nd(u)?(n=Xs(u,n),r.tag=1,r=hv(null,r,u,n,o)):(r.tag=0,r=mm(null,r,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ge){r.tag=11,r=sv(null,r,u,n,o);break e}else if(f===D){r.tag=14,r=av(null,r,u,n,o);break e}}throw r=dt(u)||u,Error(i(306,r,""))}}return r;case 0:return mm(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Xs(u,r.pendingProps),hv(n,r,u,f,o);case 3:e:{if($e(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,Hd(n,r),zl(r,u,null,o);var E=r.memoizedState;if(u=E.cache,Ir(r,Nt,u),u!==m.cache&&Ud(r,[Nt],o,!0),Bl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=fv(n,r,u,o);break e}else if(u!==f){f=On(Error(i(424)),r),Vl(f),r=fv(n,r,u,o);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=Wn(n.firstChild),on=r,Fe=!0,js=null,hi=!0,o=Y_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(xl(),u===f){r=Hi(n,r,o);break e}jt(n,r,u,o)}r=r.child}return r;case 26:return uh(n,r),n===null?(o=EE(r.type,null,r.pendingProps,null))?r.memoizedState=o:Fe||(o=r.type,n=r.pendingProps,u=Sh(be.current).createElement(o),u[_t]=r,u[Ft]=n,Gt(u,o,n),vt(u),r.stateNode=u):r.memoizedState=EE(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ol(r),n===null&&Fe&&(u=r.stateNode=yE(r.type,r.pendingProps,be.current),on=r,hi=!0,f=mt,qr(r.type)?(tp=f,mt=Wn(u.firstChild)):mt=f),jt(n,r,r.pendingProps.children,o),uh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Fe&&((f=u=mt)&&(u=AI(u,r.type,r.pendingProps,hi),u!==null?(r.stateNode=u,on=r,mt=Wn(u.firstChild),hi=!1,f=!0):f=!1),f||Hs(r)),ol(r),f=r.type,m=r.pendingProps,E=n!==null?n.memoizedProps:null,u=m.children,Zm(f,m)?u=null:E!==null&&Zm(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=$d(n,r,zw,null,null,o),lu._currentValue=f),uh(n,r),jt(n,r,u,o),r.child;case 6:return n===null&&Fe&&((n=o=mt)&&(o=bI(o,r.pendingProps,hi),o!==null?(r.stateNode=o,on=r,mt=null,n=!0):n=!1),n||Hs(r)),null;case 13:return dv(n,r,o);case 4:return $e(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=io(r,null,u,o):jt(n,r,u,o),r.child;case 11:return sv(n,r,r.type,r.pendingProps,o);case 7:return jt(n,r,r.pendingProps,o),r.child;case 8:return jt(n,r,r.pendingProps.children,o),r.child;case 12:return jt(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Ir(r,r.type,u.value),jt(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Ks(r),f=$t(f),u=u(f),r.flags|=1,jt(n,r,u,o),r.child;case 14:return av(n,r,r.type,r.pendingProps,o);case 15:return ov(n,r,r.type,r.pendingProps,o);case 19:return pv(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=ch(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=Li(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return lv(n,r,o);case 24:return Ks(r),u=$t(Nt),n===null?(f=qd(),f===null&&(f=it,m=Bd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},jd(r),Ir(r,Nt,f)):((n.lanes&o)!==0&&(Hd(n,r),zl(r,null,null,o),Bl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ir(r,Nt,u)):(u=m.cache,Ir(r,Nt,u),u!==f.cache&&Ud(r,[Nt],o,!0))),jt(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Gi(n){n.flags|=4}function yv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!wE(r)){if(r=Ln.current,r!==null&&((Ue&4194048)===Ue?fi!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==fi))throw Ll=Fd,e_;n.flags|=8192}}function hh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?dr():536870912,n.lanes|=r,oo|=r)}function Ql(n,r){if(!Fe)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ct(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function Xw(n,r,o){var u=r.pendingProps;switch(Md(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),qi(Nt),jn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Nl(r)?Gi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xy())),ct(r),null;case 26:return o=r.memoizedState,n===null?(Gi(r),o!==null?(ct(r),yv(r,o)):(ct(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Gi(r),ct(r),yv(r,o)):(ct(r),r.flags&=-16777217):(n.memoizedProps!==u&&Gi(r),ct(r),r.flags&=-16777217),null;case 27:Ia(r),o=be.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Gi(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}n=ye.current,Nl(r)?Qy(r):(n=yE(f,u,o),r.stateNode=n,Gi(r))}return ct(r),null;case 5:if(Ia(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Gi(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(n=ye.current,Nl(r))Qy(r);else{switch(f=Sh(be.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[_t]=r,n[Ft]=u;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Gt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Gi(r)}}return ct(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Gi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=be.current,Nl(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[_t]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||cE(n.nodeValue,o)),n||Hs(r)}else n=Sh(n).createTextNode(u),n[_t]=r,r.stateNode=n}return ct(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Nl(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[_t]=r}else xl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),f=!1}else f=Xy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ji(r),r):(ji(r),null)}if(ji(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),hh(r,r.updateQueue),ct(r),null;case 4:return jn(),n===null&&Km(r.stateNode.containerInfo),ct(r),null;case 10:return qi(r.type),ct(r),null;case 19:if(he(xt),f=r.memoizedState,f===null)return ct(r),null;if(u=(r.flags&128)!==0,m=f.rendering,m===null)if(u)Ql(f,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=ah(n),m!==null){for(r.flags|=128,Ql(f,!1),n=m.updateQueue,r.updateQueue=n,hh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Gy(o,n),o=o.sibling;return ue(xt,xt.current&1|2),r.child}n=n.sibling}f.tail!==null&&fn()>mh&&(r.flags|=128,u=!0,Ql(f,!1),r.lanes=4194304)}else{if(!u)if(n=ah(m),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,hh(r,n),Ql(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Fe)return ct(r),null}else 2*fn()-f.renderingStartTime>mh&&o!==536870912&&(r.flags|=128,u=!0,Ql(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=fn(),r.sibling=null,n=xt.current,ue(xt,u?n&1|2:n&1),r):(ct(r),null);case 22:case 23:return ji(r),Yd(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),o=r.updateQueue,o!==null&&hh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&he(Qs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),qi(Nt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function $w(n,r){switch(Md(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return qi(Nt),jn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ia(r),null;case 13:if(ji(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));xl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return he(xt),null;case 4:return jn(),null;case 10:return qi(r.type),null;case 22:case 23:return ji(r),Yd(),n!==null&&he(Qs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return qi(Nt),null;case 25:return null;default:return null}}function _v(n,r){switch(Md(r),r.tag){case 3:qi(Nt),jn();break;case 26:case 27:case 5:Ia(r);break;case 4:jn();break;case 13:ji(r);break;case 19:he(xt);break;case 10:qi(r.type);break;case 22:case 23:ji(r),Yd(),n!==null&&he(Qs);break;case 24:qi(Nt)}}function Yl(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){tt(r,r.return,A)}}function Or(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=r;var R=o,z=A;try{z()}catch(X){tt(f,R,X)}}}u=u.next}while(u!==m)}}catch(X){tt(r,r.return,X)}}function vv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{a_(r,o)}catch(u){tt(n,n.return,u)}}}function Ev(n,r,o){o.props=Xs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,r,u)}}function Xl(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){tt(n,r,f)}}function di(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,r,f)}else o.current=null}function Tv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function Am(n,r,o){try{var u=n.stateNode;yI(u,n.type,o,r),u[Ft]=r}catch(f){tt(n,n.return,f)}}function Av(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qr(n.type)||n.tag===4}function bm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Av(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sm(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=bh));else if(u!==4&&(u===27&&qr(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Sm(n,r,o),n=n.sibling;n!==null;)Sm(n,r,o),n=n.sibling}function fh(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&qr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(fh(n,r,o),n=n.sibling;n!==null;)fh(n,r,o),n=n.sibling}function bv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Gt(r,u,o),r[_t]=n,r[Ft]=o}catch(m){tt(n,n.return,m)}}var Ki=!1,At=!1,wm=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Zw(n,r){if(n=n.containerInfo,Xm=Nh,n=Py(n),bd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var E=0,A=-1,R=-1,z=0,X=0,J=n,F=null;t:for(;;){for(var j;J!==o||f!==0&&J.nodeType!==3||(A=E+f),J!==m||u!==0&&J.nodeType!==3||(R=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(j=J.firstChild)!==null;)F=J,J=j;for(;;){if(J===n)break t;if(F===o&&++z===f&&(A=E),F===m&&++X===u&&(R=E),(j=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=j}o=A===-1||R===-1?null:{start:A,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for($m={focusedElem:n,selectionRange:o},Nh=!1,Ut=r;Ut!==null;)if(r=Ut,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Ut=n;else for(;Ut!==null;){switch(r=Ut,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Se=Xs(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Se,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Te){tt(o,o.return,Te)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Wm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Ut=n;break}Ut=r.return}}function wv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Mr(n,o),u&4&&Yl(5,o);break;case 1:if(Mr(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(E){tt(o,o.return,E)}else{var f=Xs(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(o,o.return,E)}}u&64&&vv(o),u&512&&Xl(o,o.return);break;case 3:if(Mr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{a_(n,r)}catch(E){tt(o,o.return,E)}}break;case 27:r===null&&u&4&&bv(o);case 26:case 5:Mr(n,o),r===null&&u&4&&Tv(o),u&512&&Xl(o,o.return);break;case 12:Mr(n,o);break;case 13:Mr(n,o),u&4&&Cv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=aI.bind(null,o),SI(n,o))));break;case 22:if(u=o.memoizedState!==null||Ki,!u){r=r!==null&&r.memoizedState!==null||At,f=Ki;var m=At;Ki=u,(At=r)&&!m?Pr(n,o,(o.subtreeFlags&8772)!==0):Mr(n,o),Ki=f,At=m}break;case 30:break;default:Mr(n,o)}}function Iv(n){var r=n.alternate;r!==null&&(n.alternate=null,Iv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&xa(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var at=null,mn=!1;function Qi(n,r,o){for(o=o.child;o!==null;)Rv(n,r,o),o=o.sibling}function Rv(n,r,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(cr,o)}catch{}switch(o.tag){case 26:At||di(o,r),Qi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||di(o,r);var u=at,f=mn;qr(o.type)&&(at=o.stateNode,mn=!1),Qi(n,r,o),ru(o.stateNode),at=u,mn=f;break;case 5:At||di(o,r);case 6:if(u=at,f=mn,at=null,Qi(n,r,o),at=u,mn=f,at!==null)if(mn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(o.stateNode)}catch(m){tt(o,r,m)}else try{at.removeChild(o.stateNode)}catch(m){tt(o,r,m)}break;case 18:at!==null&&(mn?(n=at,pE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),fu(n)):pE(at,o.stateNode));break;case 4:u=at,f=mn,at=o.stateNode.containerInfo,mn=!0,Qi(n,r,o),at=u,mn=f;break;case 0:case 11:case 14:case 15:At||Or(2,o,r),At||Or(4,o,r),Qi(n,r,o);break;case 1:At||(di(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Ev(o,r,u)),Qi(n,r,o);break;case 21:Qi(n,r,o);break;case 22:At=(u=At)||o.memoizedState!==null,Qi(n,r,o),At=u;break;default:Qi(n,r,o)}}function Cv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fu(n)}catch(o){tt(r,r.return,o)}}function Jw(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Sv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Sv),r;default:throw Error(i(435,n.tag))}}function Im(n,r){var o=Jw(n);r.forEach(function(u){var f=oI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function En(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,E=r,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(qr(A.type)){at=A.stateNode,mn=!1;break e}break;case 5:at=A.stateNode,mn=!1;break e;case 3:case 4:at=A.stateNode.containerInfo,mn=!0;break e}A=A.return}if(at===null)throw Error(i(160));Rv(m,E,f),at=null,mn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Dv(r,n),r=r.sibling}var Jn=null;function Dv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(r,n),Tn(n),u&4&&(Or(3,n,n.return),Yl(3,n),Or(5,n,n.return));break;case 1:En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),u&64&&Ki&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Jn;if(En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[gr]||m[_t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Gt(m,u,o),m[_t]=n,vt(m),u=m;break e;case"link":var E=bE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(m=E[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;case"meta":if(E=bE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(m=E[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}m=f.createElement(u),Gt(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[_t]=n,vt(m),u=m}n.stateNode=u}else SE(f,n.type,n.stateNode);else n.stateNode=AE(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?SE(f,n.type,n.stateNode):AE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Am(n,n.memoizedProps,o.memoizedProps)}break;case 27:En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),o!==null&&u&4&&Am(n,n.memoizedProps,o.memoizedProps);break;case 5:if(En(r,n),Tn(n),u&512&&(At||o===null||di(o,o.return)),n.flags&32){f=n.stateNode;try{xn(f,"")}catch(j){tt(n,n.return,j)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Am(n,f,o!==null?o.memoizedProps:f)),u&1024&&(wm=!0);break;case 6:if(En(r,n),Tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(j){tt(n,n.return,j)}}break;case 3:if(Rh=null,f=Jn,Jn=wh(r.containerInfo),En(r,n),Jn=f,Tn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{fu(r.containerInfo)}catch(j){tt(n,n.return,j)}wm&&(wm=!1,Nv(n));break;case 4:u=Jn,Jn=wh(n.stateNode.containerInfo),En(r,n),Tn(n),Jn=u;break;case 12:En(r,n),Tn(n);break;case 13:En(r,n),Tn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Vm=fn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Im(n,u)));break;case 22:f=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,z=Ki,X=At;if(Ki=z||f,At=X||R,En(r,n),At=X,Ki=z,Tn(n),u&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||R||Ki||At||$s(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){R=o=r;try{if(m=R.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=R.stateNode;var J=R.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;A.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(j){tt(R,R.return,j)}}}else if(r.tag===6){if(o===null){R=r;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(j){tt(R,R.return,j)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Im(n,o))));break;case 19:En(r,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Im(n,u)));break;case 30:break;case 21:break;default:En(r,n),Tn(n)}}function Tn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(Av(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=bm(n);fh(n,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(xn(E,""),o.flags&=-33);var A=bm(n);fh(n,A,E);break;case 3:case 4:var R=o.stateNode.containerInfo,z=bm(n);Sm(n,z,R);break;default:throw Error(i(161))}}catch(X){tt(n,n.return,X)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Nv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Mr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)wv(n,r.alternate,r),r=r.sibling}function $s(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Or(4,r,r.return),$s(r);break;case 1:di(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Ev(r,r.return,o),$s(r);break;case 27:ru(r.stateNode);case 26:case 5:di(r,r.return),$s(r);break;case 22:r.memoizedState===null&&$s(r);break;case 30:$s(r);break;default:$s(r)}n=n.sibling}}function Pr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Pr(f,m,o),Yl(4,m);break;case 1:if(Pr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){tt(u,u.return,z)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)s_(R[f],A)}catch(z){tt(u,u.return,z)}}o&&E&64&&vv(m),Xl(m,m.return);break;case 27:bv(m);case 26:case 5:Pr(f,m,o),o&&u===null&&E&4&&Tv(m),Xl(m,m.return);break;case 12:Pr(f,m,o);break;case 13:Pr(f,m,o),o&&E&4&&Cv(f,m);break;case 22:m.memoizedState===null&&Pr(f,m,o),Xl(m,m.return);break;case 30:break;default:Pr(f,m,o)}r=r.sibling}}function Rm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ml(o))}function Cm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ml(n))}function mi(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xv(n,r,o,u),r=r.sibling}function xv(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:mi(n,r,o,u),f&2048&&Yl(9,r);break;case 1:mi(n,r,o,u);break;case 3:mi(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Ml(n)));break;case 12:if(f&2048){mi(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,E=m.id,A=m.onPostCommit;typeof A=="function"&&A(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){tt(r,r.return,R)}}else mi(n,r,o,u);break;case 13:mi(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?mi(n,r,o,u):$l(n,r):m._visibility&2?mi(n,r,o,u):(m._visibility|=2,ro(n,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&Rm(E,r);break;case 24:mi(n,r,o,u),f&2048&&Cm(r.alternate,r);break;default:mi(n,r,o,u)}}function ro(n,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,E=r,A=o,R=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:ro(m,E,A,R,f),Yl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?ro(m,E,A,R,f):$l(m,E):(X._visibility|=2,ro(m,E,A,R,f)),f&&z&2048&&Rm(E.alternate,E);break;case 24:ro(m,E,A,R,f),f&&z&2048&&Cm(E.alternate,E);break;default:ro(m,E,A,R,f)}r=r.sibling}}function $l(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:$l(o,u),f&2048&&Rm(u.alternate,u);break;case 24:$l(o,u),f&2048&&Cm(u.alternate,u);break;default:$l(o,u)}r=r.sibling}}var Zl=8192;function so(n){if(n.subtreeFlags&Zl)for(n=n.child;n!==null;)Vv(n),n=n.sibling}function Vv(n){switch(n.tag){case 26:so(n),n.flags&Zl&&n.memoizedState!==null&&LI(Jn,n.memoizedState,n.memoizedProps);break;case 5:so(n);break;case 3:case 4:var r=Jn;Jn=wh(n.stateNode.containerInfo),so(n),Jn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Zl,Zl=16777216,so(n),Zl=r):so(n));break;default:so(n)}}function Ov(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Jl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ut=u,Pv(u,n)}Ov(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mv(n),n=n.sibling}function Mv(n){switch(n.tag){case 0:case 11:case 15:Jl(n),n.flags&2048&&Or(9,n,n.return);break;case 3:Jl(n);break;case 12:Jl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,dh(n)):Jl(n);break;default:Jl(n)}}function dh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ut=u,Pv(u,n)}Ov(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Or(8,r,r.return),dh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,dh(r));break;default:dh(r)}n=n.sibling}}function Pv(n,r){for(;Ut!==null;){var o=Ut;switch(o.tag){case 0:case 11:case 15:Or(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ut=u;else e:for(o=n;Ut!==null;){u=Ut;var f=u.sibling,m=u.return;if(Iv(u),u===o){Ut=null;break e}if(f!==null){f.return=m,Ut=f;break e}Ut=m}}}var Ww={getCacheForType:function(n){var r=$t(Nt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},eI=typeof WeakMap=="function"?WeakMap:Map,Ge=0,it=null,Oe=null,Ue=0,Ke=0,An=null,kr=!1,ao=!1,Dm=!1,Yi=0,pt=0,Lr=0,Zs=0,Nm=0,Un=0,oo=0,Wl=null,pn=null,xm=!1,Vm=0,mh=1/0,ph=null,Ur=null,Ht=0,Br=null,lo=null,uo=0,Om=0,Mm=null,kv=null,eu=0,Pm=null;function bn(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(Y.T!==null){var n=$a;return n!==0?n:Fm()}return Ni()}function Lv(){Un===0&&(Un=(Ue&536870912)===0||Fe?cl():536870912);var n=Ln.current;return n!==null&&(n.flags|=32),Un}function Sn(n,r,o){(n===it&&(Ke===2||Ke===9)||n.cancelPendingCommit!==null)&&(co(n,0),zr(n,Ue,Un,!1)),yt(n,o),((Ge&2)===0||n!==it)&&(n===it&&((Ge&2)===0&&(Zs|=o),pt===4&&zr(n,Ue,Un,!1)),pi(n))}function Uv(n,r,o){if((Ge&6)!==0)throw Error(i(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||fr(n,r),f=u?iI(n,r):Um(n,r,!0),m=u;do{if(f===0){ao&&!u&&zr(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!tI(o)){f=Um(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var A=n;f=Wl;var R=A.current.memoizedState.isDehydrated;if(R&&(co(A,E).flags|=256),E=Um(A,E,!1),E!==2){if(Dm&&!R){A.errorRecoveryDisabledLanes|=m,Zs|=m,f=4;break e}m=pn,pn=f,m!==null&&(pn===null?pn=m:pn.push.apply(pn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){co(n,0),zr(n,r,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:zr(u,r,Un,!kr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Vm+300-fn(),10<f)){if(zr(u,r,Un,!kr),Dn(u,0,!0)!==0)break e;u.timeoutHandle=dE(Bv.bind(null,u,o,pn,ph,xm,r,Un,Zs,oo,kr,m,2,-0,0),f);break e}Bv(u,o,pn,ph,xm,r,Un,Zs,oo,kr,m,0,-0,0)}}break}while(!0);pi(n)}function Bv(n,r,o,u,f,m,E,A,R,z,X,J,F,j){if(n.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:kI},Vv(r),J=UI(),J!==null)){n.cancelPendingCommit=J(Kv.bind(null,n,r,m,o,u,f,E,A,R,X,1,F,j)),zr(n,m,E,!z);return}Kv(n,r,m,o,u,f,E,A,R)}function tI(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!_n(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zr(n,r,o,u){r&=~Nm,r&=~Zs,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-nn(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&mr(n,o,r)}function gh(){return(Ge&6)===0?(tu(0),!1):!0}function km(){if(Oe!==null){if(Ke===0)var n=Oe.return;else n=Oe,zi=Gs=null,Wd(n),no=null,Gl=0,n=Oe;for(;n!==null;)_v(n.alternate,n),n=n.return;Oe=null}}function co(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,vI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),km(),it=n,Oe=o=Li(n.current,null),Ue=r,Ke=0,An=null,kr=!1,ao=fr(n,r),Dm=!1,oo=Un=Nm=Zs=Lr=pt=0,pn=Wl=null,xm=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-nn(u),m=1<<f;r|=n[f],u&=~m}return Yi=r,Uc(),o}function zv(n,r){Ne=null,Y.H=ih,r===kl||r===Qc?(r=i_(),Ke=3):r===e_?(r=i_(),Ke=4):Ke=r===rv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,Oe===null&&(pt=1,lh(n,On(r,n.current)))}function qv(){var n=Y.H;return Y.H=ih,n===null?ih:n}function Fv(){var n=Y.A;return Y.A=Ww,n}function Lm(){pt=4,kr||(Ue&4194048)!==Ue&&Ln.current!==null||(ao=!0),(Lr&134217727)===0&&(Zs&134217727)===0||it===null||zr(it,Ue,Un,!1)}function Um(n,r,o){var u=Ge;Ge|=2;var f=qv(),m=Fv();(it!==n||Ue!==r)&&(ph=null,co(n,r)),r=!1;var E=pt;e:do try{if(Ke!==0&&Oe!==null){var A=Oe,R=An;switch(Ke){case 8:km(),E=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var z=Ke;if(Ke=0,An=null,ho(n,A,R,z),o&&ao){E=0;break e}break;default:z=Ke,Ke=0,An=null,ho(n,A,R,z)}}nI(),E=pt;break}catch(X){zv(n,X)}while(!0);return r&&n.shellSuspendCounter++,zi=Gs=null,Ge=u,Y.H=f,Y.A=m,Oe===null&&(it=null,Ue=0,Uc()),E}function nI(){for(;Oe!==null;)jv(Oe)}function iI(n,r){var o=Ge;Ge|=2;var u=qv(),f=Fv();it!==n||Ue!==r?(ph=null,mh=fn()+500,co(n,r)):ao=fr(n,r);e:do try{if(Ke!==0&&Oe!==null){r=Oe;var m=An;t:switch(Ke){case 1:Ke=0,An=null,ho(n,r,m,1);break;case 2:case 9:if(t_(m)){Ke=0,An=null,Hv(r);break}r=function(){Ke!==2&&Ke!==9||it!==n||(Ke=7),pi(n)},m.then(r,r);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:t_(m)?(Ke=0,An=null,Hv(r)):(Ke=0,An=null,ho(n,r,m,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var A=Oe;if(!E||wE(E)){Ke=0,An=null;var R=A.sibling;if(R!==null)Oe=R;else{var z=A.return;z!==null?(Oe=z,yh(z)):Oe=null}break t}}Ke=0,An=null,ho(n,r,m,5);break;case 6:Ke=0,An=null,ho(n,r,m,6);break;case 8:km(),pt=6;break e;default:throw Error(i(462))}}rI();break}catch(X){zv(n,X)}while(!0);return zi=Gs=null,Y.H=u,Y.A=f,Ge=o,Oe!==null?0:(it=null,Ue=0,Uc(),pt)}function rI(){for(;Oe!==null&&!fd();)jv(Oe)}function jv(n){var r=gv(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,r===null?yh(n):Oe=r}function Hv(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=cv(o,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=cv(o,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Wd(r);default:_v(o,r),r=Oe=Gy(r,Yi),r=gv(o,r,Yi)}n.memoizedProps=n.pendingProps,r===null?yh(n):Oe=r}function ho(n,r,o,u){zi=Gs=null,Wd(r),no=null,Gl=0;var f=r.return;try{if(Qw(n,f,r,o,Ue)){pt=1,lh(n,On(o,n.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;pt=1,lh(n,On(o,n.current)),Oe=null;return}r.flags&32768?(Fe||u===1?n=!0:ao||(Ue&536870912)!==0?n=!1:(kr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),Gv(r,n)):yh(r)}function yh(n){var r=n;do{if((r.flags&32768)!==0){Gv(r,kr);return}n=r.return;var o=Xw(r.alternate,r,Yi);if(o!==null){Oe=o;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);pt===0&&(pt=5)}function Gv(n,r){do{var o=$w(n.alternate,n);if(o!==null){o.flags&=32767,Oe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=o}while(n!==null);pt=6,Oe=null}function Kv(n,r,o,u,f,m,E,A,R){n.cancelPendingCommit=null;do _h();while(Ht!==0);if((Ge&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Cd,Tc(n,o,m,E,A,R),n===it&&(Oe=it=null,Ue=0),lo=r,Br=n,uo=o,Om=m,Mm=f,kv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,lI(Di,function(){return Zv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=ce.p,ce.p=2,E=Ge,Ge|=4;try{Zw(n,r,o)}finally{Ge=E,ce.p=f,Y.T=u}}Ht=1,Qv(),Yv(),Xv()}}function Qv(){if(Ht===1){Ht=0;var n=Br,r=lo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ce.p;ce.p=2;var f=Ge;Ge|=4;try{Dv(r,n);var m=$m,E=Py(n.containerInfo),A=m.focusedElem,R=m.selectionRange;if(E!==A&&A&&A.ownerDocument&&My(A.ownerDocument.documentElement,A)){if(R!==null&&bd(A)){var z=R.start,X=R.end;if(X===void 0&&(X=z),"selectionStart"in A)A.selectionStart=z,A.selectionEnd=Math.min(X,A.value.length);else{var J=A.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var j=F.getSelection(),Se=A.textContent.length,Te=Math.min(R.start,Se),et=R.end===void 0?Te:Math.min(R.end,Se);!j.extend&&Te>et&&(E=et,et=Te,Te=E);var P=Oy(A,Te),V=Oy(A,et);if(P&&V&&(j.rangeCount!==1||j.anchorNode!==P.node||j.anchorOffset!==P.offset||j.focusNode!==V.node||j.focusOffset!==V.offset)){var U=J.createRange();U.setStart(P.node,P.offset),j.removeAllRanges(),Te>et?(j.addRange(U),j.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),j.addRange(U))}}}}for(J=[],j=A;j=j.parentNode;)j.nodeType===1&&J.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<J.length;A++){var Z=J[A];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Nh=!!Xm,$m=Xm=null}finally{Ge=f,ce.p=u,Y.T=o}}n.current=r,Ht=2}}function Yv(){if(Ht===2){Ht=0;var n=Br,r=lo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ce.p;ce.p=2;var f=Ge;Ge|=4;try{wv(n,r.alternate,r)}finally{Ge=f,ce.p=u,Y.T=o}}Ht=3}}function Xv(){if(Ht===4||Ht===3){Ht=0,ll();var n=Br,r=lo,o=uo,u=kv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,lo=Br=null,$v(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ur=null),fl(o),r=r.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(cr,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Y.T,f=ce.p,ce.p=2,Y.T=null;try{for(var m=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];m(A.value,{componentStack:A.stack})}}finally{Y.T=r,ce.p=f}}(uo&3)!==0&&_h(),pi(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Pm?eu++:(eu=0,Pm=n):eu=0,tu(0)}}function $v(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Ml(r)))}function _h(n){return Qv(),Yv(),Xv(),Zv()}function Zv(){if(Ht!==5)return!1;var n=Br,r=Om;Om=0;var o=fl(uo),u=Y.T,f=ce.p;try{ce.p=32>o?32:o,Y.T=null,o=Mm,Mm=null;var m=Br,E=uo;if(Ht=0,lo=Br=null,uo=0,(Ge&6)!==0)throw Error(i(331));var A=Ge;if(Ge|=4,Mv(m.current),xv(m,m.current,E,o),Ge=A,tu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(cr,m)}catch{}return!0}finally{ce.p=f,Y.T=u,$v(n,r)}}function Jv(n,r,o){r=On(o,r),r=dm(n.stateNode,r,2),n=Dr(n,r,2),n!==null&&(yt(n,2),pi(n))}function tt(n,r,o){if(n.tag===3)Jv(n,n,o);else for(;r!==null;){if(r.tag===3){Jv(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ur===null||!Ur.has(u))){n=On(o,n),o=nv(2),u=Dr(r,o,2),u!==null&&(iv(o,u,r,n),yt(u,2),pi(u));break}}r=r.return}}function Bm(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new eI;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Dm=!0,f.add(o),n=sI.bind(null,n,r,o),r.then(n,n))}function sI(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,it===n&&(Ue&o)===o&&(pt===4||pt===3&&(Ue&62914560)===Ue&&300>fn()-Vm?(Ge&2)===0&&co(n,0):Nm|=o,oo===Ue&&(oo=0)),pi(n)}function Wv(n,r){r===0&&(r=dr()),n=Ka(n,r),n!==null&&(yt(n,r),pi(n))}function aI(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Wv(n,o)}function oI(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Wv(n,o)}function lI(n,r){return gs(n,r)}var vh=null,fo=null,zm=!1,Eh=!1,qm=!1,Js=0;function pi(n){n!==fo&&n.next===null&&(fo===null?vh=fo=n:fo=fo.next=n),Eh=!0,zm||(zm=!0,cI())}function tu(n,r){if(!qm&&Eh){qm=!0;do for(var o=!1,u=vh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-nn(42|n)+1)-1,m&=f&~(E&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,iE(u,m))}else m=Ue,m=Dn(u,u===it?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||fr(u,m)||(o=!0,iE(u,m));u=u.next}while(o);qm=!1}}function uI(){eE()}function eE(){Eh=zm=!1;var n=0;Js!==0&&(_I()&&(n=Js),Js=0);for(var r=fn(),o=null,u=vh;u!==null;){var f=u.next,m=tE(u,r);m===0?(u.next=null,o===null?vh=f:o.next=f,f===null&&(fo=o)):(o=u,(n!==0||(m&3)!==0)&&(Eh=!0)),u=f}tu(n)}function tE(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-nn(m),A=1<<E,R=f[E];R===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Da(A,r)):R<=r&&(n.expiredLanes|=A),m&=~A}if(r=it,o=Ue,o=Dn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Ke===2||Ke===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ca(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||fr(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&Ca(u),fl(o)){case 2:case 8:o=Pt;break;case 32:o=Di;break;case 268435456:o=ul;break;default:o=Di}return u=nE.bind(null,n),o=gs(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&Ca(u),n.callbackPriority=2,n.callbackNode=null,2}function nE(n,r){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(_h()&&n.callbackNode!==o)return null;var u=Ue;return u=Dn(n,n===it?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Uv(n,u,r),tE(n,fn()),n.callbackNode!=null&&n.callbackNode===o?nE.bind(null,n):null)}function iE(n,r){if(_h())return null;Uv(n,r,!0)}function cI(){EI(function(){(Ge&6)!==0?gs(Ct,uI):eE()})}function Fm(){return Js===0&&(Js=cl()),Js}function rE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qn(""+n)}function sE(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function hI(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=rE((f[Ft]||null).action),E=u.submitter;E&&(r=(r=E[Ft]||null)?rE(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var A=new xs("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Js!==0){var R=E?sE(f,E):new FormData(f);lm(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(A.preventDefault(),R=E?sE(f,E):new FormData(f),lm(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var jm=0;jm<Rd.length;jm++){var Hm=Rd[jm],fI=Hm.toLowerCase(),dI=Hm[0].toUpperCase()+Hm.slice(1);Zn(fI,"on"+dI)}Zn(Uy,"onAnimationEnd"),Zn(By,"onAnimationIteration"),Zn(zy,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(Nw,"onTransitionRun"),Zn(xw,"onTransitionStart"),Zn(Vw,"onTransitionCancel"),Zn(qy,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function aE(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var A=u[E],R=A.instance,z=A.currentTarget;if(A=A.listener,R!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=z;try{m(f)}catch(X){oh(X)}f.currentTarget=null,m=R}else for(E=0;E<u.length;E++){if(A=u[E],R=A.instance,z=A.currentTarget,A=A.listener,R!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=z;try{m(f)}catch(X){oh(X)}f.currentTarget=null,m=R}}}}function Me(n,r){var o=r[_s];o===void 0&&(o=r[_s]=new Set);var u=n+"__bubble";o.has(u)||(oE(r,n,2,!1),o.add(u))}function Gm(n,r,o){var u=0;r&&(u|=4),oE(o,n,u,r)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Km(n){if(!n[Th]){n[Th]=!0,Ac.forEach(function(o){o!=="selectionchange"&&(mI.has(o)||Gm(o,!1,n),Gm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Th]||(r[Th]=!0,Gm("selectionchange",!1,r))}}function oE(n,r,o,u){switch(xE(r)){case 2:var f=qI;break;case 8:f=FI;break;default:f=ap}o=f.bind(null,r,o,n),f=void 0,!Pi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Qm(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=ri(A),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){u=m=E;continue e}A=A.parentNode}}u=u.return}Cs(function(){var z=m,X=vl(o),J=[];e:{var F=Fy.get(n);if(F!==void 0){var j=xs,Se=n;switch(n){case"keypress":if(Ds(o)===0)break e;case"keydown":case"keyup":j=Fa;break;case"focusin":Se="focus",j=Ba;break;case"focusout":Se="blur",j=Ba;break;case"beforeblur":case"afterblur":j=Ba;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=ks;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=wr;break;case Uy:case By:case zy:j=Tl;break;case qy:j=y;break;case"scroll":case"scrollend":j=Os;break;case"wheel":j=b;break;case"copy":case"cut":case"paste":j=xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Sl;break;case"toggle":case"beforetoggle":j=G}var Te=(r&4)!==0,et=!Te&&(n==="scroll"||n==="scrollend"),P=Te?F!==null?F+"Capture":null:F;Te=[];for(var V=z,U;V!==null;){var Z=V;if(U=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||U===null||P===null||(Z=br(V,P),Z!=null&&Te.push(iu(V,Z,U))),et)break;V=V.return}0<Te.length&&(F=new j(F,Se,null,o,X),J.push({event:F,listeners:Te}))}}if((r&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",F&&o!==_l&&(Se=o.relatedTarget||o.fromElement)&&(ri(Se)||Se[xi]))break e;if((j||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,j?(Se=o.relatedTarget||o.toElement,j=z,Se=Se?ri(Se):null,Se!==null&&(et=l(Se),Te=Se.tag,Se!==et||Te!==5&&Te!==27&&Te!==6)&&(Se=null)):(j=null,Se=z),j!==Se)){if(Te=ks,Z="onMouseLeave",P="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=Sl,Z="onPointerLeave",P="onPointerEnter",V="pointer"),et=j==null?F:yr(j),U=Se==null?F:yr(Se),F=new Te(Z,V+"leave",j,o,X),F.target=et,F.relatedTarget=U,Z=null,ri(X)===z&&(Te=new Te(P,V+"enter",Se,o,X),Te.target=U,Te.relatedTarget=et,Z=Te),et=Z,j&&Se)t:{for(Te=j,P=Se,V=0,U=Te;U;U=mo(U))V++;for(U=0,Z=P;Z;Z=mo(Z))U++;for(;0<V-U;)Te=mo(Te),V--;for(;0<U-V;)P=mo(P),U--;for(;V--;){if(Te===P||P!==null&&Te===P.alternate)break t;Te=mo(Te),P=mo(P)}Te=null}else Te=null;j!==null&&lE(J,F,j,Te,!1),Se!==null&&et!==null&&lE(J,et,Se,Te,!0)}}e:{if(F=z?yr(z):window,j=F.nodeName&&F.nodeName.toLowerCase(),j==="select"||j==="input"&&F.type==="file")var fe=Ry;else if(wy(F))if(Cy)fe=Rw;else{fe=ww;var Ve=Sw}else j=F.nodeName,!j||j.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?z&&ka(z.elementType)&&(fe=Ry):fe=Iw;if(fe&&(fe=fe(n,z))){Iy(J,fe,o,X);break e}Ve&&Ve(n,F,z),n==="focusout"&&z&&F.type==="number"&&z.memoizedProps.value!=null&&pl(F,"number",F.value)}switch(Ve=z?yr(z):window,n){case"focusin":(wy(Ve)||Ve.contentEditable==="true")&&(ja=Ve,Sd=z,Dl=null);break;case"focusout":Dl=Sd=ja=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,ky(J,o,X);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":ky(J,o,X)}var pe;if(Ce)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else $n?Yn(n,o)&&(Ae="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(Et&&o.locale!=="ko"&&($n||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&$n&&(pe=Cc()):(Vn=X,nt="value"in Vn?Vn.value:Vn.textContent,$n=!0)),Ve=Ah(z,Ae),0<Ve.length&&(Ae=new bl(Ae,n,null,o,X),J.push({event:Ae,listeners:Ve}),pe?Ae.data=pe:(pe=Xn(o),pe!==null&&(Ae.data=pe)))),(pe=He?wl(n,o):Tw(n,o))&&(Ae=Ah(z,"onBeforeInput"),0<Ae.length&&(Ve=new bl("onBeforeInput","beforeinput",null,o,X),J.push({event:Ve,listeners:Ae}),Ve.data=pe)),hI(J,n,z,o,X)}aE(J,r)})}function iu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Ah(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=br(n,o),f!=null&&u.unshift(iu(n,f,m)),f=br(n,r),f!=null&&u.push(iu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function mo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function lE(n,r,o,u,f){for(var m=r._reactName,E=[];o!==null&&o!==u;){var A=o,R=A.alternate,z=A.stateNode;if(A=A.tag,R!==null&&R===u)break;A!==5&&A!==26&&A!==27||z===null||(R=z,f?(z=br(o,m),z!=null&&E.unshift(iu(o,z,R))):f||(z=br(o,m),z!=null&&E.push(iu(o,z,R)))),o=o.return}E.length!==0&&n.push({event:r,listeners:E})}var pI=/\r\n?/g,gI=/\u0000|\uFFFD/g;function uE(n){return(typeof n=="string"?n:""+n).replace(pI,`
`).replace(gI,"")}function cE(n,r){return r=uE(r),uE(n)===r}function bh(){}function We(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||xn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&xn(n,""+u);break;case"className":bs(n,"class",u);break;case"tabIndex":bs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":bs(n,o,u);break;case"style":yl(n,u,m);break;case"data":if(r!=="object"){bs(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&We(n,r,"name",f.name,f,null),We(n,r,"formEncType",f.formEncType,f,null),We(n,r,"formMethod",f.formMethod,f,null),We(n,r,"formTarget",f.formTarget,f,null)):(We(n,r,"encType",f.encType,f,null),We(n,r,"method",f.method,f,null),We(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=bh);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Qn(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Me("beforetoggle",n),Me("toggle",n),As(n,"popover",u);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":As(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wc.get(o)||o,As(n,o,u))}}function Ym(n,r,o,u,f,m){switch(o){case"style":yl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?xn(n,u):(typeof u=="number"||typeof u=="bigint")&&xn(n,""+u);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"onClick":u!=null&&(n.onclick=bh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Es.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):As(n,o,u)}}}function Gt(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(n,r,m,E,o,null)}}f&&We(n,r,"srcSet",o.srcSet,o,null),u&&We(n,r,"src",o.src,o,null);return;case"input":Me("invalid",n);var A=m=E=f=null,R=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":E=X;break;case"checked":R=X;break;case"defaultChecked":z=X;break;case"value":m=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:We(n,r,u,X,o,null)}}ml(n,m,A,R,z,E,f,!1),Er(n);return;case"select":Me("invalid",n),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:We(n,r,f,A,o,null)}r=m,o=E,n.multiple=!!u,r!=null?Tr(n,!!u,r,!1):o!=null&&Tr(n,!!u,o,!0);return;case"textarea":Me("invalid",n),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:We(n,r,E,A,o,null)}Sc(n,u,f,m),Er(n);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:We(n,r,R,u,o,null)}return;case"dialog":Me("beforetoggle",n),Me("toggle",n),Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(u=0;u<nu.length;u++)Me(nu[u],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:We(n,r,z,u,o,null)}return;default:if(ka(r)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&Ym(n,r,X,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&We(n,r,A,u,o,null))}function yI(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,A=null,R=null,z=null,X=null;for(j in o){var J=o[j];if(o.hasOwnProperty(j)&&J!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=J;default:u.hasOwnProperty(j)||We(n,r,j,null,u,J)}}for(var F in u){var j=u[F];if(J=o[F],u.hasOwnProperty(F)&&(j!=null||J!=null))switch(F){case"type":m=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":X=j;break;case"value":E=j;break;case"defaultValue":A=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:j!==J&&We(n,r,F,j,u,J)}}dl(n,E,A,R,z,X,m,f);return;case"select":j=E=A=F=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":j=R;default:u.hasOwnProperty(m)||We(n,r,m,null,u,R)}for(f in u)if(m=u[f],R=o[f],u.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":F=m;break;case"defaultValue":A=m;break;case"multiple":E=m;default:m!==R&&We(n,r,f,m,u,R)}r=A,o=E,u=j,F!=null?Tr(n,!!o,F,!1):!!u!=!!o&&(r!=null?Tr(n,!!o,r,!0):Tr(n,!!o,o?[]:"",!1));return;case"textarea":j=F=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:We(n,r,A,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":F=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&We(n,r,E,f,u,m)}bc(n,F,j);return;case"option":for(var Se in o)if(F=o[Se],o.hasOwnProperty(Se)&&F!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:We(n,r,Se,null,u,F)}for(R in u)if(F=u[R],j=o[R],u.hasOwnProperty(R)&&F!==j&&(F!=null||j!=null))switch(R){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:We(n,r,R,F,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)F=o[Te],o.hasOwnProperty(Te)&&F!=null&&!u.hasOwnProperty(Te)&&We(n,r,Te,null,u,F);for(z in u)if(F=u[z],j=o[z],u.hasOwnProperty(z)&&F!==j&&(F!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,r));break;default:We(n,r,z,F,u,j)}return;default:if(ka(r)){for(var et in o)F=o[et],o.hasOwnProperty(et)&&F!==void 0&&!u.hasOwnProperty(et)&&Ym(n,r,et,void 0,u,F);for(X in u)F=u[X],j=o[X],!u.hasOwnProperty(X)||F===j||F===void 0&&j===void 0||Ym(n,r,X,F,u,j);return}}for(var P in o)F=o[P],o.hasOwnProperty(P)&&F!=null&&!u.hasOwnProperty(P)&&We(n,r,P,null,u,F);for(J in u)F=u[J],j=o[J],!u.hasOwnProperty(J)||F===j||F==null&&j==null||We(n,r,J,F,u,j)}var Xm=null,$m=null;function Sh(n){return n.nodeType===9?n:n.ownerDocument}function hE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fE(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Zm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jm=null;function _I(){var n=window.event;return n&&n.type==="popstate"?n===Jm?!1:(Jm=n,!0):(Jm=null,!1)}var dE=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,mE=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof mE<"u"?function(n){return mE.resolve(null).then(n).catch(TI)}:dE;function TI(n){setTimeout(function(){throw n})}function qr(n){return n==="head"}function pE(n,r){var o=r,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&ru(E.documentElement),o&2&&ru(E.body),o&4)for(o=E.head,ru(o),E=o.firstChild;E;){var A=E.nextSibling,R=E.nodeName;E[gr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(m),fu(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);fu(r)}function Wm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wm(o),xa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function AI(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[gr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Wn(n.nextSibling),n===null)break}return null}function bI(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Wn(n.nextSibling),n===null))return null;return n}function ep(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function SI(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Wn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var tp=null;function gE(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function yE(n,r,o){switch(r=Sh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ru(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);xa(n)}var Bn=new Map,_E=new Set;function wh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xi=ce.d;ce.d={f:wI,r:II,D:RI,C:CI,L:DI,m:NI,X:VI,S:xI,M:OI};function wI(){var n=Xi.f(),r=gh();return n||r}function II(n){var r=si(n);r!==null&&r.tag===5&&r.type==="form"?U_(r):Xi.r(n)}var po=typeof document>"u"?null:document;function vE(n,r,o){var u=po;if(u&&typeof r=="string"&&r){var f=kt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),_E.has(f)||(_E.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Gt(r,"link",n),vt(r),u.head.appendChild(r)))}}function RI(n){Xi.D(n),vE("dns-prefetch",n,null)}function CI(n,r){Xi.C(n,r),vE("preconnect",n,r)}function DI(n,r,o){Xi.L(n,r,o);var u=po;if(u&&n&&r){var f='link[rel="preload"][as="'+kt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+kt(o.imageSizes)+'"]')):f+='[href="'+kt(n)+'"]';var m=f;switch(r){case"style":m=go(n);break;case"script":m=yo(n)}Bn.has(m)||(n=_({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Bn.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(su(m))||r==="script"&&u.querySelector(au(m))||(r=u.createElement("link"),Gt(r,"link",n),vt(r),u.head.appendChild(r)))}}function NI(n,r){Xi.m(n,r);var o=po;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+kt(u)+'"][href="'+kt(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yo(n)}if(!Bn.has(m)&&(n=_({rel:"modulepreload",href:n},r),Bn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(au(m)))return}u=o.createElement("link"),Gt(u,"link",n),vt(u),o.head.appendChild(u)}}}function xI(n,r,o){Xi.S(n,r,o);var u=po;if(u&&n){var f=_r(u).hoistableStyles,m=go(n);r=r||"default";var E=f.get(m);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(su(m)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Bn.get(m))&&np(n,o);var R=E=u.createElement("link");vt(R),Gt(R,"link",n),R._p=new Promise(function(z,X){R.onload=z,R.onerror=X}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ih(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(m,E)}}}function VI(n,r){Xi.X(n,r);var o=po;if(o&&n){var u=_r(o).hoistableScripts,f=yo(n),m=u.get(f);m||(m=o.querySelector(au(f)),m||(n=_({src:n,async:!0},r),(r=Bn.get(f))&&ip(n,r),m=o.createElement("script"),vt(m),Gt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function OI(n,r){Xi.M(n,r);var o=po;if(o&&n){var u=_r(o).hoistableScripts,f=yo(n),m=u.get(f);m||(m=o.querySelector(au(f)),m||(n=_({src:n,async:!0,type:"module"},r),(r=Bn.get(f))&&ip(n,r),m=o.createElement("script"),vt(m),Gt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function EE(n,r,o,u){var f=(f=be.current)?wh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=go(o.href),o=_r(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=go(o.href);var m=_r(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(su(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Bn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bn.set(n,o),m||MI(f,n,o,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yo(o),o=_r(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function go(n){return'href="'+kt(n)+'"'}function su(n){return'link[rel="stylesheet"]['+n+"]"}function TE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function MI(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Gt(r,"link",o),vt(r),n.head.appendChild(r))}function yo(n){return'[src="'+kt(n)+'"]'}function au(n){return"script[async]"+n}function AE(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+kt(o.href)+'"]');if(u)return r.instance=u,vt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),vt(u),Gt(u,"style",f),Ih(u,o.precedence,n),r.instance=u;case"stylesheet":f=go(o.href);var m=n.querySelector(su(f));if(m)return r.state.loading|=4,r.instance=m,vt(m),m;u=TE(o),(f=Bn.get(f))&&np(u,f),m=(n.ownerDocument||n).createElement("link"),vt(m);var E=m;return E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),Gt(m,"link",u),r.state.loading|=4,Ih(m,o.precedence,n),r.instance=m;case"script":return m=yo(o.src),(f=n.querySelector(au(m)))?(r.instance=f,vt(f),f):(u=o,(f=Bn.get(m))&&(u=_({},o),ip(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),vt(f),Gt(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Ih(u,o.precedence,n));return r.instance}function Ih(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===r)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function np(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ip(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Rh=null;function bE(n,r,o){if(Rh===null){var u=new Map,f=Rh=new Map;f.set(o,u)}else f=Rh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[gr]||m[_t]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=n+E;var A=u.get(E);A?A.push(m):u.set(E,[m])}}return u}function SE(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function PI(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function wE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ou=null;function kI(){}function LI(n,r,o){if(ou===null)throw Error(i(475));var u=ou;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=go(o.href),m=n.querySelector(su(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Ch.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=m,vt(m);return}m=n.ownerDocument||n,o=TE(o),(f=Bn.get(f))&&np(o,f),m=m.createElement("link"),vt(m);var E=m;E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),Gt(m,"link",o),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Ch.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function UI(){if(ou===null)throw Error(i(475));var n=ou;return n.stylesheets&&n.count===0&&rp(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&rp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Ch(){if(this.count--,this.count===0){if(this.stylesheets)rp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dh=null;function rp(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dh=new Map,r.forEach(BI,n),Dh=null,Ch.call(n))}function BI(n,r){if(!(r.state.loading&4)){var o=Dh.get(n);if(o)var u=o.get(null);else{o=new Map,Dh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=Ch.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var lu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function zI(n,r,o,u,f,m,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.hiddenUpdates=Na(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function IE(n,r,o,u,f,m,E,A,R,z,X,J){return n=new zI(n,r,o,E,A,R,z,J),r=1,m===!0&&(r|=24),m=vn(3,null,null,r),n.current=m,m.stateNode=n,r=Bd(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},jd(m),n}function RE(n){return n?(n=Qa,n):Qa}function CE(n,r,o,u,f,m){f=RE(f),u.context===null?u.context=f:u.pendingContext=f,u=Cr(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Dr(n,u,r),o!==null&&(Sn(o,n,r),Ul(o,n,r))}function DE(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function sp(n,r){DE(n,r),(n=n.alternate)&&DE(n,r)}function NE(n){if(n.tag===13){var r=Ka(n,67108864);r!==null&&Sn(r,n,67108864),sp(n,67108864)}}var Nh=!0;function qI(n,r,o,u){var f=Y.T;Y.T=null;var m=ce.p;try{ce.p=2,ap(n,r,o,u)}finally{ce.p=m,Y.T=f}}function FI(n,r,o,u){var f=Y.T;Y.T=null;var m=ce.p;try{ce.p=8,ap(n,r,o,u)}finally{ce.p=m,Y.T=f}}function ap(n,r,o,u){if(Nh){var f=op(u);if(f===null)Qm(n,r,u,xh,o),VE(n,u);else if(HI(f,n,r,o,u))u.stopPropagation();else if(VE(n,u),r&4&&-1<jI.indexOf(n)){for(;f!==null;){var m=si(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Hn(m.pendingLanes);if(E!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var R=1<<31-nn(E);A.entanglements[1]|=R,E&=~R}pi(m),(Ge&6)===0&&(mh=fn()+500,tu(0))}}break;case 13:A=Ka(m,2),A!==null&&Sn(A,m,2),gh(),sp(m,2)}if(m=op(u),m===null&&Qm(n,r,u,xh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Qm(n,r,u,null,o)}}function op(n){return n=vl(n),lp(n)}var xh=null;function lp(n){if(xh=null,n=ri(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return xh=n,null}function xE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_c()){case Ct:return 2;case Pt:return 8;case Di:case dd:return 32;case ul:return 268435456;default:return 32}default:return 32}}var up=!1,Fr=null,jr=null,Hr=null,uu=new Map,cu=new Map,Gr=[],jI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VE(n,r){switch(n){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":uu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(r.pointerId)}}function hu(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=si(r),r!==null&&NE(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function HI(n,r,o,u,f){switch(r){case"focusin":return Fr=hu(Fr,n,r,o,u,f),!0;case"dragenter":return jr=hu(jr,n,r,o,u,f),!0;case"mouseover":return Hr=hu(Hr,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return uu.set(m,hu(uu.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,cu.set(m,hu(cu.get(m)||null,n,r,o,u,f)),!0}return!1}function OE(n){var r=ri(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,gd(n.priority,function(){if(o.tag===13){var u=bn();u=hl(u);var f=Ka(o,u);f!==null&&Sn(f,o,u),sp(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=op(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);_l=u,o.target.dispatchEvent(u),_l=null}else return r=si(o),r!==null&&NE(r),n.blockedOn=o,!1;r.shift()}return!0}function ME(n,r,o){Vh(n)&&o.delete(r)}function GI(){up=!1,Fr!==null&&Vh(Fr)&&(Fr=null),jr!==null&&Vh(jr)&&(jr=null),Hr!==null&&Vh(Hr)&&(Hr=null),uu.forEach(ME),cu.forEach(ME)}function Oh(n,r){n.blockedOn===r&&(n.blockedOn=null,up||(up=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GI)))}var Mh=null;function PE(n){Mh!==n&&(Mh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mh===n&&(Mh=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(lp(u||o)===null)continue;break}var m=si(o);m!==null&&(n.splice(r,3),r-=3,lm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function fu(n){function r(R){return Oh(R,n)}Fr!==null&&Oh(Fr,n),jr!==null&&Oh(jr,n),Hr!==null&&Oh(Hr,n),uu.forEach(r),cu.forEach(r);for(var o=0;o<Gr.length;o++){var u=Gr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Gr.length&&(o=Gr[0],o.blockedOn===null);)OE(o),o.blockedOn===null&&Gr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[Ft]||null;if(typeof m=="function")E||PE(o);else if(E){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Ft]||null)A=E.formAction;else if(lp(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),PE(o)}}}function cp(n){this._internalRoot=n}Ph.prototype.render=cp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=bn();CE(o,u,n,r,null,null)},Ph.prototype.unmount=cp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;CE(n.current,2,null,n,null,null),gh(),r[xi]=null}};function Ph(n){this._internalRoot=n}Ph.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ni();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Gr.length&&r!==0&&r<Gr[o].priority;o++);Gr.splice(o,0,n),o===0&&OE(n)}};var kE=e.version;if(kE!=="19.1.1")throw Error(i(527,kE,"19.1.1"));ce.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(r),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var KI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{cr=kh.inject(KI),Yt=kh}catch{}}return mu.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=J_,m=W_,E=ev,A=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=IE(n,1,!1,null,null,o,u,f,m,E,A,null),n[xi]=r.current,Km(n),new cp(r)},mu.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=J_,E=W_,A=ev,R=null,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(z=o.formState)),r=IE(n,1,!0,r,o??null,u,f,m,E,A,R,z),r.context=RE(null),o=r.current,u=bn(),u=hl(u),f=Cr(u),f.callback=null,Dr(o,f,u),o=u,r.current.lanes=o,yt(r,o),pi(r),n[xi]=r.current,Km(n),new Ph(r)},mu.version="19.1.1",mu}var KE;function iR(){if(KE)return dp.exports;KE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dp.exports=nR(),dp.exports}var rR=iR();const sR=X0(rR);/**
 * react-router v7.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QE="popstate";function aR(s={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Op("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Lu(a)}return lR(e,t,null,s)}function ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function wi(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oR(){return Math.random().toString(36).substring(2,10)}function YE(s,e){return{usr:s.state,key:s.key,idx:e}}function Op(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Zo(e):e,state:t,key:e&&e.key||i||oR()}}function Lu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Zo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function lR(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let q=_(),te=q==null?null:q-g;g=q,p&&p({action:d,location:K.location,delta:te})}function S(q,te){d="PUSH";let W=Op(K.location,q,te);g=_()+1;let ne=YE(W,g),ge=K.createHref(W);try{c.pushState(ne,"",ge)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;a.location.assign(ge)}l&&p&&p({action:d,location:K.location,delta:1})}function O(q,te){d="REPLACE";let W=Op(K.location,q,te);g=_();let ne=YE(W,g),ge=K.createHref(W);c.replaceState(ne,"",ge),l&&p&&p({action:d,location:K.location,delta:0})}function H(q){return uR(q)}let K={get action(){return d},get location(){return s(a,c)},listen(q){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(QE,T),p=q,()=>{a.removeEventListener(QE,T),p=null}},createHref(q){return e(a,q)},createURL:H,encodeLocation(q){let te=H(q);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:S,replace:O,go(q){return c.go(q)}};return K}function uR(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ft(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Lu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function $0(s,e,t="/"){return cR(s,e,t,!1)}function cR(s,e,t,i){let a=typeof e=="string"?Zo(e):e,l=tr(a.pathname||"/",t);if(l==null)return null;let c=Z0(s);hR(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=AR(l);d=ER(c[p],g,i)}return d}function Z0(s,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;ft(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Wi([i,_.relativePath]),S=t.concat(_);c.children&&c.children.length>0&&(ft(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Z0(c.children,e,S,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:_R(T,c.index),routesMeta:S})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of J0(c.path))l(c,d,!0,p)}),e}function J0(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=J0(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function hR(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:vR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var fR=/^:[\w-]+$/,dR=3,mR=2,pR=1,gR=10,yR=-2,XE=s=>s==="*";function _R(s,e){let t=s.split("/"),i=t.length;return t.some(XE)&&(i+=yR),e&&(i+=mR),t.filter(a=>!XE(a)).reduce((a,l)=>a+(fR.test(l)?dR:l===""?pR:gR),i)}function vR(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function ER(s,e,t=!1){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=df({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=df({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Wi([l,T.pathname]),pathnameBase:IR(Wi([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=Wi([l,T.pathnameBase]))}return c}function df(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=TR(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},S)=>{if(_==="*"){let H=d[S]||"";c=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const O=d[S];return T&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function TR(s,e=!1,t=!0){wi(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function AR(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function tr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function bR(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?Zo(s):s;return{pathname:t?t.startsWith("/")?t:SR(t,e):e,search:RR(i),hash:CR(a)}}function SR(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function yp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wR(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function W0(s){let e=wR(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function eA(s,e,t,i=!1){let a;typeof s=="string"?a=Zo(s):(a={...s},ft(!a.pathname||!a.pathname.includes("?"),yp("?","pathname","search",a)),ft(!a.pathname||!a.pathname.includes("#"),yp("#","pathname","hash",a)),ft(!a.search||!a.search.includes("#"),yp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;a.pathname=S.join("/")}d=T>=0?e[T]:"/"}let p=bR(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Wi=s=>s.join("/").replace(/\/\/+/g,"/"),IR=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),RR=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,CR=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function DR(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var tA=["POST","PUT","PATCH","DELETE"];new Set(tA);var NR=["GET",...tA];new Set(NR);var Jo=$.createContext(null);Jo.displayName="DataRouter";var Bf=$.createContext(null);Bf.displayName="DataRouterState";$.createContext(!1);var nA=$.createContext({isTransitioning:!1});nA.displayName="ViewTransition";var xR=$.createContext(new Map);xR.displayName="Fetchers";var VR=$.createContext(null);VR.displayName="Await";var Ri=$.createContext(null);Ri.displayName="Navigation";var ec=$.createContext(null);ec.displayName="Location";var Ci=$.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var _g=$.createContext(null);_g.displayName="RouteError";function OR(s,{relative:e}={}){ft(tc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext(Ri),{hash:a,pathname:l,search:c}=nc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Wi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function tc(){return $.useContext(ec)!=null}function ba(){return ft(tc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(ec).location}var iA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rA(s){$.useContext(Ri).static||$.useLayoutEffect(s)}function MR(){let{isDataRoute:s}=$.useContext(Ci);return s?YR():PR()}function PR(){ft(tc(),"useNavigate() may be used only in the context of a <Router> component.");let s=$.useContext(Jo),{basename:e,navigator:t}=$.useContext(Ri),{matches:i}=$.useContext(Ci),{pathname:a}=ba(),l=JSON.stringify(W0(i)),c=$.useRef(!1);return rA(()=>{c.current=!0}),$.useCallback((p,g={})=>{if(wi(c.current,iA),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=eA(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Wi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,s])}$.createContext(null);function kR(){let{matches:s}=$.useContext(Ci),e=s[s.length-1];return e?e.params:{}}function nc(s,{relative:e}={}){let{matches:t}=$.useContext(Ci),{pathname:i}=ba(),a=JSON.stringify(W0(t));return $.useMemo(()=>eA(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function LR(s,e){return sA(s,e)}function sA(s,e,t,i,a){ft(tc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=$.useContext(Ri),{matches:c}=$.useContext(Ci),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let W=T&&T.path||"";aA(g,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let S=ba(),O;if(e){let W=typeof e=="string"?Zo(e):e;ft(_==="/"||W.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),O=W}else O=S;let H=O.pathname||"/",K=H;if(_!=="/"){let W=_.replace(/^\//,"").split("/");K="/"+H.replace(/^\//,"").split("/").slice(W.length).join("/")}let q=$0(s,{pathname:K});wi(T||q!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),wi(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=FR(q&&q.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:Wi([_,l.encodeLocation?l.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:Wi([_,l.encodeLocation?l.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),c,t,i,a);return e&&te?$.createElement(ec.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},te):te}function UR(){let s=QR(),e=DR(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:a},t):null,c)}var BR=$.createElement(UR,null),zR=class extends $.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?$.createElement(Ci.Provider,{value:this.props.routeContext},$.createElement(_g.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qR({routeContext:s,match:e,children:t}){let i=$.useContext(Jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Ci.Provider,{value:s},t)}function FR(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=g),_.route.id){let{loaderData:T,errors:S}=t,O=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||O){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,_,T)=>{let S,O=!1,H=null,K=null;t&&(S=c&&_.route.id?c[_.route.id]:void 0,H=_.route.errorElement||BR,d&&(p<0&&T===0?(aA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,K=null):p===T&&(O=!0,K=_.route.hydrateFallbackElement||null)));let q=e.concat(l.slice(0,T+1)),te=()=>{let W;return S?W=H:O?W=K:_.route.Component?W=$.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=g,$.createElement(qR,{match:_,routeContext:{outlet:g,matches:q,isDataRoute:t!=null},children:W})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?$.createElement(zR,{location:t.location,revalidation:t.revalidation,component:H,error:S,children:te(),routeContext:{outlet:null,matches:q,isDataRoute:!0},unstable_onError:i}):te()},null)}function vg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jR(s){let e=$.useContext(Jo);return ft(e,vg(s)),e}function HR(s){let e=$.useContext(Bf);return ft(e,vg(s)),e}function GR(s){let e=$.useContext(Ci);return ft(e,vg(s)),e}function Eg(s){let e=GR(s),t=e.matches[e.matches.length-1];return ft(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function KR(){return Eg("useRouteId")}function QR(){let s=$.useContext(_g),e=HR("useRouteError"),t=Eg("useRouteError");return s!==void 0?s:e.errors?.[t]}function YR(){let{router:s}=jR("useNavigate"),e=Eg("useNavigate"),t=$.useRef(!1);return rA(()=>{t.current=!0}),$.useCallback(async(a,l={})=>{wi(t.current,iA),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var $E={};function aA(s,e,t){!e&&!$E[s]&&($E[s]=!0,wi(!1,t))}$.memo(XR);function XR({routes:s,future:e,state:t,unstable_onError:i}){return sA(s,void 0,t,i,e)}function Qh(s){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $R({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ft(!tc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Zo(t));let{pathname:p="/",search:g="",hash:_="",state:T=null,key:S="default"}=t,O=$.useMemo(()=>{let H=tr(p,c);return H==null?null:{location:{pathname:H,search:g,hash:_,state:T,key:S},navigationType:i}},[c,p,g,_,T,S,i]);return wi(O!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:$.createElement(Ri.Provider,{value:d},$.createElement(ec.Provider,{children:e,value:O}))}function ZR({children:s,location:e}){return LR(Mp(s),e)}function Mp(s,e=[]){let t=[];return $.Children.forEach(s,(i,a)=>{if(!$.isValidElement(i))return;let l=[...e,a];if(i.type===$.Fragment){t.push.apply(t,Mp(i.props.children,l));return}ft(i.type===Qh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Mp(i.props.children,l)),t.push(c)}),t}var Yh="get",Xh="application/x-www-form-urlencoded";function zf(s){return s!=null&&typeof s.tagName=="string"}function JR(s){return zf(s)&&s.tagName.toLowerCase()==="button"}function WR(s){return zf(s)&&s.tagName.toLowerCase()==="form"}function e1(s){return zf(s)&&s.tagName.toLowerCase()==="input"}function t1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function n1(s,e){return s.button===0&&(!e||e==="_self")&&!t1(s)}var Lh=null;function i1(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var r1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _p(s){return s!=null&&!r1.has(s)?(wi(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xh}"`),null):s}function s1(s,e){let t,i,a,l,c;if(WR(s)){let d=s.getAttribute("action");i=d?tr(d,e):null,t=s.getAttribute("method")||Yh,a=_p(s.getAttribute("enctype"))||Xh,l=new FormData(s)}else if(JR(s)||e1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(i=p?tr(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||Yh,a=_p(s.getAttribute("formenctype"))||_p(d.getAttribute("enctype"))||Xh,l=new FormData(d,s),!i1()){let{name:g,type:_,value:T}=s;if(_==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,T)}}else{if(zf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yh,i=null,a=Xh,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function a1(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&tr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function o1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function u1(s,e,t){let i=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await o1(l,t);return c.links?c.links():[]}return[]}));return d1(i.flat(1).filter(l1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ZE(s,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function c1(s,e,{includeHydrateFallback:t}={}){return h1(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function h1(s){return[...new Set(s)]}function f1(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function d1(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let l=JSON.stringify(f1(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function oA(){let s=$.useContext(Jo);return Tg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function m1(){let s=$.useContext(Bf);return Tg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Ag=$.createContext(void 0);Ag.displayName="FrameworkContext";function lA(){let s=$.useContext(Ag);return Tg(s,"You must render this element inside a <HydratedRouter> element"),s}function p1(s,e){let t=$.useContext(Ag),[i,a]=$.useState(!1),[l,c]=$.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,S=$.useRef(null);$.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let K=te=>{te.forEach(W=>{c(W.isIntersecting)})},q=new IntersectionObserver(K,{threshold:.5});return S.current&&q.observe(S.current),()=>{q.disconnect()}}},[s]),$.useEffect(()=>{if(i){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[i]);let O=()=>{a(!0)},H=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:pu(d,O),onBlur:pu(p,H),onMouseEnter:pu(g,O),onMouseLeave:pu(_,H),onTouchStart:pu(T,O)}]:[!1,S,{}]}function pu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function g1({page:s,...e}){let{router:t}=oA(),i=$.useMemo(()=>$0(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?$.createElement(_1,{page:s,matches:i,...e}):null}function y1(s){let{manifest:e,routeModules:t}=lA(),[i,a]=$.useState([]);return $.useEffect(()=>{let l=!1;return u1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),i}function _1({page:s,matches:e,...t}){let i=ba(),{manifest:a,routeModules:l}=lA(),{basename:c}=oA(),{loaderData:d,matches:p}=m1(),g=$.useMemo(()=>ZE(s,e,p,a,i,"data"),[s,e,p,a,i]),_=$.useMemo(()=>ZE(s,e,p,a,i,"assets"),[s,e,p,a,i]),T=$.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let H=new Set,K=!1;if(e.forEach(te=>{let W=a.routes[te.route.id];!W||!W.hasLoader||(!g.some(ne=>ne.route.id===te.route.id)&&te.route.id in d&&l[te.route.id]?.shouldRevalidate||W.hasClientLoader?K=!0:H.add(te.route.id))}),H.size===0)return[];let q=a1(s,c,"data");return K&&H.size>0&&q.searchParams.set("_routes",e.filter(te=>H.has(te.route.id)).map(te=>te.route.id).join(",")),[q.pathname+q.search]},[c,d,i,a,g,e,s,l]),S=$.useMemo(()=>c1(_,a),[_,a]),O=y1(_);return $.createElement($.Fragment,null,T.map(H=>$.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),S.map(H=>$.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),O.map(({key:H,link:K})=>$.createElement("link",{key:H,nonce:t.nonce,...K})))}function v1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var uA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uA&&(window.__reactRouterVersion="7.9.2")}catch{}function E1({basename:s,children:e,window:t}){let i=$.useRef();i.current==null&&(i.current=aR({window:t,v5Compat:!0}));let a=i.current,[l,c]=$.useState({action:a.action,location:a.location}),d=$.useCallback(p=>{$.startTransition(()=>c(p))},[c]);return $.useLayoutEffect(()=>a.listen(d),[a,d]),$.createElement($R,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var cA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uu=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:T,...S},O){let{basename:H}=$.useContext(Ri),K=typeof g=="string"&&cA.test(g),q,te=!1;if(typeof g=="string"&&K&&(q=g,uA))try{let I=new URL(window.location.href),M=g.startsWith("//")?new URL(I.protocol+g):new URL(g),x=tr(M.pathname,H);M.origin===I.origin&&x!=null?g=x+M.search+M.hash:te=!0}catch{wi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=OR(g,{relative:a}),[ne,ge,oe]=p1(i,S),re=S1(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:T});function D(I){e&&e(I),I.defaultPrevented||re(I)}let w=$.createElement("a",{...S,...oe,href:q||W,onClick:te||l?e:D,ref:v1(O,ge),target:p,"data-discover":!K&&t==="render"?"true":void 0});return ne&&!K?$.createElement($.Fragment,null,w,$.createElement(g1,{page:W})):w});Uu.displayName="Link";var T1=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let T=nc(c,{relative:g.relative}),S=ba(),O=$.useContext(Bf),{navigator:H,basename:K}=$.useContext(Ri),q=O!=null&&D1(T)&&d===!0,te=H.encodeLocation?H.encodeLocation(T).pathname:T.pathname,W=S.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(W=W.toLowerCase(),ne=ne?ne.toLowerCase():null,te=te.toLowerCase()),ne&&K&&(ne=tr(ne,K)||ne);const ge=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let oe=W===te||!a&&W.startsWith(te)&&W.charAt(ge)==="/",re=ne!=null&&(ne===te||!a&&ne.startsWith(te)&&ne.charAt(te.length)==="/"),D={isActive:oe,isPending:re,isTransitioning:q},w=oe?e:void 0,I;typeof i=="function"?I=i(D):I=[i,oe?"active":null,re?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(D):l;return $.createElement(Uu,{...g,"aria-current":w,className:I,ref:_,style:M,to:c,viewTransition:d},typeof p=="function"?p(D):p)});T1.displayName="NavLink";var A1=$.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Yh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,...S},O)=>{let H=R1(),K=C1(d,{relative:g}),q=c.toLowerCase()==="get"?"get":"post",te=typeof d=="string"&&cA.test(d),W=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let ge=ne.nativeEvent.submitter,oe=ge?.getAttribute("formmethod")||c;H(ge||ne.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return $.createElement("form",{ref:O,method:q,action:K,onSubmit:i?p:W,...S,"data-discover":!te&&s==="render"?"true":void 0})});A1.displayName="Form";function b1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hA(s){let e=$.useContext(Jo);return ft(e,b1(s)),e}function S1(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=MR(),p=ba(),g=nc(s,{relative:l});return $.useCallback(_=>{if(n1(_,e)){_.preventDefault();let T=t!==void 0?t:Lu(p)===Lu(g);d(s,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[p,d,g,t,i,e,s,a,l,c])}var w1=0,I1=()=>`__${String(++w1)}__`;function R1(){let{router:s}=hA("useSubmit"),{basename:e}=$.useContext(Ri),t=KR();return $.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:p,body:g}=s1(i,e);if(a.navigate===!1){let _=a.fetcherKey||I1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function C1(s,{relative:e}={}){let{basename:t}=$.useContext(Ri),i=$.useContext(Ci);ft(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...nc(s||".",{relative:e})},c=ba();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Wi([t,l.pathname])),Lu(l)}function D1(s,{relative:e}={}){let t=$.useContext(nA);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=hA("useViewTransitionState"),a=nc(s,{relative:e});if(!t.isTransitioning)return!1;let l=tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return df(a.pathname,c)!=null||df(a.pathname,l)!=null}function N1(){return _e.jsxs("div",{className:"p-4",children:[_e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Spaced Repetition App"}),_e.jsx(Uu,{to:"/my-srs/decks",className:"text-blue-500 underline",children:"Go to Decks"})]})}const x1=()=>{};var JE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},V1=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},dA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(S=64)),i.push(t[_],t[T],t[S],t[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(fA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):V1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new O1;const S=l<<2|d>>4;if(i.push(S),g!==64){const O=d<<4&240|g>>2;if(i.push(O),T!==64){const H=g<<6&192|T;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class O1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M1=function(s){const e=fA(s);return dA.encodeByteArray(e,!0)},mf=function(s){return M1(s).replace(/\./g,"")},mA=function(s){try{return dA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=()=>pA().__FIREBASE_DEFAULTS__,k1=()=>{if(typeof process>"u"||typeof JE>"u")return;const s=JE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},L1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&mA(s[1]);return e&&JSON.parse(e)},qf=()=>{try{return x1()||P1()||k1()||L1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},gA=s=>qf()?.emulatorHosts?.[s],U1=s=>{const e=gA(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yA=()=>qf()?.config,_A=s=>qf()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vA(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[mf(JSON.stringify(t)),mf(JSON.stringify(c)),""].join(".")}const Iu={};function q1(){const s={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?s.emulator.push(e):s.prod.push(e);return s}function F1(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let WE=!1;function EA(s,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||Iu[s]===e||Iu[s]||WE)return;Iu[s]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=q1().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{WE=!0,c()},S}function _(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=F1(i),O=t("text"),H=document.getElementById(O)||document.createElement("span"),K=t("learnmore"),q=document.getElementById(K)||document.createElement("a"),te=t("preprendIcon"),W=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;d(ne),_(q,K);const ge=g();p(W,te),ne.append(W,H,q,ge),document.body.appendChild(ne)}l?(H.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function TA(){const s=qf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function K1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q1(){const s=Ot();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AA(){return!TA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bA(){return!TA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function SA(){try{return typeof indexedDB=="object"}catch{return!1}}function Y1(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="FirebaseError";class or extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=X1,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?$1(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new or(a,d,i)}}function $1(s,e){return s.replace(Z1,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Z1=/\{\$([^}]+)}/g;function J1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=s[a],c=e[a];if(eT(l)&&eT(c)){if(!fa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function eT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function W1(s,e){const t=new eC(s,e);return t.subscribe.bind(t)}class eC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");tC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=vp),a.error===void 0&&(a.error=vp),a.complete===void 0&&(a.complete=vp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(s){return s&&s._delegate?s._delegate:s}class da{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new B1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rC(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iC(s){return s===ea?void 0:s}function rC(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const aC={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},oC=ke.INFO,lC={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},uC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=lC[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=oC,this._logHandler=uC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const cC=(s,e)=>e.some(t=>s instanceof t);let tT,nT;function hC(){return tT||(tT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fC(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wA=new WeakMap,Pp=new WeakMap,IA=new WeakMap,Ep=new WeakMap,Sg=new WeakMap;function dC(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(is(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&wA.set(t,s)}).catch(()=>{}),Sg.set(e,s),e}function mC(s){if(Pp.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Pp.set(s,e)}let kp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Pp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||IA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return is(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function pC(s){kp=s(kp)}function gC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Tp(this),e,...t);return IA.set(i,e.sort?e.sort():[e]),is(i)}:fC().includes(s)?function(...e){return s.apply(Tp(this),e),is(wA.get(this))}:function(...e){return is(s.apply(Tp(this),e))}}function yC(s){return typeof s=="function"?gC(s):(s instanceof IDBTransaction&&mC(s),cC(s,hC())?new Proxy(s,kp):s)}function is(s){if(s instanceof IDBRequest)return dC(s);if(Ep.has(s))return Ep.get(s);const e=yC(s);return e!==s&&(Ep.set(s,e),Sg.set(e,s)),e}const Tp=s=>Sg.get(s);function _C(s,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=is(c);return i&&c.addEventListener("upgradeneeded",p=>{i(is(c.result),p.oldVersion,p.newVersion,is(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const vC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Ap=new Map;function iT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ap.get(e))return Ap.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=EC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||vC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Ap.set(e,l),l}pC(s=>({...s,get:(e,t,i)=>iT(e,t)||s.get(e,t,i),has:(e,t)=>!!iT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function AC(s){return s.getComponent()?.type==="VERSION"}const Lp="@firebase/app",rT="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new bg("@firebase/app"),bC="@firebase/app-compat",SC="@firebase/analytics-compat",wC="@firebase/analytics",IC="@firebase/app-check-compat",RC="@firebase/app-check",CC="@firebase/auth",DC="@firebase/auth-compat",NC="@firebase/database",xC="@firebase/data-connect",VC="@firebase/database-compat",OC="@firebase/functions",MC="@firebase/functions-compat",PC="@firebase/installations",kC="@firebase/installations-compat",LC="@firebase/messaging",UC="@firebase/messaging-compat",BC="@firebase/performance",zC="@firebase/performance-compat",qC="@firebase/remote-config",FC="@firebase/remote-config-compat",jC="@firebase/storage",HC="@firebase/storage-compat",GC="@firebase/firestore",KC="@firebase/ai",QC="@firebase/firestore-compat",YC="firebase",XC="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",$C={[Lp]:"fire-core",[bC]:"fire-core-compat",[wC]:"fire-analytics",[SC]:"fire-analytics-compat",[RC]:"fire-app-check",[IC]:"fire-app-check-compat",[CC]:"fire-auth",[DC]:"fire-auth-compat",[NC]:"fire-rtdb",[xC]:"fire-data-connect",[VC]:"fire-rtdb-compat",[OC]:"fire-fn",[MC]:"fire-fn-compat",[PC]:"fire-iid",[kC]:"fire-iid-compat",[LC]:"fire-fcm",[UC]:"fire-fcm-compat",[BC]:"fire-perf",[zC]:"fire-perf-compat",[qC]:"fire-rc",[FC]:"fire-rc-compat",[jC]:"fire-gcs",[HC]:"fire-gcs-compat",[GC]:"fire-fst",[QC]:"fire-fst-compat",[KC]:"fire-vertex","fire-js":"fire-js",[YC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Map,ZC=new Map,Bp=new Map;function sT(s,e){try{s.container.addComponent(e)}catch(t){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ko(s){const e=s.name;if(Bp.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,s);for(const t of pf.values())sT(t,s);for(const t of ZC.values())sT(t,s);return!0}function wg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function _i(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new ic("app","Firebase",JC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=XC;function RA(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Up,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw rs.create("bad-app-name",{appName:String(a)});if(t||(t=yA()),!t)throw rs.create("no-options");const l=pf.get(a);if(l){if(fa(t,l.options)&&fa(i,l.config))return l;throw rs.create("duplicate-app",{appName:a})}const c=new sC(a);for(const p of Bp.values())c.addComponent(p);const d=new WC(t,i,c);return pf.set(a,d),d}function CA(s=Up){const e=pf.get(s);if(!e&&s===Up&&yA())return RA();if(!e)throw rs.create("no-app",{appName:s});return e}function ss(s,e,t){let i=$C[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(c.join(" "));return}ko(new da(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-heartbeat-database",tD=1,Bu="firebase-heartbeat-store";let bp=null;function DA(){return bp||(bp=_C(eD,tD,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bu)}catch(t){console.warn(t)}}}}).catch(s=>{throw rs.create("idb-open",{originalErrorMessage:s.message})})),bp}async function nD(s){try{const t=(await DA()).transaction(Bu),i=await t.objectStore(Bu).get(NA(s));return await t.done,i}catch(e){if(e instanceof or)nr.warn(e.message);else{const t=rs.create("idb-get",{originalErrorMessage:e?.message});nr.warn(t.message)}}}async function aT(s,e){try{const i=(await DA()).transaction(Bu,"readwrite");await i.objectStore(Bu).put(e,NA(s)),await i.done}catch(t){if(t instanceof or)nr.warn(t.message);else{const i=rs.create("idb-set",{originalErrorMessage:t?.message});nr.warn(i.message)}}}function NA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=1024,rD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=oT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>rD){const a=lD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oT(),{heartbeatsToSend:t,unsentEntries:i}=aD(this._heartbeatsCache.heartbeats),a=mf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return nr.warn(e),""}}}function oT(){return new Date().toISOString().substring(0,10)}function aD(s,e=iD){const t=[];let i=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),lT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),lT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class oD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SA()?Y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lT(s){return mf(JSON.stringify({version:2,heartbeats:s})).length}function lD(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(s){ko(new da("platform-logger",e=>new TC(e),"PRIVATE")),ko(new da("heartbeat",e=>new sD(e),"PRIVATE")),ss(Lp,rT,s),ss(Lp,rT,"esm2020"),ss("fire-js","")}uD("");var uT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,xA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function I(){}I.prototype=w.prototype,D.F=w.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(M,x,k){for(var C=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)C[dt-2]=arguments[dt];return w.prototype[x].apply(M,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)M[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;x<16;++x)M[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=D.g[0],I=D.g[1],x=D.g[2];let k=D.g[3],C;C=w+(k^I&(x^k))+M[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(x^w&(I^x))+M[1]+3905402710&4294967295,k=w+(C<<12&4294967295|C>>>20),C=x+(I^k&(w^I))+M[2]+606105819&4294967295,x=k+(C<<17&4294967295|C>>>15),C=I+(w^x&(k^w))+M[3]+3250441966&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(k^I&(x^k))+M[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(x^w&(I^x))+M[5]+1200080426&4294967295,k=w+(C<<12&4294967295|C>>>20),C=x+(I^k&(w^I))+M[6]+2821735955&4294967295,x=k+(C<<17&4294967295|C>>>15),C=I+(w^x&(k^w))+M[7]+4249261313&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(k^I&(x^k))+M[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(x^w&(I^x))+M[9]+2336552879&4294967295,k=w+(C<<12&4294967295|C>>>20),C=x+(I^k&(w^I))+M[10]+4294925233&4294967295,x=k+(C<<17&4294967295|C>>>15),C=I+(w^x&(k^w))+M[11]+2304563134&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(k^I&(x^k))+M[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=k+(x^w&(I^x))+M[13]+4254626195&4294967295,k=w+(C<<12&4294967295|C>>>20),C=x+(I^k&(w^I))+M[14]+2792965006&4294967295,x=k+(C<<17&4294967295|C>>>15),C=I+(w^x&(k^w))+M[15]+1236535329&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(x^k&(I^x))+M[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^x&(w^I))+M[6]+3225465664&4294967295,k=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(k^w))+M[11]+643717713&4294967295,x=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(x^k))+M[0]+3921069994&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^k&(I^x))+M[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^x&(w^I))+M[10]+38016083&4294967295,k=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(k^w))+M[15]+3634488961&4294967295,x=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(x^k))+M[4]+3889429448&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^k&(I^x))+M[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^x&(w^I))+M[14]+3275163606&4294967295,k=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(k^w))+M[3]+4107603335&4294967295,x=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(x^k))+M[8]+1163531501&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^k&(I^x))+M[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=k+(I^x&(w^I))+M[2]+4243563512&4294967295,k=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(k^w))+M[7]+1735328473&4294967295,x=k+(C<<14&4294967295|C>>>18),C=I+(k^w&(x^k))+M[12]+2368359562&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(I^x^k)+M[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^x)+M[8]+2272392833&4294967295,k=w+(C<<11&4294967295|C>>>21),C=x+(k^w^I)+M[11]+1839030562&4294967295,x=k+(C<<16&4294967295|C>>>16),C=I+(x^k^w)+M[14]+4259657740&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^k)+M[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^x)+M[4]+1272893353&4294967295,k=w+(C<<11&4294967295|C>>>21),C=x+(k^w^I)+M[7]+4139469664&4294967295,x=k+(C<<16&4294967295|C>>>16),C=I+(x^k^w)+M[10]+3200236656&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^k)+M[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^x)+M[0]+3936430074&4294967295,k=w+(C<<11&4294967295|C>>>21),C=x+(k^w^I)+M[3]+3572445317&4294967295,x=k+(C<<16&4294967295|C>>>16),C=I+(x^k^w)+M[6]+76029189&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^k)+M[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=k+(w^I^x)+M[12]+3873151461&4294967295,k=w+(C<<11&4294967295|C>>>21),C=x+(k^w^I)+M[15]+530742520&4294967295,x=k+(C<<16&4294967295|C>>>16),C=I+(x^k^w)+M[2]+3299628645&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(x^(I|~k))+M[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~x))+M[7]+1126891415&4294967295,k=w+(C<<10&4294967295|C>>>22),C=x+(w^(k|~I))+M[14]+2878612391&4294967295,x=k+(C<<15&4294967295|C>>>17),C=I+(k^(x|~w))+M[5]+4237533241&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~k))+M[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~x))+M[3]+2399980690&4294967295,k=w+(C<<10&4294967295|C>>>22),C=x+(w^(k|~I))+M[10]+4293915773&4294967295,x=k+(C<<15&4294967295|C>>>17),C=I+(k^(x|~w))+M[1]+2240044497&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~k))+M[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~x))+M[15]+4264355552&4294967295,k=w+(C<<10&4294967295|C>>>22),C=x+(w^(k|~I))+M[6]+2734768916&4294967295,x=k+(C<<15&4294967295|C>>>17),C=I+(k^(x|~w))+M[13]+1309151649&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~k))+M[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=k+(I^(w|~x))+M[11]+3174756917&4294967295,k=w+(C<<10&4294967295|C>>>22),C=x+(w^(k|~I))+M[2]+718787259&4294967295,x=k+(C<<15&4294967295|C>>>17),C=I+(k^(x|~w))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.v=function(D,w){w===void 0&&(w=D.length);const I=w-this.blockSize,M=this.C;let x=this.h,k=0;for(;k<w;){if(x==0)for(;k<=I;)a(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<w;)if(M[x++]=D.charCodeAt(k++),x==this.blockSize){a(this,M),x=0;break}}else for(;k<w;)if(M[x++]=D[k++],x==this.blockSize){a(this,M),x=0;break}}this.h=x,this.o+=w},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)D[w++]=this.g[I]>>>M&255;return D};function l(D,w){var I=d;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=w(D)}function c(D,w){this.h=w;const I=[];let M=!0;for(let x=D.length-1;x>=0;x--){const k=D[x]|0;M&&k==w||(I[x]=k,M=!1)}this.g=I}var d={};function p(D){return-128<=D&&D<128?l(D,function(w){return new c([w|0],w<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return q(g(-D));const w=[];let I=1;for(let M=0;D>=I;M++)w[M]=D/I|0,I*=4294967296;return new c(w,0)}function _(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return q(_(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let M=T;for(let k=0;k<D.length;k+=8){var x=Math.min(8,D.length-k);const C=parseInt(D.substring(k,k+x),w);x<8?(x=g(Math.pow(w,x)),M=M.j(x).add(g(C))):(M=M.j(I),M=M.add(g(C)))}return M}var T=p(0),S=p(1),O=p(16777216);s=c.prototype,s.m=function(){if(K(this))return-q(this).m();let D=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);D+=(M>=0?M:4294967296+M)*w,w*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(K(this))return"-"+q(this).toString(D);const w=g(Math.pow(D,6));var I=this;let M="";for(;;){const x=ge(I,w).g;I=te(I,x.j(w));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=x,H(I))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function K(D){return D.h==-1}s.l=function(D){return D=te(this,D),K(D)?-1:H(D)?0:1};function q(D){const w=D.g.length,I=[];for(let M=0;M<w;M++)I[M]=~D.g[M];return new c(I,~D.h).add(S)}s.abs=function(){return K(this)?q(this):this},s.add=function(D){const w=Math.max(this.g.length,D.g.length),I=[];let M=0;for(let x=0;x<=w;x++){let k=M+(this.i(x)&65535)+(D.i(x)&65535),C=(k>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);M=C>>>16,k&=65535,C&=65535,I[x]=C<<16|k}return new c(I,I[I.length-1]&-2147483648?-1:0)};function te(D,w){return D.add(q(w))}s.j=function(D){if(H(this)||H(D))return T;if(K(this))return K(D)?q(this).j(q(D)):q(q(this).j(D));if(K(D))return q(this.j(q(D)));if(this.l(O)<0&&D.l(O)<0)return g(this.m()*D.m());const w=this.g.length+D.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let x=0;x<D.g.length;x++){const k=this.i(M)>>>16,C=this.i(M)&65535,dt=D.i(x)>>>16,st=D.i(x)&65535;I[2*M+2*x]+=C*st,W(I,2*M+2*x),I[2*M+2*x+1]+=k*st,W(I,2*M+2*x+1),I[2*M+2*x+1]+=C*dt,W(I,2*M+2*x+1),I[2*M+2*x+2]+=k*dt,W(I,2*M+2*x+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new c(I,0)};function W(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function ne(D,w){this.g=D,this.h=w}function ge(D,w){if(H(w))throw Error("division by zero");if(H(D))return new ne(T,T);if(K(D))return w=ge(q(D),w),new ne(q(w.g),q(w.h));if(K(w))return w=ge(D,q(w)),new ne(q(w.g),w.h);if(D.g.length>30){if(K(D)||K(w))throw Error("slowDivide_ only works with positive integers.");for(var I=S,M=w;M.l(D)<=0;)I=oe(I),M=oe(M);var x=re(I,1),k=re(M,1);for(M=re(M,2),I=re(I,2);!H(M);){var C=k.add(M);C.l(D)<=0&&(x=x.add(I),k=C),M=re(M,1),I=re(I,1)}return w=te(D,x.j(w)),new ne(x,w)}for(x=T;D.l(w)>=0;){for(I=Math.max(1,Math.floor(D.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=g(I),C=k.j(w);K(C)||C.l(D)>0;)I-=M,k=g(I),C=k.j(w);H(k)&&(k=S),x=x.add(k),D=te(D,C)}return new ne(x,D)}s.B=function(D){return ge(this,D).h},s.and=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&D.i(M);return new c(I,this.h&D.h)},s.or=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|D.i(M);return new c(I,this.h|D.h)},s.xor=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^D.i(M);return new c(I,this.h^D.h)};function oe(D){const w=D.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=D.i(M)<<1|D.i(M-1)>>>31;return new c(I,D.h)}function re(D,w){const I=w>>5;w%=32;const M=D.g.length-I,x=[];for(let k=0;k<M;k++)x[k]=w>0?D.i(k+I)>>>w|D.i(k+I+1)<<32-w:D.i(k+I);return new c(x,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,xA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,as=c}).apply(typeof uT<"u"?uT:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VA,Tu,OA,$h,zp,MA,PA,kA;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var B=h[b];if(!(B in v))break e;v=v[B]}h=h[h.length-1],b=v[h],y=y(b),y!=b&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&v.push([b,y[b]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=p,g.apply(null,arguments)}function _(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(b,B,G){for(var se=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)se[Ce-2]=arguments[Ce];return y.prototype[B].apply(b,se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const v=Array(y);for(let b=0;b<y;b++)v[b]=h[b];return v}return[]}function H(h,y){for(let b=1;b<arguments.length;b++){const B=arguments[b];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=h.length||0;const G=B.length||0;h.length=v+G;for(let se=0;se<G;se++)h[v+se]=B[se]}else h.push(B)}}class K{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){c.setTimeout(()=>{throw h},0)}function te(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,v){const b=ne.get();b.set(y,v),this.h?this.h.next=b:this.g=b,this.h=b}}var ne=new K(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,re=!1,D=new W,w=()=>{const h=Promise.resolve(void 0);oe=()=>{h.then(I)}};function I(){for(var h;h=te();){try{h.h.call(h.g)}catch(v){q(v)}var y=ne;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}re=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function dt(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(dt,x),dt.prototype.init=function(h,y){const v=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ce(h,y,v,b,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!b,this.ha=B,this.key=++Y,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,y,v){for(const b in h)y.call(v,h[b],b,h)}function N(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function ee(h){const y={};for(const v in h)y[v]=h[v];return y}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let v,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(v in b)h[v]=b[v];for(let G=0;G<he.length;G++)v=he[G],Object.prototype.hasOwnProperty.call(b,v)&&(h[v]=b[v])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,y,v,b,B){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const se=be(h,y,b,B);return se>-1?(y=h[se],v||(y.fa=!1)):(y=new ce(y,this.src,G,!!b,B),y.fa=v,h.push(y)),y};function Pe(h,y){const v=y.type;if(v in h.g){var b=h.g[v],B=Array.prototype.indexOf.call(b,y,void 0),G;(G=B>=0)&&Array.prototype.splice.call(b,B,1),G&&(ve(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function be(h,y,v,b){for(let B=0;B<h.length;++B){const G=h[B];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==b)return B}return-1}var qt="closure_lm_"+(Math.random()*1e6|0),$e={};function jn(h,y,v,b,B){if(Array.isArray(y)){for(let G=0;G<y.length;G++)jn(h,y[G],v,b,B);return null}return v=_c(v),h&&h[st]?h.J(y,v,d(b)?!!b.capture:!1,B):ol(h,y,v,!1,b,B)}function ol(h,y,v,b,B,G){if(!y)throw Error("Invalid event type");const se=d(B)?!!B.capture:!!B;let Ce=ll(h);if(Ce||(h[qt]=Ce=new ye(h)),v=Ce.add(y,v,b,se,G),v.proxy)return v;if(b=Ia(),v.proxy=b,b.src=h,b.listener=v,h.addEventListener)k||(B=se),B===void 0&&(B=!1),h.addEventListener(y.toString(),b,B);else if(h.attachEvent)h.attachEvent(Ca(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ia(){function h(v){return y.call(h.src,h.listener,v)}const y=fd;return h}function Ra(h,y,v,b,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)Ra(h,y[G],v,b,B);else b=d(b)?!!b.capture:!!b,v=_c(v),h&&h[st]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],v=be(y,v,b,B),v>-1&&(ve(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=ll(h))&&(y=h.g[y.toString()],h=-1,y&&(h=be(y,v,b,B)),(v=h>-1?y[h]:null)&&gs(v))}function gs(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[st])Pe(y.i,h);else{var v=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(v,b,h.capture):y.detachEvent?y.detachEvent(Ca(v),b):y.addListener&&y.removeListener&&y.removeListener(b),(v=ll(y))?(Pe(v,h),v.h==0&&(v.src=null,y[qt]=null)):ve(h)}}}function Ca(h){return h in $e?$e[h]:$e[h]="on"+h}function fd(h,y){if(h.da)h=!0;else{y=new dt(y,this);const v=h.listener,b=h.ha||h.src;h.fa&&gs(h),h=v.call(b,y)}return h}function ll(h){return h=h[qt],h instanceof ye?h:null}var fn="__closure_events_fn_"+(Math.random()*1e9>>>0);function _c(h){return typeof h=="function"?h:(h[fn]||(h[fn]=function(y){return h.handleEvent(y)}),h[fn])}function Ct(){M.call(this),this.i=new ye(this),this.M=this,this.G=null}T(Ct,M),Ct.prototype[st]=!0,Ct.prototype.removeEventListener=function(h,y,v,b){Ra(this,h,y,v,b)};function Pt(h,y){var v,b=h.G;if(b)for(v=[];b;b=b.G)v.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var B=y;y=new x(b,h),ue(y,B)}B=!0;let G,se;if(v)for(se=v.length-1;se>=0;se--)G=y.g=v[se],B=Di(G,b,!0,y)&&B;if(G=y.g=h,B=Di(G,b,!0,y)&&B,B=Di(G,b,!1,y)&&B,v)for(se=0;se<v.length;se++)G=y.g=v[se],B=Di(G,b,!1,y)&&B}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let b=0;b<v.length;b++)ve(v[b]);delete h.g[y],h.h--}}this.G=null},Ct.prototype.J=function(h,y,v,b){return this.i.add(String(h),y,!1,v,b)},Ct.prototype.K=function(h,y,v,b){return this.i.add(String(h),y,!0,v,b)};function Di(h,y,v,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let G=0;G<y.length;++G){const se=y[G];if(se&&!se.da&&se.capture==v){const Ce=se.listener,rt=se.ha||se.src;se.fa&&Pe(h.i,se),B=Ce.call(rt,b)!==!1&&B}}return B&&!b.defaultPrevented}function dd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ul(h){h.g=dd(()=>{h.g=null,h.i&&(h.i=!1,ul(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class md extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(h){M.call(this),this.h=h,this.g={}}T(ys,M);var cr=[];function Yt(h){ze(h.g,function(y,v){this.g.hasOwnProperty(v)&&gs(y)},h),h.g={}}ys.prototype.N=function(){ys.Z.N.call(this),Yt(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=c.JSON.stringify,nn=c.JSON.parse,pd=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vc(){}function Ec(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hr(){x.call(this,"d")}T(hr,x);function Hn(){x.call(this,"c")}T(Hn,x);var Dn={},fr=null;function Da(){return fr=fr||new Ct}Dn.Ia="serverreachability";function cl(h){x.call(this,Dn.Ia,h)}T(cl,x);function dr(h){const y=Da();Pt(y,new cl(y))}Dn.STAT_EVENT="statevent";function Na(h,y){x.call(this,Dn.STAT_EVENT,h),this.stat=y}T(Na,x);function yt(h){const y=Da();Pt(y,new Na(y,h))}Dn.Ja="timingevent";function Tc(h,y){x.call(this,Dn.Ja,h),this.size=y}T(Tc,x);function mr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function hl(h,y,v,b,B,G){h.info(function(){if(h.g)if(G){var se="",Ce=G.split("&");for(let He=0;He<Ce.length;He++){var rt=Ce[He].split("=");if(rt.length>1){const Et=rt[0];rt=rt[1];const yn=Et.split("_");se=yn.length>=2&&yn[1]=="type"?se+(Et+"="+rt+"&"):se+(Et+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+y+`
`+v+`
`+se})}function fl(h,y,v,b,B,G,se){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+y+`
`+v+`
`+G+" "+se})}function Ni(h,y,v,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ii(h,v)+(b?" "+b:"")})}function gd(h,y){h.info(function(){return"TIMEOUT: "+y})}pr.prototype.info=function(){};function ii(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var B=b[0];if(B!="noop"&&B!="stop"&&B!="close")for(let se=1;se<b.length;se++)b[se]=""}}}}return Cn(G)}catch{return y}}var _t={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ft={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xi;function _s(){}T(_s,vc),_s.prototype.g=function(){return new XMLHttpRequest},xi=new _s;function vs(h){return encodeURIComponent(String(h))}function yd(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Gn(h,y,v,b){this.j=h,this.i=y,this.l=v,this.S=b||1,this.V=new ys(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}var xa={},ri={};function si(h,y,v){h.M=1,h.A=Oi(ut(y)),h.u=v,h.R=!0,yr(h,null)}function yr(h,y){h.F=Date.now(),Es(h),h.B=ut(h.A);var v=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),wc(v.i,"t",b),h.C=0,v=h.j.L,h.h=new gr,h.g=qa(h.j,v?y:null,!h.u),h.P>0&&(h.O=new md(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,b=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(cr[0]=B.toString()),B=cr);for(let G=0;G<B.length;G++){const se=jn(v,B[G],b||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?ee(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),dr(),hl(h.i,h.v,h.B,h.l,h.S,h.u)}Gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xt(h)==3?y.j():this.Y(h)},Gn.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=Xt(this.g),rt=this.g.ya(),He=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||xs(this.g)))){this.K||Ce!=4||rt==7||(rt==8||He<=0?dr(3):dr(2)),oi(this);var y=this.g.ca();this.X=y;var v=_r(this);if(this.o=y==200,fl(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(b)){var G=b;break t}}G=null}if(h=G)Ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Va(this,h);else{this.o=!1,this.m=3,yt(12),li(this),Ts(this);break e}}if(this.R){h=!0;let Et;for(;!this.K&&this.C<v.length;)if(Et=Ac(this,v),Et==ri){Ce==4&&(this.m=4,yt(14),h=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==xa){this.m=4,yt(15),Ni(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ni(this.i,this.l,Et,null),Va(this,Et);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||v.length!=0||this.h.h||(this.m=1,yt(16),h=!1),this.o=this.o&&h,!h)Ni(this.i,this.l,v,"[Invalid Chunked Response]"),li(this),Ts(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Al(se),se.P=!0,yt(11))}}else Ni(this.i,this.l,v,null),Va(this,v);Ce==4&&li(this),this.o&&!this.K&&(Ce==4?bl(this.j,this):(this.o=!1,Es(this)))}else Vs(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),li(this),Ts(this)}}}catch{}finally{}};function _r(h){if(!vt(h))return h.g.la();const y=xs(h.g);if(y==="")return"";let v="";const b=y.length,B=Xt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return li(h),Ts(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<b;G++)h.h.h=!0,v+=h.h.i.decode(y[G],{stream:!(B&&G==b-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function vt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ac(h,y){var v=h.C,b=y.indexOf(`
`,v);return b==-1?ri:(v=Number(y.substring(v,b)),isNaN(v)?xa:(b+=1,b+v>y.length?ri:(y=y.slice(b,b+v),h.C=b+v,y)))}Gn.prototype.cancel=function(){this.K=!0,li(this)};function Es(h){h.T=Date.now()+h.H,ai(h,h.H)}function ai(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mr(g(h.aa,h),y)}function oi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(gd(this.i,this.B),this.M!=2&&(dr(),yt(17)),li(this),this.m=2,Ts(this)):ai(this,this.T-h)};function Ts(h){h.j.I==0||h.K||bl(h.j,h)}function li(h){oi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Yt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Va(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ss(v.h,h))){if(!h.L&&Ss(v.h,h)&&v.I==3){try{var b=v.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)za(v),ui(v);else break e;Tl(v),yt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=mr(g(v.Va,v),6e3));Nn(v.h)<=1&&v.ta&&(v.ta=void 0)}else ki(v,11)}else if((h.L||v.g==h)&&za(v),!C(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let He=B[y];const Et=He[0];if(!(Et<=v.K))if(v.K=Et,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const yn=He[3];yn!=null&&(v.ka=yn,v.j.info("VER="+v.ka));const ci=He[4];ci!=null&&(v.za=ci,v.j.info("SVER="+v.za));const Yn=He[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(b=1.5*Yn,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Xn=h.g;if(Xn){const $n=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var G=b.h;G.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Oa(G,G.h),G.h=null))}if(b.G){const wl=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(b.wa=wl,Ze(b.J,b.G,wl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var se=h;if(b.na=Mc(b,b.L?b.ba:null,b.W),se.L){Vi(b.h,se);var Ce=se,rt=b.O;rt&&(Ce.H=rt),Ce.D&&(oi(Ce),Es(Ce)),b.g=se}else Nc(b);v.i.length>0&&ks(v)}else He[0]!="stop"&&He[0]!="close"||ki(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?ki(v,7):Ms(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}dr(4)}catch{}}var _d=class{constructor(h,y){this.g=h,this.map=y}};function As(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bs(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nn(h){return h.h?1:h.g?h.g.size:0}function Ss(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Oa(h,y){h.g?h.g.add(y):h.h=y}function Vi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}As.prototype.cancel=function(){if(this.i=Ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ma(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return O(h.i)}var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vd(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const b=h[v].indexOf("=");let B,G=null;b>=0?(B=h[v].substring(0,b),G=h[v].substring(b+1)):B=h[v],y(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Kn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Kn?(this.l=h.l,vr(this,h.j),this.o=h.o,this.g=h.g,ws(this,h.u),this.h=h.h,Er(this,Ic(h.i)),this.m=h.m):h&&(y=String(h).match(Pa))?(this.l=!1,vr(this,y[1]||"",!0),this.o=Is(y[2]||""),this.g=Is(y[3]||"",!0),ws(this,y[4]),this.h=Is(y[5]||"",!0),Er(this,y[6]||"",!0),this.m=Is(y[7]||"")):(this.l=!1,this.i=new xn(null,this.l))}Kn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(kt(y,ml,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(kt(y,ml,!0),"@"),h.push(vs(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(kt(v,v.charAt(0)=="/"?Tr:pl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",kt(v,Sc)),h.join("")},Kn.prototype.resolve=function(h){const y=ut(this);let v=!!h.j;v?vr(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var b=h.h;if(v)ws(y,h.u);else if(v=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var B=y.h.lastIndexOf("/");B!=-1&&(b=y.h.slice(0,B+1)+b)}if(B=b,B==".."||B==".")b="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){b=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let se=0;se<B.length;){const Ce=B[se++];Ce=="."?b&&se==B.length&&G.push(""):Ce==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),b&&se==B.length&&G.push("")):(G.push(Ce),b=!0)}b=G.join("/")}else b=B}return v?y.h=b:v=h.i.toString()!=="",v?Er(y,Ic(h.i)):v=!!h.m,v&&(y.m=h.m),y};function ut(h){return new Kn(h)}function vr(h,y,v){h.j=v?Is(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ws(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Er(h,y,v){y instanceof xn?(h.i=y,_l(h.i,h.l)):(v||(y=kt(y,bc)),h.i=new xn(y,h.l))}function Ze(h,y,v){h.i.set(y,v)}function Oi(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Is(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kt(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,dl),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ml=/[#\/\?@]/g,pl=/[#\?:]/g,Tr=/[#\?]/g,bc=/[#\?@]/g,Sc=/#/g;function xn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Mi(h){h.g||(h.g=new Map,h.h=0,h.i&&vd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=xn.prototype,s.add=function(h,y){Mi(this),this.i=null,h=Qn(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function gl(h,y){Mi(h),y=Qn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function yl(h,y){return Mi(h),y=Qn(h,y),h.g.has(y)}s.forEach=function(h,y){Mi(this),this.g.forEach(function(v,b){v.forEach(function(B){h.call(y,B,b,this)},this)},this)};function ka(h,y){Mi(h);let v=[];if(typeof y=="string")yl(h,y)&&(v=v.concat(h.g.get(Qn(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return Mi(this),this.i=null,h=Qn(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=ka(this,h),h.length>0?String(h[0]):y):y};function wc(h,y,v){gl(h,y),v.length>0&&(h.i=null,h.g.set(Qn(h,y),O(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var v=y[b];const B=vs(v);v=ka(this,v);for(let G=0;G<v.length;G++){let se=B;v[G]!==""&&(se+="="+vs(v[G])),h.push(se)}}return this.i=h.join("&")};function Ic(h){const y=new xn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Qn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function _l(h,y){y&&!h.j&&(Mi(h),h.i=null,h.g.forEach(function(v,b){const B=b.toLowerCase();b!=B&&(gl(this,b),wc(this,B,v))},h)),h.j=y}function vl(h,y){const v=new pr;if(c.Image){const b=new Image;b.onload=_(rn,v,"TestLoadImage: loaded",!0,y,b),b.onerror=_(rn,v,"TestLoadImage: error",!1,y,b),b.onabort=_(rn,v,"TestLoadImage: abort",!1,y,b),b.ontimeout=_(rn,v,"TestLoadImage: timeout",!1,y,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function Ar(h,y){const v=new pr,b=new AbortController,B=setTimeout(()=>{b.abort(),rn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(G=>{clearTimeout(B),G.ok?rn(v,"TestPingServer: ok",!0,y):rn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),rn(v,"TestPingServer: error",!1,y)})}function rn(h,y,v,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(v)}catch{}}function Rc(){this.g=new pd}function Rs(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Rs,vc),Rs.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(h,y){Ct.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Cs,Ct),s=Cs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Pi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sn(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;br(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function br(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?sn(this):Pi(this),this.readyState==3&&br(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,sn(this))},s.Na=function(h){this.g&&(this.response=h,sn(this))},s.ga=function(){this.g&&sn(this)};function sn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Pi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Pi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Sr(h){let y="";return ze(h,function(v,b){y+=b,y+=":",y+=v,y+=`\r
`}),y}function Vn(h,y,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Sr(v),typeof h=="string"?v!=null&&vs(v):Ze(h,y,v))}function nt(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var La=/^https?$/i,Cc=["POST","PUT"];s=nt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xi.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){Ds(this,G);return}if(h=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)v.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())v.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cc,y,void 0)>=0)||b||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of v)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){Ds(this,G)}};function Ds(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ns(h),Dt(h)}function Ns(h){h.A||(h.A=!0,Pt(h,"complete"),Pt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Pt(this,"complete"),Pt(this,"abort"),Dt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dt(this,!0)),nt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?El(this):this.Xa())},s.Xa=function(){El(this)};function El(h){if(h.h&&typeof l<"u"){if(h.v&&Xt(h)==4)setTimeout(h.Ca.bind(h),0);else if(Pt(h,"readystatechange"),Xt(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var b;if(b=G===0){let se=String(h.D).match(Pa)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),b=!La.test(se?se.toLowerCase():"")}v=b}if(v)Pt(h,"complete"),Pt(h,"success");else{h.o=6;try{var B=Xt(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Ns(h)}}finally{Dt(h)}}}}function Dt(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Pt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xt(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Xt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),nn(y)}};function xs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Vs(h){const y={};h=(h.g&&Xt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(C(h[b]))continue;var v=yd(h[b]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[B]||[];y[B]=G,G.push(v)}N(y,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ua(h){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,h),this.Za=Os("retryDelaySeedMs",1e4,h),this.Ta=Os("forwardChannelMaxRetries",2,h),this.va=Os("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new As(h&&h.concurrentRequestLimit),this.Ba=new Rc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ua.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,b){yt(0),this.W=h,this.H=y||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=Mc(this,null,this.W),ks(this)};function Ms(h){if(Ps(h),h.I==3){var y=h.V++,v=ut(h.J);if(Ze(v,"SID",h.M),Ze(v,"RID",y),Ze(v,"TYPE","terminate"),Ls(h,v),y=new Gn(h,h.j,y),y.M=2,y.A=Oi(ut(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=qa(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Es(y)}Oc(h)}function ui(h){h.g&&(Al(h),h.g.cancel(),h.g=null)}function Ps(h){ui(h),h.v&&(c.clearTimeout(h.v),h.v=null),za(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ks(h){if(!bs(h.h)&&!h.m){h.m=!0;var y=h.Ea;oe||w(),re||(oe(),re=!0),D.add(y,h),h.D=0}}function Ed(h,y){return Nn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mr(g(h.Ea,h,y),Vc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Gn(this,this.j,h);let G=this.o;if(this.U&&(G?(G=ee(G),ue(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Ba(this,B,y),v=ut(this.J),Ze(v,"RID",h),Ze(v,"CVER",22),this.G&&Ze(v,"X-HTTP-Session-Id",this.G),Ls(this,v),G&&(this.R?y="headers="+vs(Sr(G))+"&"+y:this.u&&Vn(v,this.u,G)),Oa(this.h,B),this.Ra&&Ze(v,"TYPE","init"),this.S?(Ze(v,"$req",y),Ze(v,"SID","null"),B.U=!0,si(B,v,null)):si(B,v,y),this.I=2}}else this.I==3&&(h?Dc(this,h):this.i.length==0||bs(this.h)||Dc(this))};function Dc(h,y){var v;y?v=y.l:v=h.V++;const b=ut(h.J);Ze(b,"SID",h.M),Ze(b,"RID",v),Ze(b,"AID",h.K),Ls(h,b),h.u&&h.o&&Vn(b,h.u,h.o),v=new Gn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ba(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Oa(h.h,v),si(v,b,y)}function Ls(h,y){h.H&&ze(h.H,function(v,b){Ze(y,b,v)}),h.l&&ze({},function(v,b){Ze(y,b,v)})}function Ba(h,y,v){v=Math.min(h.i.length,v);const b=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ce=-1;for(;;){const rt=["count="+v];Ce==-1?v>0?(Ce=B[0].g,rt.push("ofs="+Ce)):Ce=0:rt.push("ofs="+Ce);let He=!0;for(let Et=0;Et<v;Et++){var G=B[Et].g;const yn=B[Et].map;if(G-=Ce,G<0)Ce=Math.max(0,B[Et].g-100),He=!1;else try{G="req"+G+"_"||"";try{var se=yn instanceof Map?yn:Object.entries(yn);for(const[ci,Yn]of se){let Xn=Yn;d(Yn)&&(Xn=Cn(Yn)),rt.push(G+ci+"="+encodeURIComponent(Xn))}}catch(ci){throw rt.push(G+"type="+encodeURIComponent("_badmap")),ci}}catch{b&&b(yn)}}if(He){se=rt.join("&");break e}}se=void 0}return h=h.i.splice(0,v),y.G=h,se}function Nc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;oe||w(),re||(oe(),re=!0),D.add(y,h),h.A=0}}function Tl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mr(g(h.Da,h),Vc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,xc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mr(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),ui(this),xc(this))};function Al(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function xc(h){h.g=new Gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ut(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),Ls(h,y),h.u&&h.o&&Vn(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Oi(ut(y)),v.u=null,v.R=!0,yr(v,h)}s.Va=function(){this.C!=null&&(this.C=null,ui(this),Tl(this),yt(19))};function za(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function bl(h,y){var v=null;if(h.g==y){za(h),Al(h),h.g=null;var b=2}else if(Ss(h.h,y))v=y.G,Vi(h.h,y),b=1;else return;if(h.I!=0){if(y.o)if(b==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;b=Da(),Pt(b,new Tc(b,v)),ks(h)}else Nc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(b==1&&Ed(h,y)||b==2&&Tl(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),B){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function Vc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function ki(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),b=h.Ua;const B=!b;b=new Kn(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||vr(b,"https"),Oi(b),B?vl(b.toString(),v):Ar(b.toString(),v)}else yt(2);h.I=0,h.l&&h.l.pa(y),Oc(h),Ps(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Oc(h){if(h.I=0,h.ja=[],h.l){const y=Ma(h.h);(y.length!=0||h.i.length!=0)&&(H(h.ja,y),H(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Mc(h,y,v){var b=v instanceof Kn?ut(v):new Kn(v);if(b.g!="")y&&(b.g=y+"."+b.g),ws(b,b.u);else{var B=c.location;b=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const G=new Kn(null);b&&vr(G,b),y&&(G.g=y),B&&ws(G,B),v&&(G.h=v),b=G}return v=h.G,y=h.wa,v&&y&&Ze(b,v,y),Ze(b,"VER",h.ka),Ls(h,b),b}function qa(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new Rs({ab:v})):new nt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}s=Pc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Fa(){}Fa.prototype.g=function(h,y){return new an(h,y)};function an(h,y){Ct.call(this),this.g=new Ua(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new wr(this)}T(an,Ct),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ms(this.g)},an.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Cn(h),h=v);y.i.push(new _d(y.Ya++,h)),y.I==3&&ks(y)},an.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,an.Z.N.call(this)};function Sl(h){hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Sl,hr);function kc(){Hn.call(this),this.status=1}T(kc,Hn);function wr(h){this.g=h}T(wr,Pc),wr.prototype.ra=function(){Pt(this.g,"a")},wr.prototype.qa=function(h){Pt(this.g,new Sl(h))},wr.prototype.pa=function(h){Pt(this.g,new kc)},wr.prototype.oa=function(){Pt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,kA=function(){return new Fa},PA=function(){return Da()},MA=Dn,zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,$h=_t,Ft.COMPLETE="complete",OA=Ft,Ec.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Tu=Ec,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,VA=nt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const cT="@firebase/firestore",hT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new bg("@firebase/firestore");function So(){return ma.logLevel}function ie(s,...e){if(ma.logLevel<=ke.DEBUG){const t=e.map(Ig);ma.debug(`Firestore (${tl}): ${s}`,...t)}}function ln(s,...e){if(ma.logLevel<=ke.ERROR){const t=e.map(Ig);ma.error(`Firestore (${tl}): ${s}`,...t)}}function pa(s,...e){if(ma.logLevel<=ke.WARN){const t=e.map(Ig);ma.warn(`Firestore (${tl}): ${s}`,...t)}}function Ig(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,LA(s,i,t)}function LA(s,e,t){let i=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ln(i),new Error(i)}function me(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||LA(e,a,i)}function Re(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class hD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fD{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new er;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new er,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new er)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string",31837,{l:i}),new UA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class dD{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mD{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new dD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);const i=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=gD(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ie(s,e){return s<e?-1:s>e?1:0}function qp(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),l=e.charAt(i);if(a!==l)return Sp(a)===Sp(l)?Ie(a,l):Sp(a)?1:-1}return Ie(s.length,e.length)}const yD=55296,_D=57343;function Sp(s){const e=s.charCodeAt(0);return e>=yD&&e<=_D}function Lo(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}function BA(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="__name__";class gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&de(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=gi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const i=gi.isNumericId(e),a=gi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?gi.extractNumericId(e).compare(gi.extractNumericId(t)):qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class je extends gi{construct(e,t,i){return new je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new je(t)}static emptyPath(){return new je([])}}const vD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends gi{construct(e,t,i){return new ht(e,t,i)}static isValidIdentifier(e){return vD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dT}static keyField(){return new ht([dT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(je.fromString(e))}static fromName(e){return new le(je.fromString(e).popFirst(5))}static empty(){return new le(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(s,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ED(s,e,t,i){if(e===!0&&i===!0)throw new ae(Q.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function mT(s){if(!le.isDocumentKey(s))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function pT(s){if(le.isDocumentKey(s))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function qA(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ff(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":de(12329,{type:typeof s})}function us(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ff(s);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(s,e){const t={typeString:s};return e&&(t.value=e),t}function sc(s,e){if(!qA(s))throw new ae(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const c=s[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=-62135596800,yT=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*yT);return new Qe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gT)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yT}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:It("string",Qe._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Qe(0,0))}static max(){return new Ee(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;class gf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Fp(s){return s.fields.find((e=>e.kind===2))}function ta(s){return s.fields.filter((e=>e.kind!==2))}gf.UNKNOWN_ID=-1;class Zh{constructor(e,t){this.fieldPath=e,this.kind=t}}class qu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qu(0,Rn.min())}}function TD(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new Qe(t+1,0):new Qe(t,i));return new Rn(a,le.empty(),e)}function FA(s){return new Rn(s.readTime,s.key,zu)}class Rn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Rn(Ee.min(),le.empty(),zu)}static max(){return new Rn(Ee.max(),le.empty(),zu)}}function Cg(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==jA)throw s;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,i)=>{t(e)}))}static reject(e){return new L(((t,i)=>{i(e)}))}static waitFor(e){return new L(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=L.resolve(!1);for(const i of e)t=t.next((a=>a?L.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new L(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new L(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="SimpleDb";class jf{static open(e,t,i,a){try{return new jf(t,e.transaction(a,i))}catch(l){throw new Ru(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new er,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ru(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Dg(i.target.error);this.S.reject(new Ru(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ie(wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bD(t)}}class os{static delete(e){return ie(wn,"Removing database:",e),ia(pA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!SA())return!1;if(os.F())return!0;const e=Ot(),t=os.M(e),i=0<t&&t<10,a=GA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,os.M(Ot())===12.2&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ie(wn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Ru(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ae(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ae(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Ru(e,c))},a.onupgradeneeded=l=>{ie(wn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ie(wn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=jf.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),L.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(ie(wn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function GA(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class AD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ia(this.U.delete())}}class Ru extends ae{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ms(s){return s.name==="IndexedDbTransactionError"}class bD{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ie(wn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ie(wn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ia(i)}add(e){return ie(wn,"ADD",this.store.name,e,e),ia(this.store.add(e))}get(e){return ia(this.store.get(e)).next((t=>(t===void 0&&(t=null),ie(wn,"GET",this.store.name,e,t),t)))}delete(e){return ie(wn,"DELETE",this.store.name,e),ia(this.store.delete(e))}count(){return ie(wn,"COUNT",this.store.name),ia(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,p)=>{c.push(p)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new L(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ie(wn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new L(((i,a)=>{t.onerror=l=>{const c=Dg(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new L(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new AD(d),g=t(d.primaryKey,d.value,p);if(g instanceof L){const _=g.catch((T=>(p.done(),L.reject(T))));i.push(_)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>L.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ia(s){return new L(((e,t)=>{s.onsuccess=i=>{const a=i.target.result;e(a)},s.onerror=i=>{const a=Dg(i.target.error);t(a)}}))}let _T=!1;function Dg(s){const e=os.M(Ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const i=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _T||(_T=!0,setTimeout((()=>{throw i}),0)),i}}return s}const Cu="IndexBackfiller";class SD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ie(Cu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ie(Cu,`Documents written: ${t}`)}catch(t){ms(t)?ie(Cu,"Ignoring IndexedDB error during index backfill: ",t):await Sa(t)}await this.re(6e4)}))}}class wD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return L.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ie(Cu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(ie(Cu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=FA(l);Cg(c,i)>0&&(i=c)})),new Rn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=-1;function Hf(s){return s==null}function Fu(s){return s===0&&1/s==-1/0}function ID(s){return typeof s=="number"&&Number.isInteger(s)&&!Fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="";function tn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=vT(e)),e=RD(s.get(t),e);return vT(e)}function RD(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case yf:t+="";break;default:t+=l}}return t}function vT(s){return s+yf+""}function vi(s){const e=s.length;if(me(e>=2,64408,{path:s}),e===2)return me(s.charAt(0)===yf&&s.charAt(1)==="",56145,{path:s}),je.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=s.indexOf(yf,l);switch((c<0||c>t)&&de(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:de(61167,{path:s})}l=c+2}return new je(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="remoteDocuments",ac="owner",_o="owner",ju="mutationQueues",CD="userId",ei="mutations",ET="batchId",oa="userMutationsIndex",TT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(s,e){return[s,tn(e)]}function KA(s,e,t){return[s,tn(e),t]}const DD={},Uo="documentMutations",_f="remoteDocumentsV14",ND=["prefixPath","collectionGroup","readTime","documentId"],Wh="documentKeyIndex",xD=["prefixPath","collectionGroup","documentId"],QA="collectionGroupIndex",VD=["collectionGroup","readTime","prefixPath","documentId"],Hu="remoteDocumentGlobal",jp="remoteDocumentGlobalKey",Bo="targets",YA="queryTargetsIndex",OD=["canonicalId","targetId"],zo="targetDocuments",MD=["targetId","path"],Ng="documentTargetsIndex",PD=["path","targetId"],vf="targetGlobalKey",ua="targetGlobal",Gu="collectionParents",kD=["collectionId","parent"],qo="clientMetadata",LD="clientId",Gf="bundles",UD="bundleId",Kf="namedQueries",BD="name",xg="indexConfiguration",zD="indexId",Hp="collectionGroupIndex",qD="collectionGroup",Du="indexState",FD=["indexId","uid"],XA="sequenceNumberIndex",jD=["uid","sequenceNumber"],Nu="indexEntries",HD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$A="documentKeyIndex",GD=["indexId","uid","orderedDocumentKey"],Qf="documentOverlays",KD=["userId","collectionPath","documentId"],Gp="collectionPathOverlayIndex",QD=["userId","collectionPath","largestBatchId"],ZA="collectionGroupOverlayIndex",YD=["userId","collectionGroup","largestBatchId"],Vg="globals",XD="name",JA=[ju,ei,Uo,na,Bo,ac,ua,zo,qo,Hu,Gu,Gf,Kf],$D=[...JA,Qf],WA=[ju,ei,Uo,_f,Bo,ac,ua,zo,qo,Hu,Gu,Gf,Kf,Qf],eb=WA,Og=[...eb,xg,Du,Nu],ZD=Og,tb=[...Og,Vg],JD=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends HA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Mt(s,e){const t=Re(s);return os.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ps(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function nb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=a??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Qt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bT(this.data.getIterator())}getIteratorFrom(e){return new bT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class bT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Xe(ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ib("Invalid base64 string: "+l):l}})(e);return new Rt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const WD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(s){if(me(!!s,39018),typeof s=="string"){let e=0;const t=WD.exec(s);if(me(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(s.seconds),nanos:ot(s.nanos)}}function ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function rr(s){return typeof s=="string"?Rt.fromBase64String(s):Rt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="server_timestamp",sb="__type__",ab="__previous_value__",ob="__local_write_time__";function Mg(s){return(s?.mapValue?.fields||{})[sb]?.stringValue===rb}function Yf(s){const e=s.mapValue.fields[ab];return Mg(e)?Yf(e):e}function Ku(s){const e=ir(s.mapValue.fields[ob].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Ef="(default)";class ga{constructor(e,t){this.projectId=e,this.database=t||Ef}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="__type__",lb="__max__",ns={mapValue:{fields:{__type__:{stringValue:lb}}}},kg="__vector__",Fo="value",ef={nullValue:"NULL_VALUE"};function cs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Mg(s)?4:ub(s)?9007199254740991:Xf(s)?10:11:de(28295,{value:s})}function Ii(s,e){if(s===e)return!0;const t=cs(s);if(t!==cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ku(s).isEqual(Ku(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ir(a.timestampValue),d=ir(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return rr(a.bytesValue).isEqual(rr(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return ot(a.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ot(a.integerValue)===ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ot(a.doubleValue),d=ot(l.doubleValue);return c===d?Fu(c)===Fu(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Lo(s.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(AT(c)!==AT(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ii(c[p],d[p])))return!1;return!0})(s,e);default:return de(52216,{left:s})}}function Qu(s,e){return(s.values||[]).find((t=>Ii(t,e)))!==void 0}function hs(s,e){if(s===e)return 0;const t=cs(s),i=cs(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ot(l.integerValue||l.doubleValue),p=ot(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return ST(s.timestampValue,e.timestampValue);case 4:return ST(Ku(s),Ku(e));case 5:return qp(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=rr(l),p=rr(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=Ie(d[g],p[g]);if(_!==0)return _}return Ie(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ie(ot(l.latitude),ot(c.latitude));return d!==0?d:Ie(ot(l.longitude),ot(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wT(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Fo]?.arrayValue,_=p[Fo]?.arrayValue,T=Ie(g?.values?.length||0,_?.values?.length||0);return T!==0?T:wT(g,_)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ns.mapValue&&c===ns.mapValue)return 0;if(l===ns.mapValue)return 1;if(c===ns.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const S=qp(p[T],_[T]);if(S!==0)return S;const O=hs(d[p[T]],g[_[T]]);if(O!==0)return O}return Ie(p.length,_.length)})(s.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function ST(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=ir(s),i=ir(e),a=Ie(t.seconds,i.seconds);return a!==0?a:Ie(t.nanos,i.nanos)}function wT(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=hs(t[a],i[a]);if(l)return l}return Ie(t.length,i.length)}function jo(s){return Qp(s)}function Qp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=ir(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return rr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return le.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Qp(l);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Qp(t.fields[c])}`;return a+"}"})(s.mapValue):de(61005,{value:s})}function tf(s){switch(cs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(s);return e?16+tf(e):16;case 5:return 2*s.stringValue.length;case 6:return rr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+tf(l)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return ps(i.fields,((l,c)=>{a+=l.length+tf(c)})),a})(s.mapValue);default:throw de(13486,{value:s})}}function Yu(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Yp(s){return!!s&&"integerValue"in s}function Xu(s){return!!s&&"arrayValue"in s}function IT(s){return!!s&&"nullValue"in s}function RT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nf(s){return!!s&&"mapValue"in s}function Xf(s){return(s?.mapValue?.fields||{})[Pg]?.stringValue===kg}function xu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ps(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=xu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xu(s.arrayValue.values[t]);return e}return{...s}}function ub(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===lb}const cb={mapValue:{fields:{[Pg]:{stringValue:kg},[Fo]:{arrayValue:{}}}}};function t2(s){return"nullValue"in s?ef:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Yu(ga.empty(),le.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Xf(s)?cb:{mapValue:{}}:de(35942,{value:s})}function n2(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Yu(ga.empty(),le.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?cb:"mapValue"in s?Xf(s)?{mapValue:{}}:ns:de(61959,{value:s})}function CT(s,e){const t=hs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function DT(s,e){const t=hs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(t)}setAll(e){let t=ht.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=xu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];nf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ps(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new en(xu(this.value))}}function hb(s){const e=[];return ps(s.fields,((t,i)=>{const a=new ht([t]);if(nf(i)){const l=hb(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new gt(e,0,Ee.min(),Ee.min(),Ee.min(),en.empty(),0)}static newFoundDocument(e,t,i,a){return new gt(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new gt(e,2,t,Ee.min(),Ee.min(),en.empty(),0)}static newUnknownDocument(e,t){return new gt(e,3,t,Ee.min(),Ee.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){this.position=e,this.inclusive=t}}function NT(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?i=le.comparator(le.fromName(c.referenceValue),t.key):i=hs(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function xT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ii(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t="asc"){this.field=e,this.dir=t}}function i2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{}class Le extends fb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new r2(e,t,i):t==="array-contains"?new o2(e,i):t==="in"?new _b(e,i):t==="not-in"?new l2(e,i):t==="array-contains-any"?new u2(e,i):new Le(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new s2(e,i):new a2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(hs(t,this.value)):t!==null&&cs(this.value)===cs(t)&&this.matchesComparison(hs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends fb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return Go(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Go(s){return s.op==="and"}function Xp(s){return s.op==="or"}function Lg(s){return db(s)&&Go(s)}function db(s){for(const e of s.filters)if(e instanceof Ye)return!1;return!0}function $p(s){if(s instanceof Le)return s.field.canonicalString()+s.op.toString()+jo(s.value);if(Lg(s))return s.filters.map((e=>$p(e))).join(",");{const e=s.filters.map((t=>$p(t))).join(",");return`${s.op}(${e})`}}function mb(s,e){return s instanceof Le?(function(i,a){return a instanceof Le&&i.op===a.op&&i.field.isEqual(a.field)&&Ii(i.value,a.value)})(s,e):s instanceof Ye?(function(i,a){return a instanceof Ye&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&mb(c,a.filters[d])),!0):!1})(s,e):void de(19439)}function pb(s,e){const t=s.filters.concat(e);return Ye.create(t,s.op)}function gb(s){return s instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(s):s instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map(gb).join(" ,")+"}"})(s):"Filter"}class r2 extends Le{constructor(e,t,i){super(e,t,i),this.key=le.fromName(i.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class s2 extends Le{constructor(e,t){super(e,"in",t),this.keys=yb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class a2 extends Le{constructor(e,t){super(e,"not-in",t),this.keys=yb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yb(s,e){return(e.arrayValue?.values||[]).map((t=>le.fromName(t.referenceValue)))}class o2 extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xu(t)&&Qu(t.arrayValue,this.value)}}class _b extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}}class l2 extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qu(this.value.arrayValue,t)}}class u2 extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Qu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Zp(s,e=null,t=[],i=[],a=null,l=null,c=null){return new c2(s,e,t,i,a,l,c)}function ya(s){const e=Re(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$p(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function oc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!i2(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!mb(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!xT(s.startAt,e.startAt)&&xT(s.endAt,e.endAt)}function Af(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function bf(s,e){return s.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function VT(s,e,t){let i=ef,a=!0;for(const l of bf(s,e)){let c=ef,d=!0;switch(l.op){case"<":case"<=":c=t2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=ef}CT({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];CT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function OT(s,e,t){let i=ns,a=!0;for(const l of bf(s,e)){let c=ns,d=!0;switch(l.op){case">=":case">":c=n2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ns}DT({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];DT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h2(s,e,t,i,a,l,c,d){return new lc(s,e,t,i,a,l,c,d)}function Ug(s){return new lc(s)}function MT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function vb(s){return s.collectionGroup!==null}function Vu(s){const e=Re(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(ht.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Tf(l,i))})),t.has(ht.keyField().canonicalString())||e.Ie.push(new Tf(ht.keyField(),i))}return e.Ie}function Fn(s){const e=Re(s);return e.Ee||(e.Ee=f2(e,Vu(s))),e.Ee}function f2(s,e){if(s.limitType==="F")return Zp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Tf(a.field,l)}));const t=s.endAt?new Ho(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ho(s.startAt.position,s.startAt.inclusive):null;return Zp(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Jp(s,e){const t=s.filters.concat([e]);return new lc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Wp(s,e,t){return new lc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function $f(s,e){return oc(Fn(s),Fn(e))&&s.limitType===e.limitType}function Eb(s){return`${ya(Fn(s))}|lt:${s.limitType}`}function wo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>gb(a))).join(", ")}]`),Hf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>jo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>jo(a))).join(",")),`Target(${i})`})(Fn(s))}; limitType=${s.limitType})`}function uc(s,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):le.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(s,e)&&(function(i,a){for(const l of Vu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=NT(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Vu(i),a)||i.endAt&&!(function(c,d,p){const g=NT(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Vu(i),a))})(s,e)}function d2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Tb(s){return(e,t)=>{let i=!1;for(const a of Vu(s)){const l=m2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function m2(s,e,t){const i=s.field.isKeyField()?le.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?hs(p,g):de(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return de(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return nb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new lt(le.comparator);function In(){return p2}const Ab=new lt(le.comparator);function Au(...s){let e=Ab;for(const t of s)e=e.insert(t.key,t);return e}function bb(s){let e=Ab;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ei(){return Ou()}function Sb(){return Ou()}function Ou(){return new lr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const g2=new lt(le.comparator),y2=new Xe(le.comparator);function xe(...s){let e=y2;for(const t of s)e=e.add(t);return e}const _2=new Xe(Ie);function v2(){return _2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function wb(s){return{integerValue:""+s}}function E2(s,e){return ID(e)?wb(e):Bg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function T2(s,e,t){return s instanceof $u?(function(a,l){const c={fields:{[sb]:{stringValue:rb},[ob]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Mg(l)&&(l=Yf(l)),l&&(c.fields[ab]=l),{mapValue:c}})(t,e):s instanceof Ko?Rb(s,e):s instanceof Qo?Cb(s,e):(function(a,l){const c=Ib(a,l),d=PT(c)+PT(a.Ae);return Yp(c)&&Yp(a.Ae)?wb(d):Bg(a.serializer,d)})(s,e)}function A2(s,e,t){return s instanceof Ko?Rb(s,e):s instanceof Qo?Cb(s,e):t}function Ib(s,e){return s instanceof Zu?(function(i){return Yp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class $u extends Zf{}class Ko extends Zf{constructor(e){super(),this.elements=e}}function Rb(s,e){const t=Db(e);for(const i of s.elements)t.some((a=>Ii(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Qo extends Zf{constructor(e){super(),this.elements=e}}function Cb(s,e){let t=Db(e);for(const i of s.elements)t=t.filter((a=>!Ii(a,i)));return{arrayValue:{values:t}}}class Zu extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function PT(s){return ot(s.integerValue||s.doubleValue)}function Db(s){return Xu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.field=e,this.transform=t}}function S2(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Ko&&a instanceof Ko||i instanceof Qo&&a instanceof Qo?Lo(i.elements,a.elements,Ii):i instanceof Zu&&a instanceof Zu?Ii(i.Ae,a.Ae):i instanceof $u&&a instanceof $u})(s.transform,e.transform)}class w2{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Jf{}function Nb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Wf(s.key,un.none()):new nl(s.key,s.data,un.none());{const t=s.data,i=en.empty();let a=new Xe(ht.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ur(s.key,i,new gn(a.toArray()),un.none())}}function I2(s,e,t){s instanceof nl?(function(a,l,c){const d=a.value.clone(),p=LT(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof ur?(function(a,l,c){if(!rf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=LT(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(xb(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Mu(s,e,t,i){return s instanceof nl?(function(l,c,d,p){if(!rf(l.precondition,c))return d;const g=l.value.clone(),_=UT(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,i):s instanceof ur?(function(l,c,d,p){if(!rf(l.precondition,c))return d;const g=UT(l.fieldTransforms,p,c),_=c.data;return _.setAll(xb(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(s,e,t,i):(function(l,c,d){return rf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function R2(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),l=Ib(i.transform,a||null);l!=null&&(t===null&&(t=en.empty()),t.set(i.field,l))}return t||null}function kT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Lo(i,a,((l,c)=>S2(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class nl extends Jf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ur extends Jf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xb(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function LT(s,e,t){const i=new Map;me(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,A2(c,d,t[a]))}return i}function UT(s,e,t){const i=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);i.set(a.field,T2(l,c,e))}return i}class Wf extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vb extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&I2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Mu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Mu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Sb();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Nb(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xe())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,i)=>kT(t,i)))&&Lo(this.baseMutations,e.baseMutations,((t,i)=>kT(t,i)))}}class qg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){me(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return g2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new qg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Be;function D2(s){switch(s){case Q.OK:return de(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return de(15467,{code:s})}}function Ob(s){if(s===void 0)return ln("GRPC error has no .code"),Q.UNKNOWN;switch(s){case wt.OK:return Q.OK;case wt.CANCELLED:return Q.CANCELLED;case wt.UNKNOWN:return Q.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Q.INTERNAL;case wt.UNAVAILABLE:return Q.UNAVAILABLE;case wt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case wt.NOT_FOUND:return Q.NOT_FOUND;case wt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case wt.ABORTED:return Q.ABORTED;case wt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case wt.DATA_LOSS:return Q.DATA_LOSS;default:return de(39323,{code:s})}}(Be=wt||(wt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new as([4294967295,4294967295],0);function BT(s){const e=N2().encode(s),t=new xA;return t.update(e),new Uint8Array(t.digest())}function zT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new as([t,i],0),new as([a,l],0)]}class jg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=as.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(as.fromNumber(i)));return a.compare(x2)===1&&(a=new as([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=BT(e),[i,a]=zT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new jg(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=BT(e),[i,a]=zT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,cc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ed(Ee.min(),a,new lt(Ie),In(),xe())}}class cc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new cc(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Mb{constructor(e,t){this.targetId=e,this.Ce=t}}class Pb{constructor(e,t,i=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class qT{constructor(){this.ve=0,this.Fe=FT(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),t=xe(),i=xe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:de(38017,{changeType:l})}})),new cc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=FT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class V2{constructor(e){this.Ge=e,this.ze=new Map,this.je=In(),this.Je=zh(),this.He=zh(),this.Ye=new lt(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Af(l))if(i===0){const c=new le(l.path);this.et(t,c,gt.newNoDocument(c,Ee.min()))}else me(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=rr(i).toUint8Array()}catch(p){if(p instanceof ib)return pa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new jg(c,a,l)}catch(p){return pa(p instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Af(d.target)){const p=new le(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,gt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=xe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new ed(e,t,this.Ye,this.je,i);return this.je=In(),this.Je=zh(),this.He=zh(),this.Ye=new lt(Ie),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zh(){return new lt(le.comparator)}function FT(){return new lt(le.comparator)}const O2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class k2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(s,e){return s.useProto3Json||Hf(e)?e:{value:e}}function Yo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function L2(s,e){return Yo(s,e.toTimestamp())}function cn(s){return me(!!s,49232),Ee.fromTimestamp((function(t){const i=ir(t);return new Qe(i.seconds,i.nanos)})(s))}function Hg(s,e){return tg(s,e).canonicalString()}function tg(s,e){const t=(function(a){return new je(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Lb(s){const e=je.fromString(s);return me(Kb(e),10190,{key:e.toString()}),e}function Sf(s,e){return Hg(s.databaseId,e.path)}function ca(s,e){const t=Lb(e);if(t.get(1)!==s.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new le(zb(t))}function Ub(s,e){return Hg(s.databaseId,e)}function Bb(s){const e=Lb(s);return e.length===4?je.emptyPath():zb(e)}function ng(s){return new je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zb(s){return me(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function jT(s,e,t){return{name:Sf(s,e),fields:t.value.mapValue.fields}}function U2(s,e,t){const i=ca(s,e.name),a=cn(e.updateTime),l=e.createTime?cn(e.createTime):Ee.min(),c=new en({mapValue:{fields:e.fields}}),d=gt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function B2(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:de(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(me(_===void 0||typeof _=="string",58123),Rt.fromBase64String(_||"")):(me(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Rt.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?Q.UNKNOWN:Ob(g.code);return new ae(_,g.message||"")})(c);t=new Pb(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=ca(s,i.document.name),l=cn(i.document.updateTime),c=i.document.createTime?cn(i.document.createTime):Ee.min(),d=new en({mapValue:{fields:i.document.fields}}),p=gt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new sf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=ca(s,i.document),l=i.readTime?cn(i.readTime):Ee.min(),c=gt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new sf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=ca(s,i.document),l=i.removedTargetIds||[];t=new sf([],l,a,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new C2(a,l),d=i.targetId;t=new Mb(d,c)}}return t}function wf(s,e){let t;if(e instanceof nl)t={update:jT(s,e.key,e.value)};else if(e instanceof Wf)t={delete:Sf(s,e.key)};else if(e instanceof ur)t={update:jT(s,e.key,e.data),updateMask:G2(e.fieldMask)};else{if(!(e instanceof Vb))return de(16599,{Vt:e.type});t={verify:Sf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof $u)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ko)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Qo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zu)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw de(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:L2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:de(27497)})(s,e.precondition)),t}function ig(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?un.updateTime(cn(l.updateTime)):l.exists!==void 0?un.exists(l.exists):un.none()})(e.currentDocument):un.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)me(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new $u;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];p=new Ko(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];p=new Qo(_)}else"increment"in d?p=new Zu(c,d.increment):de(16584,{proto:d});const g=ht.fromServerFormat(d.fieldPath);return new b2(g,p)})(s,a))):[];if(e.update){e.update.name;const a=ca(s,e.update.name),l=new en({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new gn(g.map((_=>ht.fromServerFormat(_))))})(e.updateMask);return new ur(a,l,c,t,i)}return new nl(a,l,t,i)}if(e.delete){const a=ca(s,e.delete);return new Wf(a,t)}if(e.verify){const a=ca(s,e.verify);return new Vb(a,t)}return de(1463,{proto:e})}function z2(s,e){return s&&s.length>0?(me(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?cn(a.updateTime):cn(l);return c.isEqual(Ee.min())&&(c=cn(l)),new w2(c,a.transformResults||[])})(t,e)))):[]}function qb(s,e){return{documents:[Ub(s,e.path)]}}function Fb(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ub(s,a);const l=(function(g){if(g.length!==0)return Gb(Ye.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:Io(S.field),direction:F2(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=eg(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function jb(s){let e=Bb(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){me(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=Hb(T);return S instanceof Ye&&Lg(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(H){return new Tf(Ro(H.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Hf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,O=T.values||[];return new Ho(O,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,O=T.values||[];return new Ho(O,S)})(t.endAt)),h2(e,a,c,l,d,"F",p,g)}function q2(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hb(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ro(t.unaryFilter.field);return Le.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Ro(t.unaryFilter.field);return Le.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ro(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Le.create(Ro(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((i=>Hb(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(s):de(30097,{filter:s})}function F2(s){return O2[s]}function j2(s){return M2[s]}function H2(s){return P2[s]}function Io(s){return{fieldPath:s.canonicalString()}}function Ro(s){return ht.fromServerFormat(s.fieldPath)}function Gb(s){return s instanceof Le?(function(t){if(t.op==="=="){if(RT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NAN"}};if(IT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NAN"}};if(IT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(t.field),op:j2(t.op),value:t.value}}})(s):s instanceof Ye?(function(t){const i=t.getFilters().map((a=>Gb(a)));return i.length===1?i[0]:{compositeFilter:{op:H2(t.op),filters:i}}})(s):de(54877,{filter:s})}function G2(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Kb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),d=Rt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.yt=e}}function K2(s,e){let t;if(e.document)t=U2(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=le.fromSegments(e.noDocument.path),a=va(e.noDocument.readTime);t=gt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de(56709);{const i=le.fromSegments(e.unknownDocument.path),a=va(e.unknownDocument.version);t=gt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Qe(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function HT(s,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:If(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Sf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Yo(l,c.version.toTimestamp()),createTime:Yo(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:_a(e.version)};else{if(!e.isUnknownDocument())return de(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:_a(e.version)}}return i}function If(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function _a(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function va(s){const e=new Qe(s.seconds,s.nanoseconds);return Ee.fromTimestamp(e)}function ra(s,e){const t=(e.baseMutations||[]).map((l=>ig(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>ig(s.yt,l))),a=Qe.fromMillis(e.localWriteTimeMs);return new zg(e.batchId,a,t,i)}function Su(s){const e=va(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?va(s.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return me(c===1,1966,{count:c}),Fn(Ug(Bb(l.documents[0])))})(s.query):(function(l){return Fn(jb(l))})(s.query),new $i(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Rt.fromBase64String(s.resumeToken))}function Yb(s,e){const t=_a(e.snapshotVersion),i=_a(e.lastLimboFreeSnapshotVersion);let a;a=Af(e.target)?qb(s.yt,e.target):Fb(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ya(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function Xb(s){const e=jb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wp(e,e.limit,"L"):e}function wp(s,e){return new Fg(e.largestBatchId,ig(s.yt,e.overlayMutation))}function GT(s,e){const t=e.path.lastSegment();return[s,tn(e.path.popLast()),t]}function KT(s,e,t,i){return{indexId:s,uid:e,sequenceNumber:t,readTime:_a(i.readTime),documentKey:tn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{getBundleMetadata(e,t){return QT(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:va(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return QT(e).put((function(a){return{bundleId:a.id,createTime:_a(cn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return YT(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:Xb(l.bundledQuery),readTime:va(l.readTime)}})(i)}))}saveNamedQuery(e,t){return YT(e).put((function(a){return{name:a.name,readTime:_a(cn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function QT(s){return Mt(s,Gf)}function YT(s){return Mt(s,Kf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new td(e,i)}getOverlay(e,t){return gu(e).get(GT(this.userId,t)).next((i=>i?wp(this.serializer,i):null))}getOverlays(e,t){const i=Ei();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new Fg(t,c);a.push(this.St(e,d))})),L.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(tn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(gu(e).Z(Gp,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Ei(),l=tn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return gu(e).J(Gp,c).next((d=>{for(const p of d){const g=wp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Ei();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gu(e).ee({index:ZA,range:d},((p,g,_)=>{const T=wp(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return gu(e).put((function(a,l,c){const[d,p,g]=GT(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function gu(s){return Mt(s,Qf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{bt(e){return Mt(e,Vg)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Rt.fromUint8Array(i):Rt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ot(e.integerValue));else if("doubleValue"in e){const i=ot(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Fu(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ir(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(rr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?ub(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Fo,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ot(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}sa.Kt=new sa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=255;function X2(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function XT(s){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=X2(255&i[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class $2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=XT(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=XT(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Eo),this.sn(255)}_n(){this.an(Eo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Eo?(this.sn(Eo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Eo?(this.an(Eo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Z2{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class J2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yu{constructor(){this.cn=new $2,this.ln=new Z2(this.cn),this.hn=new J2(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new aa(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:af(this.En),directionalValue:af(this.dn),orderedDocumentKey:af(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Qr(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=$T(s.En,e.En),t!==0?t:(t=$T(s.dn,e.dn),t!==0?t:le.comparator(s.In,e.In)))}function $T(s,e){for(let t=0;t<s.length&&t<e.length;++t){const i=s[t]-e[t];if(i!==0)return i}return s.length-e.length}function af(s){return bA()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(s):s}function ZT(s){return typeof s!="string"?s:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(s)}class JT{constructor(e){this.mn=new Xe(((t,i)=>ht.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Fp(e);if(t!==void 0&&!this.wn(t))return!1;const i=ta(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.Sn(d,p)||!this.bn(this.fn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xe(ht.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Zh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Zh(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Zh(i.field,i.dir==="asc"?0:1)));return new gf(gf.UNKNOWN_ID,this.collectionId,t,qu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(s){if(me(s instanceof Le||s instanceof Ye,20012),s instanceof Le){if(s instanceof _b){const t=s.value.arrayValue?.values?.map((i=>Le.create(s.field,"==",i)))||[];return Ye.create(t,"or")}return s}const e=s.filters.map((t=>$b(t)));return Ye.create(e,s.op)}function W2(s){if(s.getFilters().length===0)return[];const e=ag($b(s));return me(Zb(e),7391),rg(e)||sg(e)?[e]:e.getFilters()}function rg(s){return s instanceof Le}function sg(s){return s instanceof Ye&&Lg(s)}function Zb(s){return rg(s)||sg(s)||(function(t){if(t instanceof Ye&&Xp(t)){for(const i of t.getFilters())if(!rg(i)&&!sg(i))return!1;return!0}return!1})(s)}function ag(s){if(me(s instanceof Le||s instanceof Ye,34018),s instanceof Le)return s;if(s.filters.length===1)return ag(s.filters[0]);const e=s.filters.map((i=>ag(i)));let t=Ye.create(e,s.op);return t=Rf(t),Zb(t)?t:(me(t instanceof Ye,64498),me(Go(t),40251),me(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Gg(i,a))))}function Gg(s,e){let t;return me(s instanceof Le||s instanceof Ye,38388),me(e instanceof Le||e instanceof Ye,25473),t=s instanceof Le?e instanceof Le?(function(a,l){return Ye.create([a,l],"and")})(s,e):WT(s,e):e instanceof Le?WT(e,s):(function(a,l){if(me(a.filters.length>0&&l.filters.length>0,48005),Go(a)&&Go(l))return pb(a,l.getFilters());const c=Xp(a)?a:l,d=Xp(a)?l:a,p=c.filters.map((g=>Gg(g,d)));return Ye.create(p,"or")})(s,e),Rf(t)}function WT(s,e){if(Go(e))return pb(e,s.getFilters());{const t=e.filters.map((i=>Gg(s,i)));return Ye.create(t,"or")}}function Rf(s){if(me(s instanceof Le||s instanceof Ye,11850),s instanceof Le)return s;const e=s.getFilters();if(e.length===1)return Rf(e[0]);if(db(s))return s;const t=e.map((a=>Rf(a))),i=[];return t.forEach((a=>{a instanceof Le?i.push(a):a instanceof Ye&&(a.op===s.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ye.create(i,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Cn=new Kg}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Rn.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Kg{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Xe(je.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Xe(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="IndexedDbIndexManager",qh=new Uint8Array(0);class tN{constructor(e,t){this.databaseId=t,this.vn=new Kg,this.Fn=new lr((i=>ya(i)),((i,a)=>oc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:tn(a)};return t0(e).put(l)}return L.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[BA(t),""],!1,!0);return t0(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(vi(c.parent))}return i}))}addFieldIndex(e,t){const i=_u(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Ao(e);return l.next((d=>{c.put(KT(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=_u(e),a=Ao(e),l=To(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=_u(e),i=To(e),a=Ao(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new JT(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=To(e);let a=!0;const l=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=xe();const d=[];return L.forEach(l,((p,g)=>{ie(e0,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((ge=>`${ge.fieldPath}:${ge.kind}`)).join(",")}`})(p)} to execute ${ya(t)}`);const _=(function(ne,ge){const oe=Fp(ge);if(oe===void 0)return null;for(const re of bf(ne,oe.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(g,p),T=(function(ne,ge){const oe=new Map;for(const re of ta(ge))for(const D of bf(ne,re.fieldPath))switch(D.op){case"==":case"in":oe.set(re.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return oe.set(re.fieldPath.canonicalString(),D.value),Array.from(oe.values())}return null})(g,p),S=(function(ne,ge){const oe=[];let re=!0;for(const D of ta(ge)){const w=D.kind===0?VT(ne,D.fieldPath,ne.startAt):OT(ne,D.fieldPath,ne.startAt);oe.push(w.value),re&&(re=w.inclusive)}return new Ho(oe,re)})(g,p),O=(function(ne,ge){const oe=[];let re=!0;for(const D of ta(ge)){const w=D.kind===0?OT(ne,D.fieldPath,ne.endAt):VT(ne,D.fieldPath,ne.endAt);oe.push(w.value),re&&(re=w.inclusive)}return new Ho(oe,re)})(g,p),H=this.On(p,g,S),K=this.On(p,g,O),q=this.Nn(p,g,T),te=this.Bn(p.indexId,_,H,S.inclusive,K,O.inclusive,q);return L.forEach(te,(W=>i.Y(W,t.limit).next((ne=>{ne.forEach((ge=>{const oe=le.fromSegments(ge.documentKey);c.has(oe)||(c=c.add(oe),d.push(oe))}))}))))})).next((()=>d))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=W2(Ye.create(e.filters,"and")).map((i=>Zp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),_=[];for(let T=0;T<p;++T){const S=t?this.Ln(t[T/g]):qh,O=this.kn(e,S,i[T%g],a),H=this.qn(e,S,l[T%g],c),K=d.map((q=>this.kn(e,S,q,!0)));_.push(...this.createRange(O,H,K))}return _}kn(e,t,i,a){const l=new aa(e,le.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new aa(e,le.empty(),t,i);return a?l.An():l}xn(e,t){const i=new JT(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return L.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new Xe(ht.comparator),_=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?_=!0:g=g.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new yu;for(const a of ta(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);sa.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new yu;return sa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new yu;return sa.Kt.Dt(Yu(this.databaseId,t),i.Pn((function(l){const c=ta(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new yu);let l=0;for(const c of ta(e)){const d=i[l++];for(const p of a)if(this.Un(t,c.fieldPath)&&Xu(d))a=this.Kn(a,c,d);else{const g=p.Pn(c.kind);sa.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new yu;p.seed(d.un()),sa.Kt.Dt(c,p.Pn(t.kind)),l.push(p)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Le&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=_u(e),a=Ao(e);return(t?i.J(Hp,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return L.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(_,T){const S=T?new qu(T.sequenceNumber,new Rn(va(T.readTime),new le(vi(T.documentKey)),T.largestBatchId)):qu.empty(),O=_.fields.map((([H,K])=>new Zh(ht.fromServerFormat(H),K)));return new gf(_.indexId,_.collectionGroup,O,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=_u(e),l=Ao(e);return this.Gn(e).next((c=>a.J(Hp,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(KT(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return L.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),L.forEach(d,(p=>this.zn(e,a,p).next((g=>{const _=this.jn(l,p);return g.isEqual(_)?L.resolve():this.Jn(e,l,p,g,_)})))))))}))}Hn(e,t,i,a){return To(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return To(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=To(e);let l=new Xe(Qr);return a.ee({index:$A,range:IDBKeyRange.only([i.indexId,this.uid,af(this.$n(i,t))])},((c,d)=>{l=l.add(new aa(i.indexId,t,ZT(d.arrayValue),ZT(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new Xe(Qr);const a=this.Qn(t,e);if(a==null)return i;const l=Fp(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Xu(c))for(const d of c.arrayValue.values||[])i=i.add(new aa(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new aa(t.indexId,e.key,qh,a));return i}Jn(e,t,i,a,l){ie(e0,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,_,T,S){const O=p.getIterator(),H=g.getIterator();let K=vo(O),q=vo(H);for(;K||q;){let te=!1,W=!1;if(K&&q){const ne=_(K,q);ne<0?W=!0:ne>0&&(te=!0)}else K!=null?W=!0:te=!0;te?(T(q),q=vo(H)):W?(S(K),K=vo(O)):(K=vo(O),q=vo(H))}})(a,l,Qr,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),L.waitFor(c)}Gn(e){let t=1;return Ao(e).ee({index:XA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>Qr(c,d))).filter(((c,d,p)=>!d||Qr(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=Qr(c,e),p=Qr(c,t);if(d===0)a[0]=e.An();else if(d>0&&p<0)a.push(c),a.push(c.An());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,qh,le.empty()),p=a[c+1].Vn(this.uid,qh,le.empty());l.push(IDBKeyRange.bound(d,p))}return l}Zn(e,t){return Qr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(n0)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||de(44426))))).next(n0)}}function t0(s){return Mt(s,Gu)}function To(s){return Mt(s,Nu)}function _u(s){return Mt(s,xg)}function Ao(s){return Mt(s,Du)}function n0(s){me(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;Cg(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Rn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jb=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(s,e,t){const i=s.store(ei),a=s.store(Uo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((_,T,S)=>(d++,S.delete())));l.push(p.next((()=>{me(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const T=KA(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return L.waitFor(l).next((()=>g))}function Cf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw de(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(Jb,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class nd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){me(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new nd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yr(e).ee({index:oa,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Co(e),c=Yr(e);return c.add({}).next((d=>{me(typeof d=="number",49019);const p=new zg(d,t,i,a),g=(function(O,H,K){const q=K.baseMutations.map((W=>wf(O.yt,W))),te=K.mutations.map((W=>wf(O.yt,W)));return{userId:H,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:q,mutations:te}})(this.serializer,this.userId,p),_=[];let T=new Xe(((S,O)=>Ie(S.canonicalString(),O.canonicalString())));for(const S of a){const O=KA(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),_.push(c.put(g)),_.push(l.put(O,DD))}return T.forEach((S=>{_.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[d]=p.keys()})),L.waitFor(_).next((()=>p))}))}lookupMutationBatch(e,t){return Yr(e).get(t).next((i=>i?(me(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ra(this.serializer,i)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Yr(e).ee({index:oa,range:a},((c,d,p)=>{d.userId===this.userId&&(me(d.batchId>=i,47524,{tr:i}),l=ra(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=la;return Yr(e).ee({index:oa,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,la],[this.userId,Number.POSITIVE_INFINITY]);return Yr(e).J(oa,t).next((i=>i.map((a=>ra(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Jh(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Co(e).ee({range:a},((c,d,p)=>{const[g,_,T]=c,S=vi(_);if(g===this.userId&&t.path.isEqual(S))return Yr(e).get(T).next((O=>{if(!O)throw de(61480,{nr:c,batchId:T});me(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),l.push(ra(this.serializer,O))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(Ie);const a=[];return t.forEach((l=>{const c=Jh(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Co(e).ee({range:d},((g,_,T)=>{const[S,O,H]=g,K=vi(O);S===this.userId&&l.path.isEqual(K)?i=i.add(H):T.done()}));a.push(p)})),L.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Jh(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new Xe(Ie);return Co(e).ee({range:c},((p,g,_)=>{const[T,S,O]=p,H=vi(S);T===this.userId&&i.isPrefixOf(H)?H.length===a&&(d=d.add(O)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Yr(e).get(l).next((c=>{if(c===null)throw de(35274,{batchId:l});me(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(ra(this.serializer,c))})))})),L.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return Wb(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Co(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=vi(l[1]);a.push(p)}else d.done()})).next((()=>{me(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return eS(e,this.userId,t)}_r(e){return tS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:la,lastStreamToken:""}))}}function eS(s,e,t){const i=Jh(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Co(s).ee({range:l,X:!0},((d,p,g)=>{const[_,T,S]=d;_===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function Yr(s){return Mt(s,ei)}function Co(s){return Mt(s,Uo)}function tS(s){return Mt(s,ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ea(0)}static cr(){return new Ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Ea(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(me(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return bo(e).ee(((c,d)=>{const p=Su(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>a))}forEachTarget(e,t){return bo(e).ee(((i,a)=>{const l=Su(a);t(l)}))}lr(e){return r0(e).get(vf).next((t=>(me(t!==null,2888),t)))}hr(e,t){return r0(e).put(vf,t)}Pr(e,t){return bo(e).put(Yb(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ya(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return bo(e).ee({range:a,index:YA},((c,d,p)=>{const g=Su(d);oc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Zr(e);return t.forEach((c=>{const d=tn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),L.waitFor(a)}removeMatchingKeys(e,t,i){const a=Zr(e);return L.forEach(t,(l=>{const c=tn(l.path);return L.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Zr(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zr(e);let l=xe();return a.ee({range:i,X:!0},((c,d,p)=>{const g=vi(c[1]),_=new le(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=tn(t.path),a=IDBKeyRange.bound([i],[BA(i)],!1,!0);let l=0;return Zr(e).ee({index:Ng,X:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return bo(e).get(t).next((i=>i?Su(i):null))}}function bo(s){return Mt(s,Bo)}function r0(s){return Mt(s,ua)}function Zr(s){return Mt(s,zo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LruGarbageCollector",iN=1048576;function a0([s,e],[t,i]){const a=Ie(s,t);return a===0?Ie(e,i):a}class rN{constructor(e){this.Ir=e,this.buffer=new Xe(a0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();a0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(s0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ms(t)?ie(s0,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Vr(3e5)}))}}class sN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(qn.ce);const i=new rN(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(i0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),So()<=ke.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function iS(s,e){return new sN(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.db=e,this.garbageCollector=iS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return Fh(e,i)}removeReference(e,t,i){return Fh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Fh(e,t)}br(e,t){return(function(a,l){let c=!1;return tS(a).te((d=>eS(a,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const p=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ee.min()),Zr(e).delete((function(T){return[0,tn(T.path)]})(c)))))}));a.push(p)}})).next((()=>L.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Fh(e,t)}Sr(e,t){const i=Zr(e);let a,l=qn.ce;return i.ee({index:Ng},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==qn.ce&&t(new le(vi(a)),l),l=g,a=p):l=qn.ce})).next((()=>{l!==qn.ce&&t(new le(vi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fh(s,e){return Zr(s).put((function(i,a){return{targetId:0,path:tn(i.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.changes=new lr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ws(e).put(i)}removeEntry(e,t,i){return Ws(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],If(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=gt.newInvalidDocument(t);return Ws(e).ee({index:Wh,range:IDBKeyRange.only(vu(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:gt.newInvalidDocument(t)};return Ws(e).ee({index:Wh,range:IDBKeyRange.only(vu(t))},((a,l)=>{i={document:this.Cr(t,l),size:Cf(l)}})).next((()=>i))}getEntries(e,t){let i=In();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=In(),a=new lt(le.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,Cf(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return L.resolve();let a=new Xe(u0);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(vu(a.first()),vu(a.last())),c=a.getIterator();let d=c.getNext();return Ws(e).ee({index:Wh,range:l},((p,g,_)=>{const T=le.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&u0(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j(vu(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),If(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ws(e).J(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let _=In();for(const T of g){const S=this.Cr(le.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(uc(t,S)||a.has(S.key))&&(_=_.insert(S.key,S))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=In();const c=l0(t,i),d=l0(t,Rn.max());return Ws(e).ee({index:QA,range:IDBKeyRange.bound(c,d,!0)},((p,g,_)=>{const T=this.Cr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new lN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return o0(e).get(jp).next((t=>(me(!!t,20021),t)))}Dr(e,t){return o0(e).put(jp,t)}Cr(e,t){if(t){const i=K2(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return gt.newInvalidDocument(e)}}function sS(s){return new oN(s)}class lN extends rS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new lr((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new Xe(((l,c)=>Ie(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=HT(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=Cf(p);i+=g-d.size,t.push(this.Nr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=HT(this.Nr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function o0(s){return Mt(s,Hu)}function Ws(s){return Mt(s,_f)}function vu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l0(s,e){const t=e.documentKey.path.toArray();return[s,If(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function u0(s,e){const t=s.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ie(t[l],i[l]),a)return a;return a=Ie(t.length,i.length),a||(a=Ie(t[t.length-2],i[i.length-2]),a||Ie(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Mu(i.mutation,a,gn.empty(),Qe.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,xe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=xe()){const a=Ei();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Au();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ei();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,xe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=In();const c=Ou(),d=(function(){return Ou()})();return t.forEach(((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof ur)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Mu(_.mutation,g,_.mutation.getFieldMask(),Qe.now())):c.set(g.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new uN(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Ou();let a=new lt(((c,d)=>c-d)),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||gn.empty();_=d.applyToLocalView(g,_),i.set(p,_);const T=(a.get(d.batchId)||xe()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,T=Sb();_.forEach((S=>{if(!l.has(S)){const O=Nb(t.get(S),i.get(S));O!==null&&T.set(S,O),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return L.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):L.resolve(Ei());let d=zu,p=l;return c.next((g=>L.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?L.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,xe()))).next((_=>({batchId:d,changes:bb(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((i=>{let a=Au();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Au();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const g=(function(T,S){return new lc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,gt.newInvalidDocument(_)))}));let d=Au();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Mu(_.mutation,g,gn.empty(),Qe.now()),uc(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:cn(a.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:Xb(a.bundledQuery),readTime:cn(a.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.overlays=new lt(le.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ei();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){const a=Ei(),l=t.length+1,c=new le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return L.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new lt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Ei(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ei(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return L.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Fg(t,i));let l=this.qr.get(t);l===void 0&&(l=xe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Qr=new Xe(zt.$r),this.Ur=new Xe(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new zt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new le(new je([])),i=new zt(t,e),a=new zt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new le(new je([])),i=new zt(t,e),a=new zt(t,e+1);let l=xe();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new zt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(zt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zg(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?la:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),a=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(Ie);return t.forEach((a=>{const l=new zt(a,0),c=new zt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),L.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;le.isDocumentKey(l)||(l=l.child(""));const c=new zt(new le(l),0);let d=new Xe(Ie);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),L.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return L.forEach(t.mutations,(a=>{const l=new zt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new zt(t,0),a=this.Zr.firstAfterOrEqual(i);return L.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.ri=e,this.docs=(function(){return new lt(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let i=In();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():gt.newInvalidDocument(a))})),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=In();const c=t.path,d=new le(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Cg(FA(_),i)<=0||(a.has(_.key)||uc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,i,a){de(9500)}ii(e,t){return L.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pN(this)}getSize(e){return L.resolve(this.size)}}class pN extends rS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.persistence=e,this.si=new lr((t=>ya(t)),oc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Qg,this.targetCount=0,this.ai=Ea.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ea(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),L.waitFor(l).next((()=>a))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t){this.ui={},this.overlays={},this.ci=new qn(0),this.li=!1,this.li=!0,this.hi=new fN,this.referenceDelegate=e(this),this.Pi=new gN(this),this.indexManager=new eN,this.remoteDocumentCache=(function(a){return new mN(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Qb(t),this.Ii=new cN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new dN(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const a=new yN(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return L.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class yN extends HA{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Ri=new Qg,this.Vi=null}static mi(e){return new id(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(i=>{const a=le.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Df{constructor(e,t){this.persistence=e,this.pi=new lr((i=>tn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=iS(this,t)}static mi(e,t){return new Df(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?L.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tf(e.data.value)),t}br(e,t,i){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return L.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.serializer=e}k(e,t,i,a){const l=new jf("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(ac)})(e),(function(p){p.createObjectStore(ju,{keyPath:CD}),p.createObjectStore(ei,{keyPath:ET,autoIncrement:!0}).createIndex(oa,TT,{unique:!0}),p.createObjectStore(Uo)})(e),c0(e),(function(p){p.createObjectStore(na)})(e));let c=L.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(zo),p.deleteObjectStore(Bo),p.deleteObjectStore(ua)})(e),c0(e)),c=c.next((()=>(function(p){const g=p.store(ua),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(vf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(ei).J().next((T=>{p.deleteObjectStore(ei),p.createObjectStore(ei,{keyPath:ET,autoIncrement:!0}).createIndex(oa,TT,{unique:!0});const S=g.store(ei),O=T.map((H=>S.put(H)));return L.waitFor(O)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(qo,{keyPath:LD})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Hu)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Gf,{keyPath:UD})})(e),(function(p){p.createObjectStore(Kf,{keyPath:BD})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Qf,{keyPath:KD});g.createIndex(Gp,QD,{unique:!1}),g.createIndex(ZA,YD,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(_f,{keyPath:ND});g.createIndex(Wh,xD),g.createIndex(QA,VD)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(na)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(xg,{keyPath:zD,autoIncrement:!0}).createIndex(Hp,qD,{unique:!1}),p.createObjectStore(Du,{keyPath:FD}).createIndex(XA,jD,{unique:!1}),p.createObjectStore(Nu,{keyPath:HD}).createIndex($A,GD,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Nu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Vg,{keyPath:XD})})(e)}))),i<18&&a>=18&&bA()&&(c=c.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Nu).clear()}))),c}wi(e){let t=0;return e.store(na).ee(((i,a)=>{t+=Cf(a)})).next((()=>{const i={byteSize:t};return e.store(Hu).put(jp,i)}))}yi(e){const t=e.store(ju),i=e.store(ei);return t.J().next((a=>L.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,la],[l.userId,l.lastAcknowledgedBatchId]);return i.J(oa,c).next((d=>L.forEach(d,(p=>{me(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=ra(this.serializer,p);return Wb(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(zo),i=e.store(na);return e.store(ua).get(vf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new je(c),g=(function(T){return[0,tn(T)]})(p);l.push(t.get(g).next((_=>_?L.resolve():(T=>t.put({targetId:0,path:tn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}bi(e,t){e.createObjectStore(Gu,{keyPath:kD});const i=t.store(Gu),a=new Kg,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:tn(p)})}};return t.store(na).ee({X:!0},((c,d)=>{const p=new je(c);return l(p.popLast())})).next((()=>t.store(Uo).ee({X:!0},(([c,d,p],g)=>{const _=vi(d);return l(_.popLast())}))))}Di(e){const t=e.store(Bo);return t.ee(((i,a)=>{const l=Su(a),c=Yb(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(na),a=[];return i.ee(((l,c)=>{const d=t.store(_f),p=(function(T){return T.document?new le(je.fromString(T.document.name).popFirst(5)):T.noDocument?le.fromSegments(T.noDocument.path):T.unknownDocument?le.fromSegments(T.unknownDocument.path):de(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>L.waitFor(a)))}Fi(e,t){const i=t.store(ei),a=sS(this.serializer),l=new Yg(id.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??xe();ra(this.serializer,p).keys().forEach((_=>g=g.add(_))),d.set(p.userId,g)})),L.forEach(d,((p,g)=>{const _=new Kt(g),T=td.wt(this.serializer,_),S=l.getIndexManager(_),O=nd.wt(_,this.serializer,S,l.referenceDelegate);return new aS(a,O,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Kp(t,qn.ce),p).next()}))}))}}function c0(s){s.createObjectStore(zo,{keyPath:MD}).createIndex(Ng,PD,{unique:!0}),s.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(YA,OD,{unique:!0}),s.createObjectStore(ua)}const Xr="IndexedDbPersistence",Ip=18e5,Rp=5e3,Cp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vN="main";class Xg{constructor(e,t,i,a,l,c,d,p,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Xg.v())throw new ae(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aN(this,a),this.$i=t+vN,this.serializer=new Qb(p),this.Ui=new os(this.$i,this.Ni,new _N(this.serializer)),this.hi=new Y2,this.Pi=new nN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sS(this.serializer),this.Ii=new Q2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&ln(Xr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(Q.FAILED_PRECONDITION,Cp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new qn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>jh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ms(e))return ie(Xr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(Xr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Eu(e).get(_o).next((t=>L.resolve(this.es(t))))}ts(e){return jh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ip)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Mt(t,qo);return i.J().next((a=>{const l=this.ss(a,Ip),c=a.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Eu(e).get(_o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(Q.FAILED_PRECONDITION,Cp);return!1}}return!(!this.networkEnabled||!this.inForeground)||jh(e).J().next((i=>this.ss(i,Rp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ie(Xr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ac,qo],(e=>{const t=new Kp(e,qn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>jh(e).J().next((t=>this.ss(t,Ip).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return nd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return td.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ie(Xr,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?JD:p===17?tb:p===16?ZD:p===15?Og:p===14?eb:p===13?WA:p===12?$D:p===11?JA:void de(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new Kp(d,this.ci?this.ci.next():qn.ce),t==="readwrite-primary"?this.Hi(c).next((p=>!!p||this.Yi(c))).next((p=>{if(!p)throw ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ae(Q.FAILED_PRECONDITION,jA);return i(c)})).next((p=>this.Xi(c).next((()=>p)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Eu(e).get(_o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(Q.FAILED_PRECONDITION,Cp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eu(e).put(_o,t)}static v(){return os.v()}Zi(e){const t=Eu(e);return t.get(_o).next((i=>this.es(i)?(ie(Xr,"Releasing primary lease."),t.delete(_o)):L.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(ln(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;AA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ie(Xr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return ln(Xr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ln("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Eu(s){return Mt(s,ac)}function jh(s){return Mt(s,qo)}function EN(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=xe(),a=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new $g(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AA()?8:GA(Ot())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new TN;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(So()<=ke.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(So()<=ke.DEBUG&&ie("QueryEngine","Query:",wo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(So()<=ke.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):L.resolve())}ys(e,t){if(MT(t))return L.resolve(null);let i=Fn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Wp(t,null,"F"),i=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=xe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,Wp(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return MT(t)||a.isEqual(Ee.min())?L.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?L.resolve(null):(So()<=ke.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wo(t)),this.vs(e,c,t,TD(a,zu)).next((d=>d)))}))}Ds(e,t){let i=new Xe(Tb(e));return t.forEach(((a,l)=>{uc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return So()<=ke.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",wo(t)),this.ps.getDocumentsMatchingQuery(e,t,Rn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="LocalStore",AN=3e8;class bN{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new lt(Ie),this.xs=new lr((l=>ya(l)),oc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lS(s,e,t,i){return new bN(s,e,t,i)}async function uS(s,e){const t=Re(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=xe();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function SN(s,e){const t=Re(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const T=g.batch,S=T.keys();let O=L.resolve();return S.forEach((H=>{O=O.next((()=>_.getEntry(p,H))).next((K=>{const q=g.docVersions.get(H);me(q!==null,48541),K.version.compareTo(q)<0&&(T.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),_.addEntry(K)))}))})),O.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=xe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function cS(s){const e=Re(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function wN(s,e){const t=Re(s),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const S=a.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Rt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),a=a.insert(T,O),(function(K,q,te){return K.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=AN?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,O,_)&&d.push(t.Pi.updateTargetData(l,O))}));let p=In(),g=xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(IN(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function IN(s,e,t){let i=xe(),a=xe();return t.forEach((l=>i=i.add(l))),e.getEntries(s,i).next((l=>{let c=In();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ee.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ie(Zg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function RN(s,e){const t=Re(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=la),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CN(s,e){const t=Re(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,L.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new $i(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function og(s,e,t){const i=Re(s),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ms(c))throw c;ie(Zg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function h0(s,e,t){const i=Re(s);let a=Ee.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const T=Re(p),S=T.xs.get(_);return S!==void 0?L.resolve(T.Ms.get(S)):T.Pi.getTargetData(g,_)})(i,c,Fn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:xe()))).next((d=>(DN(i,d2(e),d),{documents:d,Qs:l})))))}function DN(s,e,t){let i=s.Os.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),s.Os.set(e,i)}class f0{constructor(){this.activeTargetIds=v2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hS{constructor(){this.Mo=new f0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="ConnectivityMonitor";class m0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(d0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(d0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function lg(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="RestConnection",xN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Ef?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=lg(),d=this.zo(e,t.toUriEncodedString());ie(Dp,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=Wo(g);return this.Jo(e,d,p,i,_).then((T=>(ie(Dp,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw pa(Dp,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=xN[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class MN extends VN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=lg();return new Promise(((d,p)=>{const g=new VA;g.setWithCredentials(!0),g.listenOnce(OA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $h.NO_ERROR:const T=g.getResponseJson();ie(Jt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case $h.TIMEOUT:ie(Jt,`RPC '${e}' ${c} timed out`),p(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const S=g.getStatus();if(ie(Jt,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O?.error;if(H&&H.status&&H.message){const K=(function(te){const W=te.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(W)>=0?W:Q.UNKNOWN})(H.status);p(new ae(K,H.message))}else p(new ae(Q.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ie(Jt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ie(Jt,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=lg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kA(),d=PA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ie(Jt,`Creating RPC '${e}' stream ${a}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let S=!1,O=!1;const H=new ON({Yo:q=>{O?ie(Jt,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(S||(ie(Jt,`Opening RPC '${e}' stream ${a} transport.`),T.open(),S=!0),ie(Jt,`RPC '${e}' stream ${a} sending:`,q),T.send(q))},Zo:()=>T.close()}),K=(q,te,W)=>{q.listen(te,(ne=>{try{W(ne)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return K(T,Tu.EventType.OPEN,(()=>{O||(ie(Jt,`RPC '${e}' stream ${a} transport opened.`),H.o_())})),K(T,Tu.EventType.CLOSE,(()=>{O||(O=!0,ie(Jt,`RPC '${e}' stream ${a} transport closed`),H.a_(),this.E_(T))})),K(T,Tu.EventType.ERROR,(q=>{O||(O=!0,pa(Jt,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),H.a_(new ae(Q.UNAVAILABLE,"The operation could not be completed")))})),K(T,Tu.EventType.MESSAGE,(q=>{if(!O){const te=q.data[0];me(!!te,16349);const W=te,ne=W?.error||W[0]?.error;if(ne){ie(Jt,`RPC '${e}' stream ${a} received error:`,ne);const ge=ne.status;let oe=(function(w){const I=wt[w];if(I!==void 0)return Ob(I)})(ge),re=ne.message;oe===void 0&&(oe=Q.INTERNAL,re="Unknown error status: "+ge+" with message "+ne.message),O=!0,H.a_(new ae(oe,re)),T.close()}else ie(Jt,`RPC '${e}' stream ${a} received:`,te),H.u_(te)}})),K(d,MA.STAT_EVENT,(q=>{q.stat===zp.PROXY?ie(Jt,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===zp.NOPROXY&&ie(Jt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof window<"u"?window:null}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new k2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="PersistentStream";class dS{constructor(e,t,i,a,l,c,d,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(ln(t.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ae(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(p0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ie(p0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kN extends dS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=B2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?cn(c.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ng(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Af(p)?{documents:qb(l,p)}:{query:Fb(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=kb(l,c.resumeToken);const g=eg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=Yo(l,c.snapshotVersion.toTimestamp());const g=eg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=q2(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.q_(t)}}class LN extends dS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=z2(e.writeResults,e.commitTime),i=cn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ng(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>wf(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{}class BN extends UN{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,tg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(Q.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,tg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ln(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class qN{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{wa(this)&&(ie(Ta,"Restarting streams for network reachability change."),await(async function(p){const g=Re(p);g.Ea.add(4),await hc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await sd(g)})(this))}))})),this.Ra=new zN(i,a)}}async function sd(s){if(wa(s))for(const e of s.da)await e(!0)}async function hc(s){for(const e of s.da)await e(!1)}function mS(s,e){const t=Re(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ty(t)?ey(t):il(t).O_()&&Wg(t,e))}function Jg(s,e){const t=Re(s),i=il(t);t.Ia.delete(e),i.O_()&&pS(t,e),t.Ia.size===0&&(i.O_()?i.L_():wa(t)&&t.Ra.set("Unknown"))}function Wg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(s).Y_(e)}function pS(s,e){s.Va.Ue(e),il(s).Z_(e)}function ey(s){s.Va=new V2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),il(s).start(),s.Ra.ua()}function ty(s){return wa(s)&&!il(s).x_()&&s.Ia.size>0}function wa(s){return Re(s).Ea.size===0}function gS(s){s.Va=void 0}async function FN(s){s.Ra.set("Online")}async function jN(s){s.Ia.forEach(((e,t)=>{Wg(s,e)}))}async function HN(s,e){gS(s),ty(s)?(s.Ra.ha(e),ey(s)):s.Ra.set("Unknown")}async function GN(s,e,t){if(s.Ra.set("Online"),e instanceof Pb&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(s,e)}catch(i){ie(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nf(s,i)}else if(e instanceof sf?s.Va.Ze(e):e instanceof Mb?s.Va.st(e):s.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await cS(s.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Rt.EMPTY_BYTE_STRING,_.snapshotVersion)),pS(l,p);const T=new $i(_.target,p,g,_.sequenceNumber);Wg(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(i){ie(Ta,"Failed to raise snapshot:",i),await Nf(s,i)}}async function Nf(s,e,t){if(!ms(e))throw e;s.Ea.add(1),await hc(s),s.Ra.set("Offline"),t||(t=()=>cS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ie(Ta,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await sd(s)}))}function yS(s,e){return e().catch((t=>Nf(s,t,e)))}async function fc(s){const e=Re(s),t=fs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:la;for(;KN(e);)try{const a=await RN(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,QN(e,a)}catch(a){await Nf(e,a)}_S(e)&&vS(e)}function KN(s){return wa(s)&&s.Ta.length<10}function QN(s,e){s.Ta.push(e);const t=fs(s);t.O_()&&t.X_&&t.ea(e.mutations)}function _S(s){return wa(s)&&!fs(s).x_()&&s.Ta.length>0}function vS(s){fs(s).start()}async function YN(s){fs(s).ra()}async function XN(s){const e=fs(s);for(const t of s.Ta)e.ea(t.mutations)}async function $N(s,e,t){const i=s.Ta.shift(),a=qg.from(i,e,t);await yS(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await fc(s)}async function ZN(s,e){e&&fs(s).X_&&await(async function(i,a){if((function(c){return D2(c)&&c!==Q.ABORTED})(a.code)){const l=i.Ta.shift();fs(i).B_(),await yS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await fc(i)}})(s,e),_S(s)&&vS(s)}async function g0(s,e){const t=Re(s);t.asyncQueue.verifyOperationInProgress(),ie(Ta,"RemoteStore received new credentials");const i=wa(t);t.Ea.add(3),await hc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sd(t)}async function JN(s,e){const t=Re(s);e?(t.Ea.delete(2),await sd(t)):e||(t.Ea.add(2),await hc(t),t.Ra.set("Unknown"))}function il(s){return s.ma||(s.ma=(function(t,i,a){const l=Re(t);return l.sa(),new kN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:FN.bind(null,s),t_:jN.bind(null,s),r_:HN.bind(null,s),H_:GN.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),ty(s)?ey(s):s.Ra.set("Unknown")):(await s.ma.stop(),gS(s))}))),s.ma}function fs(s){return s.fa||(s.fa=(function(t,i,a){const l=Re(t);return l.sa(),new LN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:YN.bind(null,s),r_:ZN.bind(null,s),ta:XN.bind(null,s),na:$N.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await fc(s)):(await s.fa.stop(),s.Ta.length>0&&(ie(Ta,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new ny(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iy(s,e){if(ln("AsyncQueue",`${e}: ${s}`),ms(s))return new ae(Q.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||le.comparator(t.key,i.key):(t,i)=>le.comparator(t.key,i.key),this.keyedMap=Au(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new No;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.ga=new lt(le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xo{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xo(e,t,No.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ex{constructor(){this.queries=_0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=_0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function _0(){return new lr((s=>Eb(s)),$f)}async function tx(s,e){const t=Re(s);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new WN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=iy(c,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ry(t)}async function nx(s,e){const t=Re(s),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ix(s,e){const t=Re(s);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&ry(t)}function rx(s,e,t){const i=Re(s),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function ry(s){s.Ca.forEach((e=>{e.next()}))}var ug,v0;(v0=ug||(ug={})).Ma="default",v0.Cache="cache";class sx{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class ax{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=Tb(e),this.tu=new No(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new y0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const S=a.get(_),O=uc(this.query,T)?T:null,H=!!S&&this.mutatedKeys.has(S.key),K=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let q=!1;S&&O?S.data.isEqual(O.data)?H!==K&&(i.track({type:3,doc:O}),q=!0):this.su(S,O)||(i.track({type:2,doc:O}),q=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(d=!0)):!S&&O?(i.track({type:0,doc:O}),q=!0):S&&!O&&(i.track({type:1,doc:S}),q=!0,(p||g)&&(d=!0)),q&&(O?(c=c.add(O),l=K?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(O,H){const K=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:q})}};return K(O)-K(H)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Xo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new TS(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new ES(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sy="SyncEngine";class ox{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class lx{constructor(e){this.key=e,this.hu=!1}}class ux{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new lr((d=>Eb(d)),$f),this.Iu=new Map,this.Eu=new Set,this.du=new lt(le.comparator),this.Au=new Map,this.Ru=new Qg,this.Vu={},this.mu=new Map,this.fu=Ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cx(s,e,t=!0){const i=RS(s);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await AS(i,e,t,!0),a}async function hx(s,e){const t=RS(s);await AS(t,e,!0,!1)}async function AS(s,e,t,i){const a=await CN(s.localStore,Fn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await fx(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&mS(s.remoteStore,a),d}async function fx(s,e,t,i,a){s.pu=(T,S,O)=>(async function(K,q,te,W){let ne=q.view.ru(te);ne.Cs&&(ne=await h0(K.localStore,q.query,!1).then((({documents:D})=>q.view.ru(D,ne))));const ge=W&&W.targetChanges.get(q.targetId),oe=W&&W.targetMismatches.get(q.targetId)!=null,re=q.view.applyChanges(ne,K.isPrimaryClient,ge,oe);return T0(K,q.targetId,re.au),re.snapshot})(s,T,S,O);const l=await h0(s.localStore,e,!0),c=new ax(e,l.Qs),d=c.ru(l.documents),p=cc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);T0(s,t,g.au);const _=new ox(e,t,c);return s.Tu.set(e,_),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function dx(s,e,t){const i=Re(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!$f(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await og(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Jg(i.remoteStore,a.targetId),cg(i,a.targetId)})).catch(Sa)):(cg(i,a.targetId),await og(i.localStore,a.targetId,!0))}async function mx(s,e){const t=Re(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Jg(t.remoteStore,i.targetId))}async function px(s,e,t){const i=CS(s);try{const a=await(function(c,d){const p=Re(c),g=Qe.now(),_=d.reduce(((O,H)=>O.add(H.key)),xe());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=In(),K=xe();return p.Ns.getEntries(O,_).next((q=>{H=q,H.forEach(((te,W)=>{W.isValidDocument()||(K=K.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,H))).next((q=>{T=q;const te=[];for(const W of d){const ne=R2(W,T.get(W.key).overlayedDocument);ne!=null&&te.push(new ur(W.key,ne,hb(ne.value.mapValue),un.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,te,d)})).next((q=>{S=q;const te=q.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(O,q.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:bb(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new lt(Ie)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await dc(i,a.changes),await fc(i.remoteStore)}catch(a){const l=iy(a,"Failed to persist write");t.reject(l)}}async function bS(s,e){const t=Re(s);try{const i=await wN(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?me(c.hu,14607):a.removedDocuments.size>0&&(me(c.hu,42227),c.hu=!1))})),await dc(t,i,e)}catch(i){await Sa(i)}}function E0(s,e,t){const i=Re(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Re(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(d)&&(g=!0)})),g&&ry(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gx(s,e,t){const i=Re(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new lt(le.comparator);c=c.insert(l,gt.newNoDocument(l,Ee.min()));const d=xe().add(l),p=new ed(Ee.min(),new Map,new lt(Ie),c,d);await bS(i,p),i.du=i.du.remove(l),i.Au.delete(e),ay(i)}else await og(i.localStore,e,!1).then((()=>cg(i,e,t))).catch(Sa)}async function yx(s,e){const t=Re(s),i=e.batch.batchId;try{const a=await SN(t.localStore,e);wS(t,i,null),SS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await dc(t,a)}catch(a){await Sa(a)}}async function _x(s,e,t){const i=Re(s);try{const a=await(function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(me(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);wS(i,e,t),SS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await dc(i,a)}catch(a){await Sa(a)}}function SS(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function wS(s,e,t){const i=Re(s);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function cg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||IS(s,i)}))}function IS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Jg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),ay(s))}function T0(s,e,t){for(const i of t)i instanceof ES?(s.Ru.addReference(i.key,e),vx(s,i)):i instanceof TS?(ie(sy,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||IS(s,i.key)):de(19791,{wu:i})}function vx(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ie(sy,"New document in limbo: "+t),s.Eu.add(i),ay(s))}function ay(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new le(je.fromString(e)),i=s.fu.next();s.Au.set(i,new lx(t)),s.du=s.du.insert(t,i),mS(s.remoteStore,new $i(Fn(Ug(t.path)),i,"TargetPurposeLimboResolution",qn.ce))}}async function dc(s,e,t){const i=Re(s),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){a.push(g);const _=$g.As(p.targetId,g);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(p,g){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(g,(S=>L.forEach(S.Es,(O=>_.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>L.forEach(S.ds,(O=>_.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!ms(T))throw T;ie(Zg,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const O=_.Ms.get(S),H=O.snapshotVersion,K=O.withLastLimboFreeSnapshotVersion(H);_.Ms=_.Ms.insert(S,K)}}})(i.localStore,l))}async function Ex(s,e){const t=Re(s);if(!t.currentUser.isEqual(e)){ie(sy,"User change. New user:",e.toKey());const i=await uS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ae(Q.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dc(t,i.Ls)}}function Tx(s,e){const t=Re(s),i=t.Au.get(e);if(i&&i.hu)return xe().add(i.key);{let a=xe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function RS(s){const e=Re(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=bS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gx.bind(null,e),e.Pu.H_=ix.bind(null,e.eventManager),e.Pu.yu=rx.bind(null,e.eventManager),e}function CS(s){const e=Re(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_x.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lS(this.persistence,new oS,e.initialUser,this.serializer)}Cu(e){return new Yg(id.mi,this.serializer)}Du(e){return new hS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class Ax extends Ju{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){me(this.persistence.referenceDelegate instanceof Df,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new nS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Yg((i=>Df.mi(i,t)),this.serializer)}}class bx extends Ju{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await CS(this.xu.syncEngine),await fc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return lS(this.persistence,new oS,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new nS(i,e.asyncQueue,t)}Mu(e,t){const i=new wD(t,this.persistence);return new SD(e.asyncQueue,i)}Cu(e){const t=EN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Xg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,PN(),of(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hS}}class xf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ex.bind(null,this.syncEngine),await JN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ex})()}createDatastore(e){const t=rd(e.databaseInfo.databaseId),i=(function(l){return new MN(l)})(e.databaseInfo);return(function(l,c,d,p){return new BN(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new qN(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>E0(this.syncEngine,t,0)),(function(){return m0.v()?new m0:new NN})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,_){const T=new ux(a,l,c,d,p,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);ie(Ta,"RemoteStore shutting down."),i.Ea.add(5),await hc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}xf.provider={build:()=>new xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ln("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class wx{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Kt.UNAUTHENTICATED,this.clientId=Rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ie(ds,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ie(ds,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=iy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Np(s,e){s.asyncQueue.verifyOperationInProgress(),ie(ds,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await uS(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function A0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Ix(s);ie(ds,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>g0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>g0(e.remoteStore,a))),s._onlineComponents=e}async function Ix(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ie(ds,"Using user provided OfflineComponentProvider");try{await Np(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;pa("Error using user provided cache. Falling back to memory cache: "+t),await Np(s,new Ju)}}else ie(ds,"Using default OfflineComponentProvider"),await Np(s,new Ax(void 0));return s._offlineComponents}async function DS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ie(ds,"Using user provided OnlineComponentProvider"),await A0(s,s._uninitializedComponentsProvider._online)):(ie(ds,"Using default OnlineComponentProvider"),await A0(s,new xf))),s._onlineComponents}function Rx(s){return DS(s).then((e=>e.syncEngine))}async function Cx(s){const e=await DS(s),t=e.eventManager;return t.onListen=cx.bind(null,e.syncEngine),t.onUnlisten=dx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mx.bind(null,e.syncEngine),t}function Dx(s,e,t={}){const i=new er;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new Sx({next:S=>{_.Nu(),c.enqueueAndForget((()=>nx(l,T))),S.fromCache&&p.source==="server"?g.reject(new ae(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new sx(d,_,{includeMetadataChanges:!0,qa:!0});return tx(l,T)})(await Cx(s),s.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firestore.googleapis.com",S0=!0;class w0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xS,this.ssl=S0}else this.host=e.host,this.ssl=e.ssl??S0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ED("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new cD;switch(i.type){case"firstParty":return new mD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=b0.get(t);i&&(ie("ComponentProvider","Removing Datastore"),b0.delete(t),i.terminate())})(this),Promise.resolve()}}function Nx(s,e,t,i={}){s=us(s,ad);const a=Wo(e),l=s._getSettings(),c={...l,emulatorOptions:s._getEmulatorOptions()},d=`${e}:${t}`;a&&(vA(`https://${d}`),EA("Firestore",!0)),l.host!==xS&&l.host!==d&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!fa(p,c)&&(s._setSettings(p),i.mockUserToken)){let g,_;if(typeof i.mockUserToken=="string")g=i.mockUserToken,_=Kt.MOCK_USER;else{g=z1(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Kt(T)}s._authCredentials=new hD(new UA(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new rl(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(sc(t,Vt._jsonSchema))return new Vt(e,i||null,new le(je.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:It("string",Vt._jsonSchemaVersion),referencePath:It("string")};class ls extends rl{constructor(e,t,i){super(e,t,Ug(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new le(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function wu(s,e,...t){if(s=hn(s),zA("collection","path",e),s instanceof ad){const i=je.fromString(e,...t);return pT(i),new ls(s,null,i)}{if(!(s instanceof Vt||s instanceof ls))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(je.fromString(e,...t));return pT(i),new ls(s.firestore,null,i)}}function Pu(s,e,...t){if(s=hn(s),arguments.length===1&&(e=Rg.newId()),zA("doc","path",e),s instanceof ad){const i=je.fromString(e,...t);return mT(i),new Vt(s,null,new le(i))}{if(!(s instanceof Vt||s instanceof ls))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(je.fromString(e,...t));return mT(i),new Vt(s.firestore,s instanceof ls?s.converter:null,new le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fS(this,"async_queue_retry"),this._c=()=>{const i=of();i&&ie(I0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=of();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=of();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ms(e))throw e;ie(I0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ln("INTERNAL UNHANDLED ERROR: ",C0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ny.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&de(47125,{Pc:C0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function C0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class sl extends ad{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new R0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function xx(s,e){const t=typeof s=="object"?s:CA(),i=typeof s=="string"?s:Ef,a=wg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=U1("firestore");l&&Nx(a,...l)}return a}function VS(s){if(s._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||OS(s),s._firestoreClient}function OS(s){const e=s._freezeSettings(),t=(function(a,l,c,d){return new e2(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new wx(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function Vx(s,e){pa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return Ox(s,xf.provider,{build:i=>new bx(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function Ox(s,e,t){if((s=us(s,sl))._firestoreClient||s._terminated)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ae(Q.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},OS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Rt.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:It("string",zn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(sc(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:It("string",Ti._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sc(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new ae(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:It("string",Ai._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=/^__.*__$/;class Px{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}}class MS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ur(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:s})}}class ly{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ly({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PS(this.Ac)&&Mx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kx{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||rd(e)}Cc(e,t,i,a=!1){return new ly({Ac:e,methodName:t,Dc:i,path:ht.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uy(s){const e=s._freezeSettings(),t=rd(s._databaseId);return new kx(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Lx(s,e,t,i,a,l={}){const c=s.Cc(l.merge||l.mergeFields?2:0,e,t,a);cy("Data must be an object, but it was:",c,i);const d=kS(i,c);let p,g;if(l.merge)p=new gn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=hg(e,T,t);if(!c.contains(S))throw new ae(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);US(_,S)||_.push(S)}p=new gn(_),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new Px(new en(d),p,g)}class ld extends oy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function Ux(s,e,t,i){const a=s.Cc(1,e,t);cy("Data must be an object, but it was:",a,i);const l=[],c=en.empty();ps(i,((p,g)=>{const _=hy(e,p,t);g=hn(g);const T=a.yc(_);if(g instanceof ld)l.push(_);else{const S=mc(g,T);S!=null&&(l.push(_),c.set(_,S))}}));const d=new gn(l);return new MS(c,d,a.fieldTransforms)}function Bx(s,e,t,i,a,l){const c=s.Cc(1,e,t),d=[hg(e,i,t)],p=[a];if(l.length%2!=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(hg(e,l[S])),p.push(l[S+1]);const g=[],_=en.empty();for(let S=d.length-1;S>=0;--S)if(!US(g,d[S])){const O=d[S];let H=p[S];H=hn(H);const K=c.yc(O);if(H instanceof ld)g.push(O);else{const q=mc(H,K);q!=null&&(g.push(O),_.set(O,q))}}const T=new gn(g);return new MS(_,T,c.fieldTransforms)}function zx(s,e,t,i=!1){return mc(t,s.Cc(i?4:3,e))}function mc(s,e){if(LS(s=hn(s)))return cy("Unsupported field value:",e,s),kS(s,e);if(s instanceof oy)return(function(i,a){if(!PS(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=mc(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(i,a){if((i=hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return E2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Qe.fromDate(i);return{timestampValue:Yo(a.serializer,l)}}if(i instanceof Qe){const l=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yo(a.serializer,l)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zn)return{bytesValue:kb(a.serializer,i._byteString)};if(i instanceof Vt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Hg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ai)return(function(c,d){return{mapValue:{fields:{[Pg]:{stringValue:kg},[Fo]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Bg(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Ff(i)}`)})(s,e)}function kS(s,e){const t={};return nb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(s,((i,a)=>{const l=mc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function LS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qe||s instanceof Ti||s instanceof zn||s instanceof Vt||s instanceof oy||s instanceof Ai)}function cy(s,e,t){if(!LS(t)||!qA(t)){const i=Ff(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function hg(s,e,t){if((e=hn(e))instanceof od)return e._internalPath;if(typeof e=="string")return hy(s,e);throw Vf("Field path arguments must be of type string or ",s,!1,void 0,t)}const qx=new RegExp("[~\\*/\\[\\]]");function hy(s,e,t){if(e.search(qx)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new od(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Vf(s,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ae(Q.INVALID_ARGUMENT,d+s+p)}function US(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Fx extends BS{data(){return super.data()}}function fy(s,e){return typeof e=="string"?hy(s,e):e instanceof od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class Hx extends dy{}function zS(s,e,...t){let i=[];e instanceof dy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof my)).length,d=l.filter((p=>p instanceof ud)).length;if(c>1||c>0&&d>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class ud extends Hx{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ud(e,t,i)}_apply(e){const t=this._parse(e);return FS(e._query,t),new rl(e.firestore,e.converter,Jp(e._query,t))}_parse(e){const t=uy(e.firestore);return(function(l,c,d,p,g,_,T){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){N0(T,_);const H=[];for(const K of T)H.push(D0(p,l,K));S={arrayValue:{values:H}}}else S=D0(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||N0(T,_),S=zx(d,c,T,_==="in"||_==="not-in");return Le.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qS(s,e,t){const i=e,a=fy("where",s);return ud._create(a,i,t)}class my extends dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new my(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)FS(c,p),c=Jp(c,p)})(e._query,t),new rl(e.firestore,e.converter,Jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function D0(s,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vb(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(je.fromString(t));if(!le.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yu(s,new le(i))}if(t instanceof Vt)return Yu(s,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ff(t)}.`)}function N0(s,e){if(!Array.isArray(s)||s.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FS(s,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Gx{convertValue(e,t="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ps(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Fo].arrayValue?.values?.map((i=>ot(i.doubleValue)));return new Ai(t)}convertGeoPoint(e){return new Ti(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Yf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=ir(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=je.fromString(e);me(Kb(i),9688,{name:e});const a=new ga(i.get(1),i.get(3)),l=new le(i.popFirst(5));return a.isEqual(t)||ln(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class Gh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends BS{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:It("string",xo._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class lf extends xo{data(e={}){return super.data(e)}}class Vo{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Gh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new lf(this._firestore,this._userDataWriter,i.key,i,new Gh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Gh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Gh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:Qx(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qx(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:s})}}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:It("string",Vo._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Yx extends Gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function fg(s){s=us(s,rl);const e=us(s.firestore,sl),t=VS(e),i=new Yx(e);return jx(s._query),Dx(t,s._query).then((a=>new Vo(e,i,s,a)))}function dg(s,e,t,...i){s=us(s,Vt);const a=us(s.firestore,sl),l=uy(a);let c;return c=typeof(e=hn(e))=="string"||e instanceof od?Bx(l,"updateDoc",s._key,e,t,i):Ux(l,"updateDoc",s._key,e),py(a,[c.toMutation(s._key,un.exists(!0))])}function Xx(s){return py(us(s.firestore,sl),[new Wf(s._key,un.none())])}function x0(s,e){const t=us(s.firestore,sl),i=Pu(s),a=Kx(s.converter,e);return py(t,[Lx(uy(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,un.exists(!1))]).then((()=>i))}function py(s,e){return(function(i,a){const l=new er;return i.asyncQueue.enqueueAndForget((async()=>px(await Rx(i),a,l))),l.promise})(VS(s),e)}(function(e,t=!0){(function(a){tl=a})(el),ko(new da("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new sl(new fD(i.getProvider("auth-internal")),new pD(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ss(cT,hT,e),ss(cT,hT,"esm2020")})();var $x="firebase",Zx="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss($x,Zx,"app");function jS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jx=jS,HS=new ic("auth","Firebase",jS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new bg("@firebase/auth");function Wx(s,...e){Of.logLevel<=ke.WARN&&Of.warn(`Auth (${el}): ${s}`,...e)}function uf(s,...e){Of.logLevel<=ke.ERROR&&Of.error(`Auth (${el}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(s,...e){throw gy(s,...e)}function bi(s,...e){return gy(s,...e)}function GS(s,e,t){const i={...Jx(),[e]:t};return new ic("auth","Firebase",i).create(e,{appName:s.name})}function ha(s){return GS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gy(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return HS.create(s,...e)}function we(s,e,...t){if(!s)throw gy(e,...t)}function Zi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uf(e),new Error(e)}function ar(s,e){s||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){return typeof self<"u"&&self.location?.href||""}function eV(){return V0()==="http:"||V0()==="https:"}function V0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eV()||G1()||"connection"in navigator)?navigator.onLine:!0}function nV(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ar(t>e,"Short delay should be less than long delay!"),this.isMobile=j1()||K1()}get(){return tV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(s,e){ar(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sV=new pc(3e4,6e4);function _y(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function al(s,e,t,i,a={}){return QS(s,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=rc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return H1()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(g.credentials="include"),KS.fetch()(await YS(s,s.config.apiHost,t,d),g)})}async function QS(s,e,t){s._canInitEmulator=!1;const i={...iV,...e};try{const a=new oV(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Kh(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Kh(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw Kh(s,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw GS(s,_,g);sr(s,_)}}catch(a){if(a instanceof or)throw a;sr(s,"network-request-failed",{message:String(a)})}}async function aV(s,e,t,i,a={}){const l=await al(s,e,t,i,a);return"mfaPendingCredential"in l&&sr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function YS(s,e,t,i){const a=`${e}${t}?${i}`,l=s,c=l.config.emulator?yy(s.config,a):`${s.config.apiScheme}://${a}`;return rV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class oV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(bi(this.auth,"network-request-failed")),sV.get())})}}function Kh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=bi(s,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(s,e){return al(s,"POST","/v1/accounts:delete",e)}async function Mf(s,e){return al(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uV(s,e=!1){const t=hn(s),i=await t.getIdToken(e),a=vy(i);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:ku(xp(a.auth_time)),issuedAtTime:ku(xp(a.iat)),expirationTime:ku(xp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function xp(s){return Number(s)*1e3}function vy(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return uf("JWT malformed, contained fewer than 3 sections"),null;try{const a=mA(t);return a?JSON.parse(a):(uf("Failed to decode base64 JWT payload"),null)}catch(a){return uf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function O0(s){const e=vy(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof or&&cV(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function cV({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(s){const e=s.auth,t=await s.getIdToken(),i=await Wu(s,Mf(e,{idToken:t}));we(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?XS(a.providerUserInfo):[],c=dV(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!c?.length,g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new pg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,_)}async function fV(s){const e=hn(s);await Pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dV(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function XS(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(s,e){const t=await QS(s,{},async()=>{const i=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await YS(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(p.credentials="include"),KS.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pV(s,e){return al(s,"POST","/v2/accounts:revokeToken",_y(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=O0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await mV(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Oo;return i&&(we(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(we(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new hV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uV(this,e)}reload(){return fV(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Pf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(ha(this.auth));const e=await this.getIdToken();return await Wu(this,lV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:O,providerData:H,stsTokenManager:K}=t;we(T&&K,e,"internal-error");const q=Oo.fromJSON(this.name,K);we(typeof T=="string",e,"internal-error"),$r(i,e.name),$r(a,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof O=="boolean",e,"internal-error"),$r(l,e.name),$r(c,e.name),$r(d,e.name),$r(p,e.name),$r(g,e.name),$r(_,e.name);const te=new ti({uid:T,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:O,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:q,createdAt:g,lastLoginAt:_});return H&&Array.isArray(H)&&(te.providerData=H.map(W=>({...W}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,t,i=!1){const a=new Oo;a.updateFromServerResponse(t);const l=new ti({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Pf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?XS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Oo;d.updateFromIdToken(i);const p=new ti({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new pg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function Ji(s){ar(s instanceof Function,"Expected a class definition");let e=M0.get(s);return e?(ar(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,M0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$S.type="NONE";const P0=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(s,e,t){return`firebase:${s}:${e}:${t}`}class Mo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=cf(this.userKey,a.apiKey,l),this.fullPersistenceKey=cf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mf(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Mo(Ji(P0),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ji(P0);const c=cf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const S=await Mf(e,{idToken:_}).catch(()=>{});if(!S)break;T=await ti._fromGetAccountInfoResponse(e,S,_)}else T=ti._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Mo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Mo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nw(e))return"Blackberry";if(iw(e))return"Webos";if(JS(e))return"Safari";if((e.includes("chrome/")||WS(e))&&!e.includes("edge/"))return"Chrome";if(tw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function ZS(s=Ot()){return/firefox\//i.test(s)}function JS(s=Ot()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WS(s=Ot()){return/crios\//i.test(s)}function ew(s=Ot()){return/iemobile/i.test(s)}function tw(s=Ot()){return/android/i.test(s)}function nw(s=Ot()){return/blackberry/i.test(s)}function iw(s=Ot()){return/webos/i.test(s)}function Ey(s=Ot()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function gV(s=Ot()){return Ey(s)&&!!window.navigator?.standalone}function yV(){return Q1()&&document.documentMode===10}function rw(s=Ot()){return Ey(s)||tw(s)||iw(s)||nw(s)||/windows phone/i.test(s)||ew(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(s,e=[]){let t;switch(s){case"Browser":t=k0(Ot());break;case"Worker":t=`${k0(Ot())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${el}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(s,e={}){return al(s,"GET","/v2/passwordPolicy",_y(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=6;class TV{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??EV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L0(this),this.idTokenSubscription=new L0(this),this.beforeStateQueue=new _V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mf(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_i(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(ha(this));const t=e?hn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vV(this),t=new TV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await pV(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ji(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Wx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ty(s){return hn(s)}class L0{constructor(e){this.auth=e,this.observer=null,this.addObserver=W1(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ay={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bV(s){Ay=s}function SV(s){return Ay.loadJS(s)}function wV(){return Ay.gapiScript}function IV(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(s,e){const t=wg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(fa(l,e??{}))return a;sr(a,"already-initialized")}return t.initialize({options:e})}function CV(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ji);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function DV(s,e,t){const i=Ty(s);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=aw(e),{host:c,port:d}=NV(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(fa(g,i.config.emulator)&&fa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Wo(c)?(vA(`${l}//${c}${p}`),EA("Auth",!0)):xV()}function aw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function NV(s){const e=aw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:U0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:U0(c)}}}function U0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function xV(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(s,e){return aV(s,"POST","/v1/accounts:signInWithIdp",_y(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="http://localhost";class Aa extends ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Aa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:VV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends gc{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Aa._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Wr.credential(t,i)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends gc{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends gc{constructor(){super("twitter.com")}static credential(e,t){return Aa._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ts.credential(t,i)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await ti._fromIdTokenResponse(e,i,a),c=B0(i);return new $o({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=B0(i);return new $o({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function B0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends or{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new kf(e,t,i,a)}}function uw(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(s,l,e,i):l})}async function OV(s,e,t=!1){const i=await Wu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return $o._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(s,e,t=!1){const{auth:i}=s;if(_i(i.app))return Promise.reject(ha(i));const a="reauthenticate";try{const l=await Wu(s,uw(i,a,e,s),t);we(l.idToken,i,"internal-error");const c=vy(l.idToken);we(c,i,"internal-error");const{sub:d}=c;return we(s.uid===d,i,"user-mismatch"),$o._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&sr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(s,e,t=!1){if(_i(s.app))return Promise.reject(ha(s));const i="signIn",a=await uw(s,i,e),l=await $o._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(l.user),l}function kV(s,e,t,i){return hn(s).onIdTokenChanged(e,t,i)}function LV(s,e,t){return hn(s).beforeAuthStateChanged(e,t)}const Lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=1e3,BV=10;class hw extends cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);yV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,BV):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},UV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hw.type="LOCAL";const zV=hw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fw.type="SESSION";const dw=fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new cd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await qV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=by("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function jV(s){Si().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function HV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GV(){return navigator?.serviceWorker?.controller||null}function KV(){return mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firebaseLocalStorageDb",QV=1,Uf="firebaseLocalStorage",gw="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hd(s,e){return s.transaction([Uf],e?"readwrite":"readonly").objectStore(Uf)}function YV(){const s=indexedDB.deleteDatabase(pw);return new yc(s).toPromise()}function gg(){const s=indexedDB.open(pw,QV);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Uf,{keyPath:gw})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Uf)?e(i):(i.close(),await YV(),e(await gg()))})})}async function z0(s,e,t){const i=hd(s,!0).put({[gw]:e,value:t});return new yc(i).toPromise()}async function XV(s,e){const t=hd(s,!1).get(e),i=await new yc(t).toPromise();return i===void 0?null:i.value}function q0(s,e){const t=hd(s,!0).delete(e);return new yc(t).toPromise()}const $V=800,ZV=3;class yw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>ZV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(KV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HV(),!this.activeServiceWorker)return;this.sender=new FV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gg();return await z0(e,Lf,"1"),await q0(e,Lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>z0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>XV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>q0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=hd(a,!1).getAll();return new yc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yw.type="LOCAL";const JV=yw;new pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(s,e){return e?Ji(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy extends ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eO(s){return PV(s.auth,new Sy(s),s.bypassAuthState)}function tO(s){const{auth:e,user:t}=s;return we(t,e,"internal-error"),MV(t,new Sy(s),s.bypassAuthState)}async function nO(s){const{auth:e,user:t}=s;return we(t,e,"internal-error"),OV(t,new Sy(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eO;case"linkViaPopup":case"linkViaRedirect":return nO;case"reauthViaPopup":case"reauthViaRedirect":return tO;default:sr(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new pc(2e3,1e4);class Do extends _w{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iO.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="pendingRedirect",hf=new Map;class sO extends _w{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const i=await aO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aO(s,e){const t=uO(e),i=lO(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function oO(s,e){hf.set(s._key(),e)}function lO(s){return Ji(s._redirectPersistence)}function uO(s){return cf(rO,s.config.apiKey,s.name)}async function cO(s,e,t=!1){if(_i(s.app))return Promise.reject(ha(s));const i=Ty(s),a=WV(i,e),c=await new sO(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=600*1e3;class fO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(bi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hO&&this.cachedEventUids.clear(),this.cachedEventUids.has(F0(e))}saveEventToCache(e){this.cachedEventUids.add(F0(e)),this.lastProcessedEventTime=Date.now()}}function F0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function vw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function dO(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vw(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(s,e={}){return al(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gO=/^https?/;async function yO(s){if(s.config.emulator)return;const{authorizedDomains:e}=await mO(s);for(const t of e)try{if(_O(t))return}catch{}sr(s,"unauthorized-domain")}function _O(s){const e=mg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!gO.test(t))return!1;if(pO.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new pc(3e4,6e4);function j0(){const s=Si().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function EO(s){return new Promise((e,t)=>{function i(){j0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j0(),t(bi(s,"network-request-failed"))},timeout:vO.get()})}if(Si().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Si().gapi?.load)i();else{const a=IV("iframefcb");return Si()[a]=()=>{gapi.load?i():t(bi(s,"network-request-failed"))},SV(`${wV()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw ff=null,e})}let ff=null;function TO(s){return ff=ff||EO(s),ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new pc(5e3,15e3),bO="__/auth/iframe",SO="emulator/auth/iframe",wO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RO(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?yy(e,SO):`https://${s.config.authDomain}/${bO}`,i={apiKey:e.apiKey,appName:s.name,v:el},a=IO.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${rc(i).slice(1)}`}async function CO(s){const e=await TO(s),t=Si().gapi;return we(t,s,"internal-error"),e.open({where:document.body,url:RO(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wO,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=bi(s,"network-request-failed"),d=Si().setTimeout(()=>{l(c)},AO.get());function p(){Si().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NO=500,xO=600,VO="_blank",OO="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MO(s,e,t,i=NO,a=xO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...DO,width:i.toString(),height:a.toString(),top:l,left:c},g=Ot().toLowerCase();t&&(d=WS(g)?VO:t),ZS(g)&&(e=e||OO,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[O,H])=>`${S}${O}=${H},`,"");if(gV(g)&&d!=="_self")return PO(e||"",d),new H0(null);const T=window.open(e||"",d,_);we(T,s,"popup-blocked");try{T.focus()}catch{}return new H0(T)}function PO(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="__/auth/handler",LO="emulator/auth/handler",UO=encodeURIComponent("fac");async function G0(s,e,t,i,a,l){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:el,eventId:a};if(e instanceof lw){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",J1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof gc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await s._getAppCheckToken(),g=p?`#${UO}=${encodeURIComponent(p)}`:"";return`${BO(s)}?${rc(d).slice(1)}${g}`}function BO({config:s}){return s.emulator?yy(s,LO):`https://${s.authDomain}/${kO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class zO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dw,this._completeRedirectFn=cO,this._overrideRedirectResult=oO}async _openPopup(e,t,i,a){ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await G0(e,t,i,mg(),a);return MO(e,l,by())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await G0(e,t,i,mg(),a);return jV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ar(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await CO(e),i=new fO(e);return t.register("authEvent",a=>(we(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vp,{type:Vp},a=>{const l=a?.[0]?.[Vp];l!==void 0&&t(!!l),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rw()||JS()||Ey()}}const qO=zO;var K0="@firebase/auth",Q0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HO(s){ko(new da("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(s)},g=new AV(i,a,l,p);return CV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ko(new da("auth-internal",e=>{const t=Ty(e.getProvider("auth").getImmediate());return(i=>new FO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(K0,Q0,jO(s)),ss(K0,Q0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=300,KO=_A("authIdTokenMaxAge")||GO;let Y0=null;const QO=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>KO)return;const a=t?.token;Y0!==a&&(Y0=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function YO(s=CA()){const e=wg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=RV(s,{popupRedirectResolver:qO,persistence:[JV,zV,dw]}),i=_A("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=QO(l.toString());LV(t,c,()=>c(t.currentUser)),kV(t,d=>c(d))}}const a=gA("auth");return a&&DV(t,`http://${a}`),t}function XO(){return document.getElementsByTagName("head")?.[0]??document}bV({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const l=bi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",XO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HO("Browser");const $O={apiKey:"AIzaSyBin8q9AYENaq5Up3v90jKQbrtV2zIwQwU",authDomain:"space-repetition-7a29e.firebaseapp.com",projectId:"space-repetition-7a29e",storageBucket:"space-repetition-7a29e.firebasestorage.app",messagingSenderId:"40672936283",appId:"1:40672936283:web:c19512816f040c41771a7e",measurementId:"G-37HBQBJ1LZ"},Ew=RA($O);YO(Ew);const yi=xx(Ew);Vx(yi).catch(s=>{console.warn("IndexedDb persistence failed:",s)});function ZO(){const[s,e]=$.useState([]),[t,i]=$.useState(null),[a,l]=$.useState(""),[c,d]=$.useState([]),[p,g]=$.useState({question:"",answer:""}),[_,T]=$.useState(!1),S=async()=>{const re=await fg(wu(yi,"decks"));e(re.docs.map(D=>({id:D.id,...D.data()})))},O=async()=>{a&&(await x0(wu(yi,"decks"),{name:a}),l(""),S())},H=re=>{i(re),K(re.id)},K=async re=>{const D=zS(wu(yi,"cards"),qS("deckId","==",re)),w=await fg(D);d(w.docs.map(I=>({id:I.id,...I.data()})))},q=re=>{g({...p,[re.target.name]:re.target.value})},te=async()=>{!p.question||!p.answer||!t||(await x0(wu(yi,"cards"),{deckId:t.id,question:p.question,answer:p.answer,interval:1,ease:2.5,due:new Date().toISOString()}),g({question:"",answer:""}),K(t.id))},W=async re=>{await Xx(Pu(yi,"cards",re)),K(t.id)},ne=async re=>{const D=prompt("Edit question:",re.question),w=prompt("Edit answer:",re.answer);D!==null&&w!==null&&(await dg(Pu(yi,"cards",re.id),{question:D,answer:w}),K(t.id))},ge=async(re,D)=>{let w=re.interval||1,I=re.ease||2.5;D==="hard"?w=1:D==="medium"?w=w:D==="easy"&&(w=Math.round(w*I));const M=new Date;M.setDate(M.getDate()+w),await dg(Pu(yi,"cards",re.id),{interval:w,due:M.toISOString()}),K(t.id)};$.useEffect(()=>{S()},[]);const oe=c.filter(re=>_?new Date(re.due)<=new Date:!0);return _e.jsxs("div",{className:"p-4",children:[_e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Decks"}),_e.jsxs("div",{className:"mb-4",children:[_e.jsx("input",{type:"text",placeholder:"New deck name",value:a,onChange:re=>l(re.target.value),className:"border p-2 mr-2"}),_e.jsx("button",{onClick:O,className:"bg-blue-500 text-white p-2",children:"Add Deck"})]}),_e.jsxs("div",{className:"flex gap-4",children:[_e.jsx("ul",{className:"border p-4 w-1/3",children:s.map(re=>_e.jsx("li",{className:"mb-2 cursor-pointer",onClick:()=>H(re),children:re.name},re.id))}),t&&_e.jsxs("div",{className:"border p-4 w-2/3",children:[_e.jsxs("h2",{className:"text-lg font-bold mb-2",children:[t.name," - Cards"]}),_e.jsxs("div",{className:"mb-4",children:[_e.jsx("input",{type:"text",name:"question",placeholder:"Question",value:p.question,onChange:q,className:"border p-2 mr-2 w-1/2"}),_e.jsx("input",{type:"text",name:"answer",placeholder:"Answer",value:p.answer,onChange:q,className:"border p-2 mr-2 w-1/2"}),_e.jsx("button",{onClick:te,className:"bg-green-500 text-white p-2",children:"Add Card"})]}),_e.jsx("div",{className:"mb-2",children:_e.jsxs("label",{children:[_e.jsx("input",{type:"checkbox",checked:_,onChange:()=>T(!_),className:"mr-2"}),"Show Due Cards Only"]})}),_e.jsx("ul",{children:oe.map(re=>_e.jsxs("li",{className:"border-b py-2 flex justify-between items-center",children:[_e.jsxs("span",{children:[re.question,"  ",re.answer," (",new Date(re.due).toLocaleDateString(),")"]}),_e.jsxs("div",{className:"flex gap-2",children:[_e.jsx("button",{onClick:()=>ne(re),className:"bg-yellow-500 text-white p-1 px-2",children:"Edit"}),_e.jsx("button",{onClick:()=>W(re.id),className:"bg-red-500 text-white p-1 px-2",children:"Delete"}),_e.jsx("button",{onClick:()=>ge(re,"easy"),className:"bg-green-500 text-white p-1 px-2",children:"Easy"}),_e.jsx("button",{onClick:()=>ge(re,"medium"),className:"bg-yellow-600 text-white p-1 px-2",children:"Medium"}),_e.jsx("button",{onClick:()=>ge(re,"hard"),className:"bg-red-500 text-white p-1 px-2",children:"Hard"})]})]},re.id))}),oe.length===0&&_e.jsx("p",{className:"mt-2",children:"No cards due!"})]})]})]})}function JO(){const{deckId:s}=kR(),[e,t]=$.useState([]),[i,a]=$.useState(0),[l,c]=$.useState(!1),d=async()=>{const _=zS(wu(yi,"cards"),qS("deckId","==",s)),T=await fg(_);t(T.docs.map(S=>({id:S.id,...S.data()})))},p=async _=>{const T=e[i];let S=T.interval||1,O=T.ease||2.5;_==="hard"?S=1:S=Math.round(S*O);const H=new Date;H.setDate(H.getDate()+S),await dg(Pu(yi,"cards",T.id),{interval:S,due:H.toISOString()}),c(!1),a(i+1)};if($.useEffect(()=>{d()},[]),!e.length)return _e.jsx("p",{className:"p-4",children:"No cards to review!"});if(i>=e.length)return _e.jsx("p",{className:"p-4",children:"Review complete!"});const g=e[i];return _e.jsxs("div",{className:"p-4",children:[_e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Review Card ",i+1,"/",e.length]}),_e.jsxs("div",{className:"border p-4 mb-4",children:[_e.jsx("p",{className:"text-lg",children:g.question}),l&&_e.jsx("p",{className:"mt-2 text-green-600",children:g.answer})]}),!l&&_e.jsx("button",{onClick:()=>c(!0),className:"bg-blue-500 text-white p-2",children:"Show Answer"}),l&&_e.jsxs("div",{className:"flex gap-2 mt-2",children:[_e.jsx("button",{onClick:()=>p("easy"),className:"bg-green-500 text-white p-2",children:"Easy"}),_e.jsx("button",{onClick:()=>p("medium"),className:"bg-yellow-500 text-white p-2",children:"Medium"}),_e.jsx("button",{onClick:()=>p("hard"),className:"bg-red-500 text-white p-2",children:"Hard"})]})]})}function WO(){return _e.jsxs("nav",{className:"p-4 bg-blue-500 text-white flex gap-4",children:[_e.jsx(Uu,{to:"/my-srs/",children:"Home"}),_e.jsx(Uu,{to:"/my-srs/decks",children:"Decks"})]})}const eM="/my-srs";function tM(){return _e.jsxs(E1,{basename:eM,children:[_e.jsx(WO,{}),_e.jsxs(ZR,{children:[_e.jsx(Qh,{path:"/",element:_e.jsx(N1,{})}),_e.jsx(Qh,{path:"/decks",element:_e.jsx(ZO,{})}),_e.jsx(Qh,{path:"/review/:deckId",element:_e.jsx(JO,{})})]})]})}sR.createRoot(document.getElementById("root")).render(_e.jsx(ZI.StrictMode,{children:_e.jsx(tM,{})}));
